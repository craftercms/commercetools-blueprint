{"version":3,"sources":["components/App.js","img/burger.svg","redux/actions/productsActions.js","redux/actions/usersActions.js","util/constants.js","util/string.js","components/ScrollReset.js","components/MainWrapper.js","components/shared/Anchor.js","components/app/Header.js","components/app/Footer.js","components/shared/Alert.js","util/component.js","components/shared/AssertContent.js","components/app/Layout.js","components/shared/form/CheckBox.js","components/shared/form/RadioButton.js","components/shared/range_slider/Range.js","components/app/Facets.js","components/app/Product.js","components/app/ProductsListing.js","components/app/ProductGallery.js","components/app/ProductCard.js","components/app/BlogTeaser.js","util/products.js","components/app/ProductDetails.js","components/app/LogIn.js","components/app/Register.js","components/app/Hero.js","components/app/Features.js","components/app/Testimonials.js","components/app/ContentSideImage.js","components/shared/NotImplemented.js","components/app/Home.js","components/app/ProductTeaser.js","components/app/NotFoundView.js","components/shared/Empty.js","components/app/CartBody.js","components/app/CartView.js","components/app/ProfileSettings.js","components/app/OrderList.js","components/app/AddressCard.js","components/app/Account.js","components/shared/authorized.js","components/app/CheckoutView.js","components/app/OrderDetails.js","components/app/BlogRoll.js","components/app/BlogEntry.js","components/app/Search.js","components/Routes.js","redux/reducers/themeReducer.js","util/array.js","redux/reducers/contentReducer.js","redux/reducers/usersReducer.js","redux/reducers/productsReducer.js","redux/epics/users.js","redux/epics/content.js","redux/epics/epics.js","redux/epics/products.js","redux/store.js","redux/actions/themeActions.js","translations/i18n.js","translations/resources.js","util/redux.js","redux/actions/contentActions.js"],"names":["i18next","init","i18nextConfig","hot","module","props","useEffect","store","getState","theme","isAuthoring","script","document","createElement","src","setAttribute","head","appendChild","i18n","exports","FETCH_PRODUCTS","FETCH_PRODUCTS_COMPLETE","FETCH_PRODUCTS_FAILED","FETCH_PRODUCT","FETCH_PRODUCT_COMPLETE","FETCH_PRODUCT_FAILED","FETCH_CART","FETCH_CART_COMPLETE","ADD_TO_CART","ADD_TO_CART_COMPLETE","ADD_TO_CART_FAILED","UPDATE_CART","UPDATE_CART_COMPLETE","UPDATE_CART_FAILED","UPDATE_CART_ITEM_QUANTITY","UPDATE_CART_ITEM_QUANTITY_COMPLETE","UPDATE_CART_ITEM_QUANTITY_FAILED","REMOVE_FROM_CART","REMOVE_FROM_CART_COMPLETE","FACETS_CHANGED","KEYWORDS_CHANGED","FETCH_SHIPPING_METHODS","FETCH_SHIPPING_METHODS_COMPLETE","FETCH_SHIPPING_METHODS_FAILED","CHECKOUT","CHECKOUT_COMPLETE","CHANGE_LOCALE","CHANGE_CURRENCY","SET_STORE_SETTINGS","fetchProduct","id","type","payload","fetchProductComplete","response","root","fetchProductFailed","fetchProducts","query","fetchProductsComplete","fetchProductsFailed","fetchCart","fetchCartComplete","fetchCartFailed","addToCart","cartItem","addToCartComplete","addToCartFailed","removeFromCart","data","removeFromCartComplete","removeFromCartFailed","updateCartItemQuantity","updateCartItemQuantityComplete","updateCartItemQuantityFailed","updateCart","updateCartComplete","updateCartFailed","fetchShippingMethodsComplete","fetchShippingMethodsFailed","checkout","redirect","checkoutComplete","checkoutFailed","changeLocale","value","changeCurrency","setStoreSettings","settings","currency","currencies","locale","locales","LOGIN","LOGIN_COMPLETE","LOGIN_FAILED","SET_PERSONA","LOGOUT","LOGOUT_COMPLETE","REGISTRATION_COMPLETE","SUBMIT_REGISTRATION","SUBMIT_REGISTRATION_FAILED","FETCH_ORDERS","FETCH_ORDERS_COMPLETE","FETCH_ORDERS_FAILED","FETCH_ORDER","FETCH_ORDER_COMPLETE","FETCH_ORDER_FAILED","UNAUTHORIZED","SET_LOGIN_REDIRECT","RESET_LOGIN_REDIRECT","ADD_USER_ADDRESS","ADD_USER_ADDRESS_COMPLETE","ADD_USER_ADDRESS_FAILED","EDIT_USER_ADDRESS","EDIT_USER_ADDRESS_COMPLETE","EDIT_USER_ADDRESS_FAILED","REMOVE_USER_ADDRESS","REMOVE_USER_ADDRESS_COMPLETE","REMOVE_USER_ADDRESS_FAILED","SET_USER_ADDRESS_DEFAULTS","SET_USER_ADDRESS_DEFAULTS_COMPLETE","SET_USER_ADDRESS_DEFAULTS_FAILED","submitRegistrationComplete","submitRegistrationFailed","message","registrationComplete","loginComplete","user","setPersona","persona","loginFailed","logout","logoutComplete","logoutFailed","fetchOrders","fetchOrdersComplete","fetchOrdersFailed","fetchOrder","fetchOrderComplete","fetchOrderFailed","setLoginRedirect","url","addAddressComplete","addAddressFailed","editAddressComplete","editAddressFailed","removeAddress","removeAddressComplete","removeAddressFailed","setAddressDefaults","address","setAddressDefaultsComplete","setAddressDefaultsFailed","Currencies","USD","EUR","capitalize","str","charAt","toUpperCase","substring","toLowerCase","money","amount","parseFloat","toFixed","memo","withRouter","window","scrollTo","location","pathname","children","connect","state","customizer","wrapperClass","classNames","squaredCorners","withBoxShadow","topNavigation","className","Anchor","href","autoTarget","isExternal","find","protocol","includes","Component","Link","resultProps","to","target","defaultProps","FlagCodeMap","de","en","en_us","Header","dispatch","useDispatch","useSelector","content","name","products","useState","localesOpen","setLocalesOpen","currenciesOpen","setCurrenciesOpen","history","useContext","__RouterContext","users","searchOpen","setSearchOpen","keywords","setKeywords","header","logo_s","logo_alt_t","logo_url_s","nav","Container","Row","Col","md","alt","onClick","querySelector","classList","contains","remove","add","hamburger","map","item","index","key","label","setTimeout","getElementById","focus","e","Dropdown","isOpen","toggle","DropdownToggle","caret","code","DropdownMenu","DropdownItem","Popover","placement","PopoverBody","onChange","onKeyPress","push","placeholder","Footer","footer","section_background_image_s","direction","Date","getFullYear","Alert","onShow","setState","visible","onDismiss","Icon","this","color","icon","dismiss","PureComponent","iceRepaintTimeout","getLoginFormDefaults","email","localStorage","getItem","process","rememberMe","useCart","onEmpty","ref","useRef","current","cart","items","length","useUser","onMissing","useContentBranch","ICERepaint","clearTimeout","amplify","publish","useICE","modelId","useCartUpdateInFlight","loading","crafterConf","baseUrl","site","Cookie","get","AssertContent","render","variables","requirements","reqs","required","optional","forEach","req","isDescriptor","checker","getter","isOptional","toBeFetched","filter","byIdLoadingKey","FETCH_GRAPH","vars","r","fetchGraph","errors","error","console","sm","style","padding","Spinner","React","Children","child","cloneElement","Layout","CheckBox","disabled","checked","CheckboxClass","htmlFor","background","borderColor","CheckBoxField","defaultChecked","renderCheckBoxField","input","meta","initial","RadioButton","currentValue","classes","RadioButtonField","radioValue","RadioButtonClass","renderRadioButtonField","Range","createSliderWithTooltip","Slider","RangeTheme","min","max","marks","tipFormatter","tipOptions","onAfterChange","defaultValue","tipProps","MultipleSelectionFacet","title","facets","onSelection","facet","SingleSelectionFacet","RangeFacet","HierarchicalFacets","cardigans_n_sweaters","Product","product","variants","rating","colors","variant","attributes","some","a","price","img","images","description","average","widgetEmptyColors","widgetHoverColors","widgetRatedColors","widgetDimensions","widgetSpacings","Widget","ProductListing","byId","Object","values","inputRef","queryString","qs","search","facetMeta","list","types","entries","split","reduce","obj","parseInt","fetch","Button","outline","contained","containerClassName","pageClassName","pageLinkClassName","previousClassName","previousLinkClassName","nextClassName","nextLinkClassName","pageRangeDisplayed","marginPagesDisplayed","activeClassName","initialPage","offset","limit","pageCount","Math","ceil","total","onPageChange","nextPage","newQS","nextPageIndex","nextOffset","q","categories","join","onOffsetChanged","selected","disableInitialCallback","previousLabel","nextLabel","marginBottom","border","onKeywordsChange","facetItem","which","collection","_value","val","onMultipleValueChange","_facet_","onRangeChange","ProductGallery","useReducer","b","image","currentIndex","lightboxIsOpen","preventDefault","i","changeImg","onClose","views","reducer","SubmitReview","isLoggedIn","onSuccess","setValue","comments","setComments","openModal","setOpenModal","setMessage","toggleOpen","reviews","Modal","text","changeRating","ButtonToolbar","body","JSON","stringify","method","headers","then","json","status","VariantSelection","components","options","getVariantLabel","option","clearable","classNamePrefix","attr","Option","innerProps","isDisabled","backgroundColor","boxShadow","ProductCard","initialState","setImages","setVariant","productId","variantId","quantity","setCartItem","isInCart","updatesInFlight","iVariant","concat","Card","CardBody","nextQuantity","onUpdateQuantity","onStock","BlogPostCard","localId","slug_s","title_s","image_s","summary_html_raw","hideSummary","ice","dangerouslySetInnerHTML","__html","BlogTeaser","posts_o","slice","post","lg","getProducts","params","ajax","useProductsQuery","ProductDetails","match","related","setRelated","sub","unsubscribe","keys","oMap","category","ids","products$","of","posts$","posts","forkJoin","pipe","prod","subscribe","LogInForm","reduxForm","form","showPassword","setShowPassword","setError","meRemembered","querySelectorAll","onSubmit","login","setItem","removeItem","catchError","loginRedirect","Field","component","LogIn","initialValues","RegisterFormComponent","handleSubmit","RegisterForm","RegistrationConfirmation","Register","success","registerConfirmPending","Hero","title_t","image_alt_t","content_html_raw","buttons_o","backgroundImage","label_s","link_s","Features","features_o","closingContent_html_raw","openingContent_html_raw","width","description_t","icon_s","Testimonials","testimonials_o","customer_s","description_html_raw","stars_i","rel","stars","ContentSideImage","contentAlignment_s","image_alt_s","CopyColumn","xs","ImageColumn","NotImplemented","contentType","ContentTypeMap","numOfProducts_i","setProducts","switchMap","random","display","textAlign","Home","home","age","gender","objectId","withTranslation","t","Empty","CartSummary","Table","responsive","productName","CartBody","displayOptions","showPrice","showTax","showTotal","showRemove","showQuantityModifiers","ButtonGroup","unitPrice","taxedPrice","totalPrice","OrderTotals","sum","shippingPrice","CartView","ChangePasswordForm","reset","setType","setSuccess","SubmissionError","_error","OrderList","ordersTable","orders","hover","created","modified","shippingStatus","orderStatus","paymentStatus","substr","indexOf","Badge","AddressCard","showName","undefined","addressName","firstName","lastName","phone","mobile","fax","streetAddressLineOne","streetAddressLineTwo","city","postalCode","country","AddressForm","onCancel","isEditMode","AddressEntry","addressId","backUrl","origin","useMemo","addresses","AddressSelection","returnUrl","newAddressUrl","authorized","displayName","C","wrappedComponentRef","remainingProps","WrappedComponent","hoistStatics","activeTab","tab","setActiveTab","xl","height","middleName","Nav","tabs","NavItem","NavLink","classnames","active","TabContent","TabPane","tabId","isShippingDefault","isBillingDefault","UncontrolledDropdown","onUpdateAddressDefaults","onSetDefaultBilling","onSetDefaultShipping","divider","cartAddress","_address_","ShippingSelection","selectedValue","CreditCardForm","cardNumber","cvc","expirationDate","nameOnCard","minLength","maxLength","CheckoutView","card","shippingAddress","setShippingAddress","billingAddress","setBillingAddress","shippingMethod","setShippingMethod","onAddressSelection","shipping","billing","shippingCondition","billingCondition","methodCondition","checkoutDisabled","small","shippingMethods","OrderDetails","order","useOrder","BlogRoll","roll","setRoll","selectedCategory","navItem","blog","categories_o","CategoryListing","BlogEntry","slug","bySlug","Post","RelatedPosts","RelatedProducts","author_s","subtitle_s","value_smv","relatedPosts","setRelatedPosts","setItems","floor","Search","productResults","setProductResults","contentResults","setContentResults","productsQueryParams","SearchService","crafterQuery","createQuery","bool","multi_match","getQuery","Number","isInteger","articles","hits","_source","catalog","SearchResult","link","preview","content_html","Routes","listen","require","guest","reportNavigation","exact","path","Account","NotFound404","toLookupTable","array","prop","table","getHeader","getFooter","getNav","getHome","sections_o","getPosts","getStore","getCategories","FragmentMap","FeatureList","combineEpics","action$","state$","ofType","withLatestFrom","pluck","errorOp","mapOp","Array","isArray","fragments","queryPieces","varSignature","signaturePieces","variable","fetchGraphFailed","fetchGraphComplete","itemId","tap","ignoreElements","mapTo","addAddress","changeAddress","defaultBillingAddress","defaultShippingAddress","combineReducers","reduxFormReducer","action","removeProp","FETCH_GRAPH_COMPLETE","rootPayload","FETCH_GRAPH_FAILED","getRootType","registration","Cookies","set","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","epicMiddleware","createEpicMiddleware","createStore","applyMiddleware","innerHTML","parse","storeSettings","getAttribute","setIsAuthoring","run","rootEpic","config","interpolation","escapeValue","lng","resources","es","branch","next","fail","replace"],"mappings":"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","file":"static/js/3.6cc58127.chunk.js","sourcesContent":["/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect } from 'react';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { I18nextProvider } from 'react-i18next';\nimport i18next from 'i18next';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { hot } from 'react-hot-loader';\nimport Routes from './Routes';\nimport store from '../redux/store';\nimport ScrollReset from './ScrollReset';\nimport { config as i18nextConfig } from '../translations/i18n';\nimport MainWrapper from './MainWrapper';\n\ni18next.init(i18nextConfig);\n\nfunction App(props) {\n\n  useEffect(\n    () => {\n\n      // True if the site is being view via authoring (studio). False if it's the live site\n      const { isAuthoring } = store.getState().theme;\n\n      if (isAuthoring) {\n        const script = document.createElement('script');\n\n        script.src = `/studio/static-assets/libs/requirejs/require.js`;\n\n        script.setAttribute(\n          'data-main',\n          `/studio/overlayhook?site=NOTUSED&page=NOTUSED&cs.js`\n        );\n\n        document.head.appendChild(script);\n      }\n\n    },\n    []\n  );\n\n  return (\n    <Provider store={store}>\n      <I18nextProvider i18n={i18next}>\n        <BrowserRouter>\n          <ScrollReset>\n            <MainWrapper>\n              <main>\n                <Routes/>\n              </main>\n            </MainWrapper>\n          </ScrollReset>\n        </BrowserRouter>\n      </I18nextProvider>\n    </Provider>\n  );\n}\n\nexport default hot(module)(App);\n","module.exports = __webpack_public_path__ + \"static/media/burger.8282f1ec.svg\";","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const FETCH_PRODUCTS = 'FETCH_PRODUCTS';\nexport const FETCH_PRODUCTS_COMPLETE = 'FETCH_PRODUCTS_COMPLETE';\nexport const FETCH_PRODUCTS_FAILED = 'FETCH_PRODUCTS_FAILED';\n\nexport const FETCH_PRODUCT = 'FETCH_PRODUCT';\nexport const FETCH_PRODUCT_COMPLETE = 'FETCH_PRODUCT_COMPLETE';\nexport const FETCH_PRODUCT_FAILED = 'FETCH_PRODUCT_FAILED';\n\nexport const FETCH_CART = 'FETCH_CART';\nexport const FETCH_CART_COMPLETE = 'FETCH_CART_COMPLETE';\nexport const FETCH_CART_FAILED = 'FETCH_CART_FAILED';\n\nexport const ADD_TO_CART = 'ADD_TO_CART';\nexport const ADD_TO_CART_COMPLETE = 'ADD_TO_CART_COMPLETE';\nexport const ADD_TO_CART_FAILED = 'ADD_TO_CART_FAILED';\n\nexport const UPDATE_CART = 'UPDATE_CART';\nexport const UPDATE_CART_COMPLETE = 'UPDATE_CART_COMPLETE';\nexport const UPDATE_CART_FAILED = 'UPDATE_CART_FAILED';\n\nexport const UPDATE_CART_ITEM_QUANTITY = 'UPDATE_CART_ITEM_QUANTITY';\nexport const UPDATE_CART_ITEM_QUANTITY_COMPLETE = 'UPDATE_CART_ITEM_QUANTITY_COMPLETE';\nexport const UPDATE_CART_ITEM_QUANTITY_FAILED = 'UPDATE_CART_ITEM_QUANTITY_FAILED';\n\nexport const REMOVE_FROM_CART = 'REMOVE_FROM_CART';\nexport const REMOVE_FROM_CART_COMPLETE = 'REMOVE_FROM_CART_COMPLETE';\nexport const REMOVE_FROM_CART_FAILED = 'REMOVE_FROM_CART_FAILED';\n\nexport const FACETS_CHANGED = 'FACETS_CHANGED';\nexport const KEYWORDS_CHANGED = 'KEYWORDS_CHANGED';\n\nexport const FETCH_SHIPPING_METHODS = '';\nexport const FETCH_SHIPPING_METHODS_COMPLETE = 'FETCH_SHIPPING_METHODS_COMPLETE';\nexport const FETCH_SHIPPING_METHODS_FAILED = 'FETCH_SHIPPING_METHODS_FAILED';\n\nexport const CHECKOUT = 'CHECKOUT';\nexport const CHECKOUT_COMPLETE = 'CHECKOUT_COMPLETE';\nexport const CHECKOUT_FAILED = 'CHECKOUT_FAILED';\n\nexport const CHANGE_LOCALE = 'CHANGE_LOCALE';\nexport const CHANGE_CURRENCY = 'CHANGE_CURRENCY';\nexport const SET_STORE_SETTINGS = 'SET_STORE_SETTINGS';\n\nexport function fetchProduct(id) {\n  return {\n    type: FETCH_PRODUCT,\n    payload: { id }\n  };\n}\n\nexport function fetchProductComplete(response) {\n  return {\n    root: FETCH_PRODUCT,\n    type: FETCH_PRODUCT_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchProductFailed(response) {\n  return {\n    root: FETCH_PRODUCT,\n    type: FETCH_PRODUCT_FAILED,\n    payload: response\n  };\n}\n\nexport function fetchProducts(query) {\n  return {\n    type: FETCH_PRODUCTS,\n    payload: { query }\n  };\n}\n\nexport function fetchProductsComplete(response) {\n  return {\n    root: FETCH_PRODUCTS,\n    type: FETCH_PRODUCTS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchProductsFailed(response) {\n  return {\n    root: FETCH_PRODUCTS,\n    type: FETCH_PRODUCTS_FAILED,\n    payload: response\n  };\n}\n\nexport function fetchCart() {\n  return {\n    type: FETCH_CART\n  };\n}\n\nexport function fetchCartComplete(response) {\n  return {\n    root: FETCH_CART,\n    type: FETCH_CART_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchCartFailed(response) {\n  return {\n    root: FETCH_CART,\n    type: FETCH_CART_FAILED,\n    payload: response\n  };\n}\n\nexport function addToCart(cartItem) {\n  return {\n    type: ADD_TO_CART,\n    payload: cartItem\n  };\n}\n\nexport function addToCartComplete(response) {\n  return {\n    root: ADD_TO_CART,\n    type: ADD_TO_CART_COMPLETE,\n    payload: response\n  };\n}\n\nexport function addToCartFailed(response) {\n  return {\n    root: ADD_TO_CART,\n    type: ADD_TO_CART_FAILED,\n    payload: response\n  };\n}\n\nexport function removeFromCart(data) {\n  return {\n    type: REMOVE_FROM_CART,\n    payload: data\n  };\n}\n\nexport function removeFromCartComplete(data) {\n  return {\n    root: REMOVE_FROM_CART,\n    type: REMOVE_FROM_CART_COMPLETE,\n    payload: data\n  };\n}\n\nexport function removeFromCartFailed(data) {\n  return {\n    root: REMOVE_FROM_CART,\n    type: REMOVE_FROM_CART_FAILED,\n    payload: data\n  };\n}\n\nexport function updateCartItemQuantity(data) {\n  return {\n    type: UPDATE_CART_ITEM_QUANTITY,\n    payload: data\n  };\n}\n\nexport function updateCartItemQuantityComplete(data) {\n  return {\n    root: UPDATE_CART_ITEM_QUANTITY,\n    type: UPDATE_CART_ITEM_QUANTITY_COMPLETE,\n    payload: data\n  };\n}\n\nexport function updateCartItemQuantityFailed(data) {\n  return {\n    root: UPDATE_CART_ITEM_QUANTITY,\n    type: UPDATE_CART_ITEM_QUANTITY_FAILED,\n    payload: data\n  };\n}\n\nexport function updateCart(data) {\n  return {\n    type: UPDATE_CART,\n    payload: data\n  };\n}\n\nexport function updateCartComplete(data) {\n  return {\n    root: UPDATE_CART,\n    type: UPDATE_CART_COMPLETE,\n    payload: data\n  };\n}\n\nexport function updateCartFailed(data) {\n  return {\n    root: UPDATE_CART,\n    type: UPDATE_CART_FAILED,\n    payload: data\n  };\n}\n\nexport function facetsChanged(query) {\n  return {\n    type: FACETS_CHANGED,\n    payload: { query }\n  };\n}\n\nexport function keywordsChanged(keywords) {\n  return {\n    type: KEYWORDS_CHANGED,\n    payload: { keywords }\n  };\n}\n\nexport function fetchShippingMethods() {\n  return {\n    type: FETCH_SHIPPING_METHODS\n  };\n}\n\nexport function fetchShippingMethodsComplete(data) {\n  return {\n    root: FETCH_SHIPPING_METHODS,\n    type: FETCH_SHIPPING_METHODS_COMPLETE,\n    payload: data\n  };\n}\n\nexport function fetchShippingMethodsFailed(data) {\n  return {\n    root: FETCH_SHIPPING_METHODS,\n    type: FETCH_SHIPPING_METHODS_FAILED,\n    payload: data\n  };\n}\n\nexport function checkout(data, redirect) {\n  return {\n    type: CHECKOUT,\n    payload: { data, redirect }\n  };\n}\n\nexport function checkoutComplete(data) {\n  return {\n    root: CHECKOUT,\n    type: CHECKOUT_COMPLETE,\n    payload: data\n  };\n}\n\nexport function checkoutFailed(data) {\n  return {\n    root: CHECKOUT,\n    type: CHECKOUT_FAILED,\n    payload: data\n  };\n}\n\nexport function changeLocale(value) {\n  return {\n    type: CHANGE_LOCALE,\n    payload: { value }\n  };\n}\n\nexport function changeCurrency(value) {\n  return {\n    type: CHANGE_CURRENCY,\n    payload: { value }\n  };\n}\n\nexport function setStoreSettings(settings) {\n  return {\n    type: SET_STORE_SETTINGS,\n    payload: { currency: settings.currencies[0], locale: settings.locales[0] }\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const LOGIN = 'LOGIN';\nexport const LOGIN_COMPLETE = 'LOGIN_COMPLETE';\nexport const LOGIN_FAILED = 'LOGIN_FAILED';\n\nexport const SET_PERSONA = 'SET_PERSONA';\n\nexport const LOGOUT = 'LOGOUT';\nexport const LOGOUT_COMPLETE = 'LOGOUT_COMPLETE';\nexport const LOGOUT_FAILED = 'LOGOUT_FAILED';\n\nexport const REGISTRATION_COMPLETE = 'REGISTRATION_COMPLETE';\nexport const SUBMIT_REGISTRATION = 'SUBMIT_REGISTRATION';\nexport const SUBMIT_REGISTRATION_COMPLETE = 'SUBMIT_REGISTRATION_COMPLETE';\nexport const SUBMIT_REGISTRATION_FAILED = 'SUBMIT_REGISTRATION_FAILED';\n\nexport const FETCH_ORDERS = 'FETCH_ORDERS';\nexport const FETCH_ORDERS_COMPLETE = 'FETCH_ORDERS_COMPLETE';\nexport const FETCH_ORDERS_FAILED = 'FETCH_ORDERS_FAILED';\n\nexport const FETCH_ORDER = 'FETCH_ORDER';\nexport const FETCH_ORDER_COMPLETE = 'FETCH_ORDER_COMPLETE';\nexport const FETCH_ORDER_FAILED = 'FETCH_ORDER_FAILED';\n\nexport const UNAUTHORIZED = 'UNAUTHORIZED';\n\nexport const SET_LOGIN_REDIRECT = 'SET_LOGIN_REDIRECT';\nexport const RESET_LOGIN_REDIRECT = 'RESET_LOGIN_REDIRECT';\n\nexport const ADD_USER_ADDRESS = 'ADD_USER_ADDRESS';\nexport const ADD_USER_ADDRESS_COMPLETE = 'ADD_USER_ADDRESS_COMPLETE';\nexport const ADD_USER_ADDRESS_FAILED = 'ADD_USER_ADDRESS_FAILED';\n\nexport const EDIT_USER_ADDRESS = 'EDIT_USER_ADDRESS';\nexport const EDIT_USER_ADDRESS_COMPLETE = 'EDIT_USER_ADDRESS_COMPLETE';\nexport const EDIT_USER_ADDRESS_FAILED = 'EDIT_USER_ADDRESS_FAILED';\n\nexport const REMOVE_USER_ADDRESS = 'REMOVE_USER_ADDRESS';\nexport const REMOVE_USER_ADDRESS_COMPLETE = 'REMOVE_USER_ADDRESS_COMPLETE';\nexport const REMOVE_USER_ADDRESS_FAILED = 'REMOVE_USER_ADDRESS_FAILED';\n\nexport const SET_USER_ADDRESS_DEFAULTS = 'SET_USER_ADDRESS_DEFAULTS';\nexport const SET_USER_ADDRESS_DEFAULTS_COMPLETE = 'SET_USER_ADDRESS_DEFAULTS_COMPLETE';\nexport const SET_USER_ADDRESS_DEFAULTS_FAILED = 'SET_USER_ADDRESS_DEFAULTS_FAILED';\n\nexport function submitRegistration() {\n  return {\n    type: SUBMIT_REGISTRATION\n  };\n}\n\nexport function submitRegistrationComplete() {\n  return {\n    root: SUBMIT_REGISTRATION,\n    type: SUBMIT_REGISTRATION_COMPLETE\n  };\n}\n\nexport function submitRegistrationFailed(message) {\n  return {\n    root: SUBMIT_REGISTRATION,\n    type: SUBMIT_REGISTRATION_FAILED,\n    payload: message\n  };\n}\n\nexport function registrationComplete() {\n  return {\n    type: REGISTRATION_COMPLETE\n  };\n}\n\nexport function login(data, redirect) {\n  return {\n    type: LOGIN,\n    payload: { data, redirect }\n  };\n}\n\nexport function loginComplete(user) {\n  return {\n    root: LOGIN,\n    type: LOGIN_COMPLETE,\n    payload: user\n  };\n}\n\nexport const setPersona = (persona) => ({\n  type: SET_PERSONA,\n  payload: { persona }\n});\n\nexport function loginFailed(response) {\n  return {\n    root: LOGIN,\n    type: LOGIN_FAILED,\n    payload: response\n  };\n}\n\nexport function logout(redirect) {\n  return {\n    type: LOGOUT,\n    payload: { redirect }\n  };\n}\n\nexport function logoutComplete() {\n  return {\n    root: LOGOUT,\n    type: LOGOUT_COMPLETE\n  };\n}\n\nexport function logoutFailed() {\n  return {\n    root: LOGOUT,\n    type: LOGOUT_FAILED\n  };\n}\n\nexport function fetchOrders() {\n  return {\n    type: FETCH_ORDERS,\n    payload: null\n  };\n}\n\nexport function fetchOrdersComplete(response) {\n  return {\n    root: FETCH_ORDERS,\n    type: FETCH_ORDERS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchOrdersFailed(response) {\n  return {\n    root: FETCH_ORDERS,\n    type: FETCH_ORDERS_FAILED,\n    payload: response\n  };\n}\n\nexport function fetchOrder(id) {\n  return {\n    type: FETCH_ORDER,\n    payload: { id }\n  };\n}\n\nexport function fetchOrderComplete(response) {\n  return {\n    root: FETCH_ORDER,\n    type: FETCH_ORDER_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchOrderFailed(response) {\n  return {\n    root: FETCH_ORDER,\n    type: FETCH_ORDER_FAILED,\n    payload: response\n  };\n}\n\nexport function setLoginRedirect(url) {\n  return {\n    type: SET_LOGIN_REDIRECT,\n    payload: { url }\n  };\n}\n\nexport function resetLoginRedirect() {\n  return {\n    type: RESET_LOGIN_REDIRECT\n  };\n}\n\nexport function addAddress(address) {\n  return {\n    type: ADD_USER_ADDRESS,\n    payload: { address }\n  };\n}\n\nexport function addAddressComplete(response) {\n  return {\n    root: ADD_USER_ADDRESS,\n    type: ADD_USER_ADDRESS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function addAddressFailed(response) {\n  return {\n    root: ADD_USER_ADDRESS,\n    type: ADD_USER_ADDRESS_FAILED,\n    payload: response\n  };\n}\n\nexport function editAddress(address) {\n  return {\n    type: EDIT_USER_ADDRESS,\n    payload: { address }\n  };\n}\n\nexport function editAddressComplete(response) {\n  return {\n    root: EDIT_USER_ADDRESS,\n    type: EDIT_USER_ADDRESS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function editAddressFailed(response) {\n  return {\n    root: EDIT_USER_ADDRESS,\n    type: EDIT_USER_ADDRESS_FAILED,\n    payload: response\n  };\n}\n\nexport function removeAddress(id) {\n  return {\n    type: REMOVE_USER_ADDRESS,\n    payload: { id }\n  };\n}\n\nexport function removeAddressComplete(response) {\n  return {\n    root: REMOVE_USER_ADDRESS,\n    type: REMOVE_USER_ADDRESS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function removeAddressFailed(response) {\n  return {\n    root: REMOVE_USER_ADDRESS,\n    type: REMOVE_USER_ADDRESS_FAILED,\n    payload: response\n  };\n}\n\nexport function setAddressDefaults(address) {\n  return {\n    type: SET_USER_ADDRESS_DEFAULTS,\n    payload: { address }\n  };\n}\n\nexport function setAddressDefaultsComplete(response) {\n  return {\n    root: SET_USER_ADDRESS_DEFAULTS,\n    type: SET_USER_ADDRESS_DEFAULTS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function setAddressDefaultsFailed(response) {\n  return {\n    root: SET_USER_ADDRESS_DEFAULTS,\n    type: SET_USER_ADDRESS_DEFAULTS_FAILED,\n    payload: response\n  };\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const Currencies = {\n  USD: '$',\n  EUR: '€'\n};\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { Currencies } from './constants';\n\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.substring(1).toLowerCase();\n}\n\nexport function money(amount, currency) {\n  return amount == null ? '' : `${Currencies[currency] || currency || ''}${parseFloat(amount).toFixed(2)}`;\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { memo, useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nfunction ScrollReset(props) {\n  useEffect(\n    () => {\n      window.scrollTo(0, 0);\n    },\n    [props.location.pathname]\n  );\n  return props.children;\n}\n\nexport default memo(withRouter(ScrollReset));\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\n\nfunction MainWrapper(props) {\n  const { theme, children } = props;\n\n  const wrapperClass = classNames({\n    'wrapper': true,\n    'squared-corner-theme': theme.squaredCorners,\n    'blocks-with-shadow-theme': theme.withBoxShadow,\n    'top-navigation': theme.topNavigation,\n  });\n\n  return (\n    <div className={theme.className}>\n      <div className={wrapperClass}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default connect(state => ({\n  theme: state.theme,\n  customizer: state.customizer,\n}))(MainWrapper);\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Anchor(props) {\n\n  const { href, autoTarget } = props;\n\n  // eslint-disable-next-line\n  const isExternal = !!['http:', 'https:', 'javascript:'].find((protocol) => href.includes(protocol));\n  const Component = isExternal ? 'a' : Link;\n\n  const resultProps = {\n    ...(\n      isExternal\n        ? { href: href }\n        : { to: href }\n    ),\n    ...(\n      autoTarget && isExternal\n        ? { target: \"_blank\" }\n        : {}\n    ),\n    ...props\n  };\n\n  !isExternal && delete resultProps.href;\n  delete resultProps.autoTarget;\n\n  return (\n    <Component {...resultProps}>\n      {props.children}\n    </Component>\n  );\n\n}\n\nAnchor.defaultProps = {\n  // eslint-disable-next-line\n  href: 'javascript:',\n  autoTarget: true\n};\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useContext, useState } from 'react';\nimport {\n  Col,\n  Container,\n  Popover,\n  PopoverBody,\n  Row,\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem\n} from 'reactstrap';\nimport Anchor from '../shared/Anchor';\nimport { __RouterContext, Link } from 'react-router-dom';\nimport SearchIcon from 'mdi-react/SearchIcon';\nimport PersonCircleOutlineIcon from 'mdi-react/PersonCircleOutlineIcon';\nimport ShoppingCartIcon from 'mdi-react/ShoppingCartIcon';\nimport { useDispatch, useSelector } from 'react-redux';\nimport hamburger  from '../../img/burger.svg';\nimport Flag from 'react-world-flags';\nimport { changeCurrency, changeLocale } from '../../redux/actions/productsActions';\n\nconst FlagCodeMap = {\n  de: 'de',\n  en: 'us',\n  en_us: 'us'\n};\n\nexport default function Header() {\n\n  const dispatch = useDispatch();\n  const { store: {\n    name,\n    locales,\n    currencies\n  } } = useSelector(state => state.content);\n  const {\n    query: { locale, currency }\n  } = useSelector(state => state.products);\n  const [localesOpen, setLocalesOpen] = useState(false);\n  const [currenciesOpen, setCurrenciesOpen] = useState(false);\n\n  const { history } = useContext(__RouterContext);\n  const { content, users, products } = useSelector(state => state);\n  const { query } = products;\n  const [searchOpen, setSearchOpen] = useState(false);\n  const [keywords, setKeywords] = useState(query.keywords || '');\n\n  const\n    {\n      logo_s,\n      logo_alt_t,\n      logo_url_s\n    } = content.header,\n    { user } = users,\n    nav = content.nav;\n\n  return (\n    <div className=\"landing__menu\">\n      <Container>\n        <Row>\n          <Col md={12}>\n            <div className=\"landing__menu-wrap\">\n              <Anchor className=\"landing__menu-logo\" href={logo_url_s}>\n                <img src={logo_s} alt={logo_alt_t}/> <span className=\"landing__store-name\">{name}</span>\n              </Anchor>\n              <button\n                type=\"button\"\n                className=\"landing__menu-deployer\"\n                onClick={() => {\n                  const nav = document.querySelector('.landing__menu-nav');\n                  if (nav.classList.contains('open')) {\n                    nav.classList.remove('open');\n                  } else {\n                    nav.classList.add('open');\n                  }\n                }}\n              >\n                <img src={hamburger} alt=\"Open Menu\"/>\n              </button>\n              <nav className=\"landing__menu-nav\">\n                {\n                  nav.map((item, index) =>\n                    <Anchor\n                      key={index}\n                      className=\"landing__menu-nav__item\"\n                      href={item.url}\n                    >\n                      {item.label}\n                    </Anchor>\n                  )\n                }\n                <Link\n                  to=\"/cart\"\n                  className=\"landing__menu-nav__item\"\n                  onClick={() => void null}\n                >\n                  <ShoppingCartIcon/>\n                </Link>\n                <button\n                  id=\"headerSearchButton\"\n                  className=\"landing__menu-nav__item\"\n                  onClick={() => {\n                    setSearchOpen(true);\n                    setTimeout(() => {\n                      try {\n                        document.getElementById('globalSearchInput').focus()\n                      } catch(e) {\n\n                      }\n                    })\n                  }}\n                >\n                  <SearchIcon/>\n                </button>\n                {\n                  (user == null)\n                    ? (\n                      <Link className=\"landing__btn\" to=\"/login\">\n                        Sign In\n                      </Link>\n                    ) : (\n                      <Link className=\"landing__menu-nav__item\" to=\"/account\">\n                        <PersonCircleOutlineIcon/>\n                      </Link>\n                    )\n                }\n                <Dropdown className=\"landing__header-locale-dropdown\" isOpen={localesOpen} toggle={() => setLocalesOpen(!localesOpen)}>\n                  <DropdownToggle caret>\n                    {FlagCodeMap[locale] ? <Flag code={FlagCodeMap[locale]}/> : locale}\n                  </DropdownToggle>\n                  <DropdownMenu>\n                    {\n                      (locales || []).map((code) => (\n                        <DropdownItem key={code} onClick={() => dispatch(changeLocale(code))}>\n                          {FlagCodeMap[code] ? <Flag code={FlagCodeMap[code]}/> : code}\n                        </DropdownItem>\n                      ))\n                    }\n                  </DropdownMenu>\n                </Dropdown>\n                <Dropdown className=\"landing__header-currency-dropdown\" isOpen={currenciesOpen} toggle={() => setCurrenciesOpen(!currenciesOpen)}>\n                  <DropdownToggle caret>\n                    {currency}\n                  </DropdownToggle>\n                  <DropdownMenu>\n                    {\n                      (currencies || []).map((code) => (\n                        <DropdownItem key={code} onClick={() => dispatch(changeCurrency(code))}>{code}</DropdownItem>\n                      ))\n                    }\n                  </DropdownMenu>\n                </Dropdown>\n              </nav>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n      <Popover\n        placement=\"bottom\"\n        target=\"headerSearchButton\"\n        isOpen={searchOpen}\n        toggle={() => setSearchOpen(false)}\n      >\n        <PopoverBody className=\"theme-light\">\n          <div className=\"form\">\n            <div className=\"form__form-group-field\">\n              <div className=\"form__form-group-icon\">\n                <SearchIcon/>\n              </div>\n              <input\n                id=\"globalSearchInput\"\n                type=\"text\"\n                name=\"keywords\"\n                value={keywords}\n                onChange={(e) => setKeywords(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && history.push(`/search?q=${e.target.value}`)}\n                placeholder=\"Search...\"\n              />\n            </div>\n          </div>\n        </PopoverBody>\n      </Popover>\n    </div>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useState } from 'react';\nimport { Col, Row, Container, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport Anchor from \"../shared/Anchor\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport Flag from 'react-world-flags';\nimport { changeCurrency, changeLocale } from '../../redux/actions/productsActions';\n\nconst FlagCodeMap = {\n  de: 'de',\n  en: 'us',\n  en_us: 'us'\n};\n\nfunction Footer(props){\n\n  const dispatch = useDispatch();\n\n  const { footer, store } = useSelector(state => state.content);\n\n  const {\n    logo_s,\n    logo_alt_t,\n    logo_url_s,\n    section_background_image_s\n  } = footer;\n\n  const {\n    name,\n    locales,\n    currencies\n  } = store;\n\n  const {\n    query: { locale, currency }\n  } = useSelector(state => state.products);\n\n  const [localesOpen, setLocalesOpen] = useState(false);\n\n  const [currenciesOpen, setCurrenciesOpen] = useState(false);\n\n  return (\n    <footer className=\"landing__footer\">\n      {\n        section_background_image_s &&\n        <img className=\"landing__footer-background\" src={section_background_image_s} alt=\"\" />\n      }\n      <Container>\n        <Row>\n          <Col md={12}>\n            <Dropdown className=\"landing__footer-locale-dropdown\" direction=\"up\" isOpen={localesOpen} toggle={() => setLocalesOpen(!localesOpen)}>\n              <DropdownToggle caret>\n                {FlagCodeMap[locale] ? <Flag code={FlagCodeMap[locale]}/> : locale}\n              </DropdownToggle>\n              <DropdownMenu>\n                {\n                  (locales || []).map((code) => (\n                    <DropdownItem key={code} onClick={() => dispatch(changeLocale(code))}>\n                      {FlagCodeMap[code] ? <Flag code={FlagCodeMap[code]}/> : code}\n                    </DropdownItem>\n                  ))\n                }\n              </DropdownMenu>\n            </Dropdown>\n            <Dropdown className=\"landing__footer-currency-dropdown\" direction=\"up\" isOpen={currenciesOpen} toggle={() => setCurrenciesOpen(!currenciesOpen)}>\n              <DropdownToggle caret>\n                {currency}\n              </DropdownToggle>\n              <DropdownMenu>\n                {\n                  (currencies || []).map((code) => (\n                    <DropdownItem key={code} onClick={() => dispatch(changeCurrency(code))}>{code}</DropdownItem>\n                  ))\n                }\n              </DropdownMenu>\n            </Dropdown>\n          </Col>\n          <Col md={12}>\n            <p>Powered By</p>\n            <Anchor href={logo_url_s}>\n              <img className=\"landing__footer-logo\" src={logo_s} alt={logo_alt_t}/>\n            </Anchor>\n          </Col>\n          <Col md={12}>\n            © {name} {new Date().getFullYear()}\n          </Col>\n        </Row>\n      </Container>\n    </footer>\n  );\n\n\n\n}\n\nexport default Footer;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { PureComponent } from 'react';\nimport { Alert as AlertReactstrap } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport InformationOutlineIcon from 'mdi-react/InformationOutlineIcon';\nimport ThumbUpOutlineIcon from 'mdi-react/ThumbUpOutlineIcon';\nimport CommentAlertOutlineIcon from 'mdi-react/CommentAlertOutlineIcon';\nimport CloseCircleOutlineIcon from 'mdi-react/CloseCircleOutlineIcon';\n\nclass Alert extends PureComponent {\n  static propTypes = {\n    color: PropTypes.string,\n    icon: PropTypes.bool,\n    className: PropTypes.string,\n    children: PropTypes.element.isRequired,\n  };\n\n  static defaultProps = {\n    color: '',\n    icon: false,\n    className: '',\n    dismiss: true,\n    onDismiss: () => void null\n  };\n\n  constructor() {\n    super();\n\n    this.state = {\n      visible: true,\n    };\n  }\n\n  onShow = () => {\n    this.setState({ visible: true });\n  };\n\n  onDismiss = () => {\n    this.setState({ visible: false });\n    this.props.onDismiss()\n  };\n\n  render() {\n    const { visible } = this.state;\n\n    const {\n      color,\n      className,\n      icon,\n      children,\n      dismiss\n    } = this.props;\n    let Icon;\n\n    switch (color) {\n      case 'info':\n        Icon = <InformationOutlineIcon />;\n        break;\n      case 'success':\n        Icon = <ThumbUpOutlineIcon />;\n        break;\n      case 'warning':\n        Icon = <CommentAlertOutlineIcon />;\n        break;\n      case 'danger':\n        Icon = <CloseCircleOutlineIcon />;\n        break;\n      default:\n        break;\n    }\n\n    if (visible) {\n      return (\n        <AlertReactstrap color={color} className={className} isOpen={visible}>\n          {icon && <div className=\"alert__icon\">{Icon}</div>}\n          {dismiss && <button className=\"close\" type=\"button\" onClick={this.onDismiss}><span className=\"lnr lnr-cross\" /></button>}\n          <div className=\"alert__content\">\n            {children}\n          </div>\n        </AlertReactstrap>\n      );\n    }\n\n    return null;\n\n  }\n}\n\nexport default Alert;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport {\n  ADD_TO_CART,\n  FETCH_CART,\n  fetchCart,\n  REMOVE_FROM_CART,\n  UPDATE_CART,\n  UPDATE_CART_ITEM_QUANTITY\n} from '../redux/actions/productsActions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useEffect, useRef } from 'react';\nimport { fetchOrder, setLoginRedirect } from '../redux/actions/usersActions';\nimport { SearchService } from '@craftercms/search';\nimport Cookie from 'js-cookie';\n\nexport function getLoginFormDefaults() {\n  const email = localStorage.getItem(`${process.env.REACT_APP_STORE_KEY}.email`);\n  return {\n    email: email || '',\n    rememberMe: email != null\n  };\n}\n\nexport function useHeader() {\n  return useSelector(state => state.content.header);\n}\n\nexport function useCart({ onEmpty } = {}) {\n  const ref = useRef({});\n  ref.current = { onEmpty };\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.products.cart);\n  const locale = useSelector(state => state.products).query.locale;\n  const currency = useSelector(state => state.products).query.currency;\n  useEffect(\n    () => {\n      if (cart && cart.items.length === 0) {\n        if(ref.current.onEmpty) {\n          ref.current.onEmpty();\n        }\n      }\n    },\n    [cart]\n  );\n  useEffect(() => {\n    dispatch(fetchCart());\n  }, [dispatch, locale, currency])\n  return cart;\n}\n\nexport function useUser({ redirect, onMissing } = {}) {\n  const ref = useRef({});\n  ref.current = { redirect, onMissing };\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.users.user);\n  useEffect(\n    () => {\n      if (user == null) {\n        if (ref.current.redirect) {\n          dispatch(setLoginRedirect(ref.current.redirect));\n        }\n        if(ref.current.onMissing) {\n          ref.current.onMissing();\n        }\n      }\n    },\n    [dispatch, user]\n  );\n  return user;\n}\n\nexport function useUserBranch() {\n  return useSelector(state => state.users);\n}\n\nexport function useOrder(id) {\n  const dispatch = useDispatch();\n  const order = useSelector(state => state.users.orders[id]);\n  useEffect(\n    () => {\n      if (id && (order == null || order.items == null))\n        dispatch(fetchOrder(id));\n    },\n    [dispatch, id, order]\n  );\n  return order;\n}\n\nexport function useProductsBranch() {\n  return useSelector(state => state.products);\n}\n\nexport function useContentBranch() {\n  return useSelector(state => state.content);\n}\n\nlet iceRepaintTimeout;\nfunction ICERepaint() {\n  clearTimeout(iceRepaintTimeout);\n  iceRepaintTimeout = setTimeout(\n    () => {\n      window.amplify &&\n      window.amplify.publish('INIT_ICE_REGIONS');\n    },\n    100\n  );\n}\n\nexport function useICE({ modelId, label }) {\n  const { isAuthoring } = useSelector(state => state.theme);\n  useEffect(() => ICERepaint, []);\n  useEffect(\n    () => {\n      isAuthoring && ICERepaint();\n    }\n  );\n  return {\n    props: isAuthoring ? {\n      'data-studio-ice': '',\n      'data-studio-ice-path': modelId,\n      'data-studio-ice-label': label\n    } : {}\n  };\n}\n\nexport function useCartUpdateInFlight() {\n  const { loading } = useSelector(state => state.products);\n  return (\n    loading[FETCH_CART] ||\n    loading[UPDATE_CART] ||\n    loading[ADD_TO_CART] ||\n    loading[REMOVE_FROM_CART] ||\n    loading[UPDATE_CART_ITEM_QUANTITY]\n  );\n}\n\nexport function useICESetup() {\n\n}\n\nexport function setupICE() {\n\n}\n\nexport const crafterConf = {\n  baseUrl: process.env.REACT_APP_CRAFTER_BASE,\n  // By default empty on the .env so preview grabs the crafterSite cookie set by authoring\n  // Dev may use it's .env.local for local development or fix the value.\n  site: process.env.REACT_APP_SITE_ID || Cookie.get('crafterSite')\n};\n\nexport function getQuery(query) {\n  const crafterQuery = SearchService.createQuery('elasticsearch');\n  crafterQuery.query = {\n    query: {\n      bool: {\n        filter: [\n          { multi_match: { query, 'type': 'phrase_prefix' } },\n          { match: { 'content-type': '/component/post' } }\n        ]\n      }\n    }\n  };\n  return crafterQuery;\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect } from 'react';\nimport Spinner from './Spinner';\nimport Alert from './Alert';\nimport { Col, Container, Row } from 'reactstrap';\nimport { useDispatch } from 'react-redux';\nimport { FETCH_GRAPH, fetchGraph } from '../../redux/actions/contentActions';\nimport { useContentBranch } from '../../util/component';\nimport { byIdLoadingKey } from '../../util/redux';\n\nexport function AssertContent(props) {\n\n  const {\n    render,\n    children,\n    variables,\n    requirements\n  } = props;\n\n  const content = useContentBranch();\n  const dispatch = useDispatch();\n\n  const reqs = {};\n  const required = [];\n  const optional = [];\n\n  requirements.forEach((req) => {\n\n    const isDescriptor = typeof req === 'object';\n\n    const name = isDescriptor ? req.name : req;\n    const checker = isDescriptor && req.getter ? req.getter : (content) => content[req];\n    const isOptional = isDescriptor && req.optional;\n    const value = checker(content);\n\n    if (value == null) {\n      (isOptional ? optional : required).push(name);\n    }\n\n    reqs[name] = value;\n\n  });\n\n  useEffect(\n    () => {\n      const toBeFetched = [...required, ...optional].filter(\n        (req) => content.loading[byIdLoadingKey(FETCH_GRAPH, req)] !== true\n      );\n      if (toBeFetched.length) {\n        const vars = [];\n        toBeFetched.forEach((req) =>\n          variables &&\n          variables[req] &&\n          variables[req].forEach((r) => vars.push(r))\n        );\n        dispatch(fetchGraph(\n          toBeFetched,\n          vars\n        ));\n      }\n    }\n  );\n\n  if (content.errors[FETCH_GRAPH]) {\n    try {\n      content.errors[FETCH_GRAPH].forEach((error) => {\n        console.error(error.message);\n      });\n    } catch (e) {\n\n    }\n    return (\n      <aside className=\"landing__section\">\n        <Container>\n          <Row>\n            <Col sm={12} style={{ padding: '50px' }}>\n              <Alert color=\"danger\" className=\"alert--neutral\" icon dismiss={false}>\n                <p>An error occurred fetching site content.</p>\n              </Alert>\n            </Col>\n          </Row>\n        </Container>\n      </aside>\n    );\n  }\n\n  if (required.length > 0) {\n    return <Spinner/>;\n  } else {\n    return (render)\n      ? render(reqs)\n      : React.Children.map(children, (child) => {\n        return React.cloneElement(child, reqs)\n      });\n  }\n\n}\n\nexport default AssertContent;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport Header from './Header';\nimport Footer from './Footer';\nimport AssertContent from '../shared/AssertContent';\n\nexport function Layout({ children, className, requirements = [], variables, render }) {\n  return <AssertContent\n    requirements={['nav', 'header', 'footer', 'store', ...requirements]}\n    variables={variables}\n    render={(reqs) => (\n      <div className={`landing ${className}`}>\n        <Header/>\n        <div className=\"landing__content-wrapper\">\n          {render ? render(reqs) : children}\n        </div>\n        <Footer/>\n      </div>\n    )}/>;\n}\n\nLayout.defaultProps = {\n  className: ''\n};\n\nexport default Layout;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable jsx-a11y/label-has-for */\nimport React, { PureComponent } from 'react';\nimport CheckIcon from 'mdi-react/CheckIcon';\nimport CloseIcon from 'mdi-react/CloseIcon';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nexport function CheckBox(props) {\n\n  const {\n    disabled,\n    className,\n    name,\n    value,\n    onChange,\n    label,\n    color,\n    checked\n  } = props;\n\n  const CheckboxClass = classNames({\n    'checkbox-btn': true,\n    disabled,\n  });\n\n  return (\n    <label\n      className={`${CheckboxClass} ${className ? ` checkbox-btn--${className}` : ''}`}\n      htmlFor={`${name}[${value}]`}\n    >\n      <input\n        className=\"checkbox-btn__checkbox\"\n        type=\"checkbox\"\n        id={`${name}[${value}]`}\n        name={name}\n        onChange={onChange}\n        checked={checked}\n        disabled={disabled}\n        value={value}\n      />\n      <span\n        className=\"checkbox-btn__checkbox-custom\"\n        style={color ? { background: color, borderColor: color } : {}}\n      >\n        <CheckIcon/>\n      </span>\n      {\n        className === 'button'\n          ? (\n            <span className=\"checkbox-btn__label-svg\">\n              <CheckIcon className=\"checkbox-btn__label-check\"/>\n              <CloseIcon className=\"checkbox-btn__label-uncheck\"/>\n            </span>\n          )\n          : (\n            ''\n          )\n      }\n      <span className=\"checkbox-btn__label\">\n        {label}\n      </span>\n    </label>\n  );\n}\n\nclass CheckBoxField extends PureComponent {\n  static propTypes = {\n    onChange: PropTypes.func.isRequired,\n    name: PropTypes.string.isRequired,\n    value: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.bool,\n    ]).isRequired,\n    label: PropTypes.string,\n    defaultChecked: PropTypes.bool,\n    disabled: PropTypes.bool,\n    className: PropTypes.string,\n    color: PropTypes.string,\n  };\n\n  static defaultProps = {\n    label: '',\n    defaultChecked: false,\n    disabled: false,\n    className: '',\n    color: '',\n  };\n\n  componentDidMount() {\n    const { onChange, defaultChecked } = this.props;\n    onChange(defaultChecked);\n  }\n\n  render() {\n    const {\n      disabled, className, name, value, onChange, label, color,\n    } = this.props;\n    const CheckboxClass = classNames({\n      'checkbox-btn': true,\n      disabled,\n    });\n\n    return (\n      <label\n        className={`${CheckboxClass} ${className ? ` checkbox-btn--${className}` : ''}`}\n        htmlFor={name}\n      >\n        <input\n          className=\"checkbox-btn__checkbox\"\n          type=\"checkbox\"\n          id={name}\n          name={name}\n          onChange={onChange}\n          checked={value}\n          disabled={disabled}\n        />\n        <span\n          className=\"checkbox-btn__checkbox-custom\"\n          style={color ? { background: color, borderColor: color } : {}}\n        >\n          <CheckIcon/>\n        </span>\n        {\n          className === 'button'\n            ? (\n              <span className=\"checkbox-btn__label-svg\">\n                <CheckIcon className=\"checkbox-btn__label-check\"/>\n                <CloseIcon className=\"checkbox-btn__label-uncheck\"/>\n              </span>\n            )\n            : (\n              ''\n            )\n        }\n        <span className=\"checkbox-btn__label\">\n          {label}\n        </span>\n      </label>\n    );\n  }\n}\n\nconst renderCheckBoxField = (props) => {\n  const {\n    input, label, defaultChecked, disabled, className, color,\n  } = props;\n  return (\n    <CheckBoxField\n      {...input}\n      label={label}\n      defaultChecked={\n        props.meta.initial != null\n          ? props.meta.initial\n          : defaultChecked\n      }\n      disabled={disabled}\n      className={className}\n      color={color}\n    />\n  );\n};\n\nrenderCheckBoxField.propTypes = {\n  input: PropTypes.shape({\n    onChange: PropTypes.func,\n    name: PropTypes.string,\n    value: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.bool,\n    ]),\n  }).isRequired,\n  label: PropTypes.string,\n  defaultChecked: PropTypes.bool,\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  color: PropTypes.string,\n};\n\nrenderCheckBoxField.defaultProps = {\n  label: '',\n  defaultChecked: false,\n  disabled: false,\n  className: '',\n  color: '',\n};\n\nexport default renderCheckBoxField;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable jsx-a11y/label-has-for */\nimport React, { PureComponent } from 'react';\nimport CheckIcon from 'mdi-react/CheckIcon';\nimport CloseIcon from 'mdi-react/CloseIcon';\nimport * as PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nexport function RadioButton(props) {\n  const {\n    name,\n    label,\n    value,\n    disabled,\n    onChange,\n    className,\n    currentValue\n  } = props;\n  const classes = classNames({\n    disabled,\n    'radio-btn': true,\n    [`radio-btn--${className}`]: !!className\n  });\n  return (\n    <label className={classes}>\n      <input\n        type=\"radio\"\n        name={name}\n        value={value}\n        onChange={onChange}\n        disabled={disabled}\n        checked={value === currentValue}\n        className=\"radio-btn__radio\"\n      />\n      <span className=\"radio-btn__radio-custom\"/>\n      {className === 'button' ? (\n        <span className=\"radio-btn__label-svg\">\n          <CheckIcon className=\"radio-btn__label-check\"/>\n          <CloseIcon className=\"radio-btn__label-uncheck\"/>\n        </span>\n      ) : ''}\n      <span className=\"radio-btn__label\">{label}</span>\n    </label>\n  );\n}\n\nexport class RadioButtonField extends PureComponent {\n  static propTypes = {\n    onChange: PropTypes.func.isRequired,\n    name: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired,\n    label: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),\n    defaultChecked: PropTypes.bool,\n    radioValue: PropTypes.string,\n    disabled: PropTypes.bool,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    label: '',\n    defaultChecked: false,\n    radioValue: '',\n    disabled: false,\n    className: '',\n  };\n\n  componentDidMount() {\n    const { defaultChecked, onChange, radioValue } = this.props;\n    if (defaultChecked) {\n      onChange(radioValue);\n    }\n  }\n\n  onChange = () => {\n    const { onChange, radioValue } = this.props;\n    onChange(radioValue);\n  };\n\n  render() {\n    const {\n      disabled, className, name, label, radioValue, value,\n    } = this.props;\n    const RadioButtonClass = classNames({\n      'radio-btn': true,\n      disabled,\n    });\n\n    return (\n      <label\n        className={`${RadioButtonClass}${className ? ` radio-btn--${className}` : ''}`}\n      >\n        <input\n          className=\"radio-btn__radio\"\n          name={name}\n          type=\"radio\"\n          onChange={this.onChange}\n          checked={value === radioValue}\n          disabled={disabled}\n        />\n        <span className=\"radio-btn__radio-custom\"/>\n        {className === 'button'\n          ? (\n            <span className=\"radio-btn__label-svg\">\n              <CheckIcon className=\"radio-btn__label-check\"/>\n              <CloseIcon className=\"radio-btn__label-uncheck\"/>\n            </span>\n          ) : ''}\n        <span className=\"radio-btn__label\">{label}</span>\n      </label>\n    );\n  }\n}\n\nconst renderRadioButtonField = (props) => {\n  const {\n    input, label, defaultChecked, disabled, className, radioValue,\n  } = props;\n  return (\n    <RadioButtonField\n      {...input}\n      label={label}\n      defaultChecked={defaultChecked}\n      disabled={disabled}\n      radioValue={radioValue}\n      className={className}\n    />\n  );\n};\n\nrenderRadioButtonField.propTypes = {\n  input: PropTypes.shape({\n    onChange: PropTypes.func,\n    name: PropTypes.string,\n  }).isRequired,\n  label: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),\n  defaultChecked: PropTypes.bool,\n  disabled: PropTypes.bool,\n  radioValue: PropTypes.string,\n  className: PropTypes.string,\n};\n\nrenderRadioButtonField.defaultProps = {\n  label: '',\n  defaultChecked: false,\n  disabled: false,\n  radioValue: '',\n  className: '',\n};\n\nexport default renderRadioButtonField;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable prefer-destructuring */\nimport 'rc-slider/assets/index.css';\nimport React, { PureComponent } from 'react';\nimport Slider from 'rc-slider';\nimport PropTypes from 'prop-types';\n\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\nconst Range = createSliderWithTooltip(Slider.Range);\n\nexport default class RangeTheme extends PureComponent {\n  static propTypes = {\n    marks: PropTypes.shape(),\n    value: PropTypes.arrayOf(PropTypes.number).isRequired,\n    min: PropTypes.number.isRequired,\n    max: PropTypes.number.isRequired,\n    tipFormatter: PropTypes.func,\n  };\n\n  static defaultProps = {\n    marks: {},\n    tipFormatter: value => value,\n    tipOptions: {visible: true}\n  };\n\n  render() {\n    const {\n      min,\n      max,\n      marks,\n      value,\n      tipFormatter,\n      tipOptions,\n      onChange,\n      onAfterChange\n    } = this.props;\n\n    return (\n      <div className=\"slider\">\n        <div className=\"slider__min\">\n          <p>{tipFormatter ? tipFormatter(min) : min}</p>\n        </div>\n        <div className=\"slider__max\">\n          <p>{tipFormatter ? tipFormatter(max) : max}</p>\n        </div>\n        <Range\n          min={min}\n          max={max}\n          defaultValue={value}\n          tipFormatter={tipFormatter}\n          marks={marks}\n          tipProps={tipOptions}\n          onAfterChange={onAfterChange}\n          onChange={onChange}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { Fragment } from 'react';\nimport { CheckBox } from '../shared/form/CheckBox';\nimport renderRadioButtonField from '../shared/form/RadioButton';\nimport Range from '../shared/range_slider/Range';\n\nconst SAMPLE = [\n  { label: 'Dresses', value: 'dresses' },\n  {\n    label: 'Cardigans & Sweaters',\n    value: 'cardigans_n_sweaters',\n    children: [\n      { label: 'Sweaters', value: 'sweaters' },\n      { label: 'Cardigans', value: 'cardigans' },\n      { label: 'Sweatshirts', value: 'sweatshirts' }\n    ]\n  },\n  { label: 'Jumpsuits', value: 'jumpsuits' },\n  { label: 'T-shirts', value: 't-shirts' },\n  { label: 'Jackets', value: 'jackets' }\n];\n\nexport function HierarchicalFacets(props) {\n  const {\n    title,\n    facets,\n    checked,\n    onSelection\n  } = props;\n  return (\n    <nav className=\"hierarchical-facets\">\n      {title && <h2 className=\"facet-list-title\">Clothing</h2>}\n      {\n        facets.map((facet) =>\n          <Fragment key={facet.value}>\n            <button\n              className={`hierarchical-facets__item ${checked[facet.value] ? 'hierarchical-facets__item--checked' : ''}`}\n              onClick={() => onSelection(facet)}\n            >{facet.label}</button>\n            {\n              facet.children &&\n              facet.children.length &&\n              checked[facet.value] &&\n              <HierarchicalFacets\n                {...props}\n                title={null}\n                facets={facet.children}\n              />\n            }\n          </Fragment>\n        )\n      }\n    </nav>\n  )\n}\n\nexport function MultipleSelectionFacet(props) {\n  const {\n    title,\n    facets,\n    checked,\n    onSelection\n  } = props;\n  return (\n    <nav className=\"multiple-selection-facets\">\n      {title && <h2 className=\"facet-list-title\">{title}</h2>}\n      <div className=\"form__form-group\">\n        {\n          facets.map((facet) =>\n            <div key={facet.value} className=\"form__form-group-field\">\n              <CheckBox\n                name=\"categories\"\n                label={facet.label}\n                value={facet.value}\n                checked={checked.includes(facet.value)}\n                onChange={(e) => onSelection(e.target.checked, facet)}\n              />\n            </div>\n          )\n        }\n      </div>\n    </nav>\n  );\n}\n\nexport function SingleSelectionFacet(props) {\n  const {\n    title,\n    facets\n  } = props;\n  return (\n    <nav className=\"single-selection-facets\">\n      {title && <h2 className=\"facet-list-title\">{title}</h2>}\n      <div className=\"form__form-group\">\n        {\n          facets.map((facet) =>\n            <div key={facet.value} className=\"form__form-group-field\">\n              {\n                renderRadioButtonField({\n                  label: facet.label,\n                  radioValue: facet.value,\n                  input: {\n                    value: facets[0].value,\n                    name: 'singleGroupName',\n                    onChange: () => void null\n                  }\n                })\n              }\n            </div>\n          )\n        }\n      </div>\n    </nav>\n  );\n}\n\nexport function RangeFacet(props) {\n  const {\n    min,\n    max,\n    value,\n    title,\n    onChange,\n    tipFormatter\n  } = props;\n  return (\n    <nav className=\"range-selection-facet\">\n      <h2 className=\"facet-list-title\">{title}</h2>\n      <Range\n        min={min}\n        max={max}\n        value={value}\n        tipOptions={{ visible: false }}\n        onAfterChange={onChange}\n        tipFormatter={tipFormatter}\n      />\n    </nav>\n  )\n}\n\nSingleSelectionFacet.defaultProps =\n  MultipleSelectionFacet.defaultProps =\n    HierarchicalFacets.defaultProps = {\n      title: 'Clothing',\n      facets: SAMPLE,\n      checked: { cardigans_n_sweaters: true },\n      onSelection: (facet) => void null\n    };\n\n\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { money } from '../../util/string';\nimport Ratings from 'react-ratings-declarative';\n\nconst saleBadge = `${process.env.PUBLIC_URL}/img/for_store/catalog/sale_lable.png`;\nconst newBadge = `${process.env.PUBLIC_URL}/img/for_store/catalog/new_lable.png`;\n\nexport default function Product(props) {\n\n  let isNew, isSale;\n  const { product } = props;\n  const { id, name, variants, rating } = product || {};\n\n  const colors = variants\n    .filter(variant => variant.attributes.some(a => a.name === 'Color'))\n    .map((variant) =>\n      variant.attributes.find(a => a.name === 'Color').value.toLowerCase()\n    );\n\n  const price = variants[0].price;\n  const oldPrice = price * 2;\n\n  const img = variants[0].images[0];\n\n  const\n    widgetEmptyColors = '#ccc',\n    widgetHoverColors = '#FFCC00',\n    widgetRatedColors = '#FFCC00',\n    widgetDimensions = '20px',\n    widgetSpacings = '5px';\n\n  return (\n    <div className=\"catalog-item\">\n      <Link className=\"catalog-item__link\" to={`/catalog/${id}`}>\n\n        {isNew ? <img className=\"catalog-item__label\" src={newBadge} alt=\"new\"/> : ''}\n        {isSale ? <img className=\"catalog-item__label\" src={saleBadge} alt=\"sale\"/> : ''}\n\n        <div className=\"catalog-item__img-wrap\">\n          <img className=\"catalog-item__img\" src={img.url} alt={img.description}/>\n        </div>\n\n        <div className=\"catalog-item--rating-widget rating-widget\">\n          <section className=\"rating-widget__header\">\n            <div className=\"rating-widget__average\">\n              <div>\n                {\n                  (rating == null) ? 'No reviews yet.' : <>\n                    <Ratings\n                      rating={rating == null ? 0 : rating.average}\n                      widgetEmptyColors={widgetEmptyColors}\n                      widgetHoverColors={widgetHoverColors}\n                      widgetRatedColors={widgetRatedColors}\n                      widgetDimensions={widgetDimensions}\n                      widgetSpacings={widgetSpacings}\n                    >\n                      <Ratings.Widget/>\n                      <Ratings.Widget/>\n                      <Ratings.Widget/>\n                      <Ratings.Widget/>\n                      <Ratings.Widget/>\n                    </Ratings>\n                  </>\n                }\n              </div>\n            </div>\n          </section>\n        </div>\n\n        <div className=\"catalog-item__info\">\n          <h4 className=\"catalog-item__title\">{name}</h4>\n          <em className=\"catalog-item__price\">{money(price, variants[0].currency)}</em>\n          {isSale ? <p className=\"catalog-item__old-price\">${oldPrice}</p> : ''}\n          {\n            colors.map((color, index) => (\n              <span\n                key={index}\n                className=\"catalog-item__color\"\n                style={{ background: color }}\n              />\n            ))\n          }\n        </div>\n\n      </Link>\n    </div>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useRef } from 'react';\nimport { Button, Col, Container, Row } from 'reactstrap';\nimport Layout from './Layout';\nimport {\n  MultipleSelectionFacet,\n  RangeFacet, SingleSelectionFacet,\n} from './Facets';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Spinner from '../shared/Spinner';\nimport Product from './Product';\nimport * as qs from 'query-string';\nimport { fetchProducts, FETCH_PRODUCTS } from '../../redux/actions/productsActions';\nimport Alert from '../shared/Alert';\nimport { Link } from 'react-router-dom';\nimport SearchIcon from 'mdi-react/SearchIcon';\nimport ChevronRightIcon from 'mdi-react/ChevronRightIcon';\nimport ChevronLeftIcon from 'mdi-react/ChevronLeftIcon';\nimport ReactPaginate from 'react-paginate';\n\nexport default function ProductListing(props) {\n\n  const dispatch = useDispatch();\n  const { history } = props;\n  const { byId, facets, query, loading, errors } = useSelector(state => state.products);\n  const products = byId ? Object.values(byId) : null;\n  const inputRef = useRef();\n\n  const queryString = qs.parse(props.location.search);\n  const facetMeta = { list: [], types: {}, state: {} };\n\n  if (facets) {\n    facets.forEach(({ type, value }) => {\n      facetMeta.list.push(value);\n      facetMeta.types[value] = type;\n      switch (type) {\n        case 'multiple':\n          facetMeta.state[value] = [];\n          break;\n        case 'single':\n          facetMeta.state[value] = '';\n          break;\n        case 'range':\n          facetMeta.state[value] = null;\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  // Facets haven't loaded during the first render so can't rely\n  // on facet type to do the proper URL decoding. Relying on inspection\n  // for now.\n  Object.entries(queryString).forEach(([key, value]) => {\n    if (key === 'q') {\n      key = 'keywords';\n      facetMeta.state[key] = value;\n    } else if (key === 'offset' || key === 'limit') {\n      facetMeta.state[key] = value;\n    } else {\n      facetMeta.state[key] = (['rating', 'price'].includes(key))\n        ? (\n          value.split('-').reduce(\n            (obj, value, index) => ({\n              ...obj,\n              ...{ [index === 0 ? 'min' : 'max']: parseInt(value) }\n            }),\n            {}\n          )\n        ) : (\n          // This should catch both single and multiple all the same\n          facetMeta.state[key] = value.split(',')\n        );\n    }\n  });\n\n  const fetch = () => {\n    dispatch(fetchProducts(facetMeta.state));\n  };\n\n  useEffect(fetch, [history.location.search, query.locale, query.currency]);\n\n  useEffect(\n    () => {\n      (inputRef.current || { value: '' }).value = query.keywords;\n    },\n    [query.keywords]\n  );\n\n  function onRangeChange(which, value) {\n    const newQS = [];\n\n    queryString.q && newQS.push(`q=${queryString.q}`);\n    Object.entries(queryString).forEach(([key, val]) => key !== which && newQS.push(`${key}=${val}`));\n    newQS.push(`${which}=${value.join('-')}`);\n\n    history.push(`/catalog${newQS.length ? `?${newQS.join('&')}` : ''}`);\n\n  }\n\n  function onMultipleValueChange(which, checked, { value }) {\n\n    let collection = query[which] || [];\n    if (checked) {\n      collection = [...collection, value];\n    } else {\n      collection = collection.filter((_value) => _value !== value);\n    }\n\n    const newQS = [];\n\n    queryString.q && newQS.push(`q=${queryString.q}`);\n    Object.entries(queryString).forEach(([key, val]) => {\n      if (key === 'offset') {\n        newQS.push(`${key}=0`)\n      } else if (key !== which)\n        newQS.push(`${key}=${val}`)\n    });\n    (collection.length > 0) && newQS.push(`${which}=${collection.join(',')}`);\n\n    history.push(`/catalog${newQS.length ? `?${newQS.join('&')}` : ''}`);\n\n  }\n\n  function onKeywordsChange(value) {\n    const newQS = [];\n\n    newQS.push(`q=${value || ''}`);\n    queryString.price && newQS.push(`price=${queryString.price}`);\n    queryString.rating && newQS.push(`rating=${queryString.rating}`);\n    queryString.categories && newQS.push(`categories=${queryString.categories}`);\n    queryString.colors && newQS.push(`colors=${queryString.colors}`);\n\n    history.push(`/catalog${newQS.length ? `?${newQS.join('&')}` : ''}`);\n  }\n\n  function onOffsetChanged(nextPage) {\n    const newQS = [];\n    const nextPageIndex = nextPage - 1;\n\n    const nextOffset = query.limit * nextPageIndex;\n\n    (nextOffset != null) && newQS.push(`offset=${nextOffset}`);\n    queryString.q && newQS.push(`q=${queryString.q}`);\n    queryString.price && newQS.push(`price=${queryString.price}`);\n    queryString.rating && newQS.push(`rating=${queryString.rating}`);\n    queryString.categories && newQS.push(`categories=${queryString.categories}`);\n    queryString.colors && newQS.push(`colors=${queryString.colors}`);\n\n    history.push(`/catalog${newQS.length ? `?${newQS.join('&')}` : ''}`);\n  }\n\n  return (\n    <Layout>\n      <Container>\n        {\n          (errors[FETCH_PRODUCTS]) &&\n          <Alert color=\"danger\" className=\"alert--bordered\" icon dismiss={false}>\n            <span>\n              An error has occurred trying to fetch products.\n              <Button outline\n                      onClick={fetch}\n                      className=\"btn-retry btn-sm\"\n              >\n                Retry\n              </Button>\n            </span>\n          </Alert>\n        }\n        {\n          (loading[FETCH_PRODUCTS]) &&\n          <Spinner contained/>\n        }\n        {\n          (loading[FETCH_PRODUCTS] === false) &&\n          <>\n            <Row>\n              {\n                facetMeta.state.keywords &&\n                <Col md={12}>\n                  <h2 className=\"page-title\">Search results for \"{facetMeta.state.keywords}\"</h2>\n                  <Link className=\"page-subhead\" to=\"/catalog\">(clear query)</Link>\n                </Col>\n              }\n              <Col md={9}>\n                <div className=\"catalog-items__wrap\">\n                  <div className=\"catalog-page-controls\">\n                    <ReactPaginate\n                      containerClassName=\"pagination\"\n                      pageClassName=\"pagination__item\"\n                      pageLinkClassName=\"pagination__link\"\n                      previousClassName=\"pagination__item\"\n                      previousLinkClassName=\"pagination__link pagination__link--arrow\"\n                      nextClassName=\"pagination__item\"\n                      nextLinkClassName=\"pagination__link pagination__link--arrow\"\n                      pageRangeDisplayed={3}\n                      marginPagesDisplayed={3}\n                      activeClassName=\"active\"\n                      initialPage={(query.offset / query.limit)}\n                      pageCount={Math.ceil(query.total / query.limit)}\n                      onPageChange={({ selected: index }) => onOffsetChanged(index + 1)}\n                      disableInitialCallback={true}\n                      previousLabel={<ChevronLeftIcon className=\"pagination__link-icon\" />}\n                      nextLabel={<ChevronRightIcon className=\"pagination__link-icon\" />}\n                    />\n                  </div>\n                  <div className=\"catalog-items\">\n                    {products.map(product =>\n                      <Product key={product.id} product={product}/>\n                    )}\n                    {\n                      (products.length === 0) && (\n                        <Alert color=\"info\" className=\"alert--bordered\" icon dismiss={false}>\n                          <span>No products to display (\n                            <Link to=\"/catalog\">clear filters</Link>\n                          )</span>\n                        </Alert>\n                      )\n                    }\n                  </div>\n                </div>\n              </Col>\n              <Col md={3}>\n\n                <div className=\"form\" style={{ background: 'white', marginBottom: 20, border: '1px solid #ddd' }}>\n                  <div className=\"form__form-group-field\">\n                    <div className=\"form__form-group-icon\">\n                      <SearchIcon/>\n                    </div>\n                    <input\n                      ref={inputRef}\n                      type=\"text\"\n                      name=\"keywords\"\n                      placeholder=\"Keywords...\"\n                      defaultValue={query.keywords}\n                      onKeyPress={\n                        (e) =>\n                          e.key === 'Enter' &&\n                          onKeywordsChange(e.target.value)\n                      }\n                    />\n                  </div>\n                </div>\n\n                {\n                  facets && facets.map((facet) => {\n                    switch (facet.type) {\n                      case 'single':\n                      case 'multiple': {\n                        const Component = facet.type === 'multiple'\n                          ? MultipleSelectionFacet\n                          : SingleSelectionFacet;\n                        return <Component\n                          key={facet.value}\n                          title={facet.name}\n                          checked={facetMeta.state[facet.value]}\n                          onSelection={(checked, facetItem) => onMultipleValueChange(facet.value, checked, facetItem)}\n                          facets={\n                            facet.items.map((_facet_) => ({\n                              value: _facet_.value,\n                              label: _facet_.name\n                            }))\n                          }\n                        />;\n                      }\n                      case 'range': {\n                        return <RangeFacet\n                          onChange={(value) => onRangeChange(facet.value, value)}\n                          key={facet.value}\n                          title={facet.name}\n                          min={facet.min}\n                          max={facet.max}\n                          tipFormatter={facet.value === 'price' ? value => `$${value}` : value => value}\n                          value={\n                            facetMeta.state[facet.value]\n                              ? [facetMeta.state[facet.value].min, facetMeta.state[facet.value].max]\n                              : [facet.min, facet.max]\n                          }\n                        />;\n                      }\n                      default:\n                        return null;\n                    }\n                  })\n                }\n\n              </Col>\n            </Row>\n          </>\n        }\n      </Container>\n    </Layout>\n  );\n};\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable react/no-array-index-key */\nimport React, { useEffect, useReducer } from 'react';\nimport Carousel, { Modal, ModalGateway } from 'react-images';\n\nfunction ProductGallery(props) {\n\n  const [state, setState] = useReducer(\n    (a, b) => ({ ...a, ...b }),\n    {\n      image: null,\n      currentIndex: 0,\n      lightboxIsOpen: false,\n    }\n  );\n\n  const { images } = props;\n\n  const { image, currentIndex, lightboxIsOpen } = state;\n\n  const changeImg = (index, e) => {\n    e.preventDefault();\n    setState({\n      currentIndex: index,\n      image: images[index]\n    });\n  };\n\n  const openLightbox = (event) => {\n    event.preventDefault();\n    setState({ lightboxIsOpen: true });\n  };\n\n  useEffect(\n    () => {\n      const index = 0;\n      setState({\n        image: images[index],\n        currentIndex: index\n      });\n    },\n    [images]\n  );\n\n  return (\n    <div className=\"product-gallery\">\n      {\n        (images && images.length && image)\n          ? (\n            <>\n              <a\n                className=\"product-gallery__current-img\"\n                onClick={e => openLightbox(e)}\n                href={state.image.src}\n              >\n                <img src={state.image.src} className=\"product-img\" alt={\"\"}/>\n              </a>\n              <div className=\"product_gallery__gallery\">\n                {images.map((img, i) => (\n                  <button type=\"button\" key={i} onClick={e => changeImg(i, e)} className=\"product-gallery__img-preview\">\n                    <img src={img.src} alt=\"product-img\"/>\n                  </button>\n                ))}\n              </div>\n              <ModalGateway>\n                {lightboxIsOpen ? (\n                  <Modal onClose={() => setState({ lightboxIsOpen: false })}>\n                    <Carousel currentIndex={currentIndex} views={images}/>\n                  </Modal>\n                ) : null}\n              </ModalGateway>\n            </>\n          ) : (\n            <div className=\"text-center\">No images are available for this product.</div>\n          )\n      }\n    </div>\n  );\n\n}\n\nexport default ProductGallery;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useReducer, useState } from 'react';\nimport {\n  Card, CardBody, ButtonToolbar, Button, Modal,\n} from 'reactstrap';\nimport ProductGallery from './ProductGallery';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Select from 'react-select';\nimport {\n  addToCart,\n  fetchCart, fetchProduct,\n  removeFromCart,\n  updateCartItemQuantity\n} from '../../redux/actions/productsActions';\nimport { money } from '../../util/string';\nimport { Link } from 'react-router-dom';\nimport ShoppingCartIcon from 'mdi-react/ShoppingCartIcon';\nimport Ratings from 'react-ratings-declarative';\nimport Alert from '../shared/Alert';\nimport { useCartUpdateInFlight } from '../../util/component';\n\nconst isSale = false;\n\nconst reducer = (a, b) => ({ ...a, ...b });\n\nexport function useMergeState(initialState) {\n  return useReducer(reducer, initialState);\n}\n\nfunction ProductCard(props) {\n\n  const dispatch = useDispatch();\n\n  const { cart } = useSelector(state => state.products);\n  const { user } = useSelector(state => state.users);\n  const { product } = props;\n  const currency = product.variants[0].currency;\n\n  const [images, setImages] = useState([]);\n  const [variant, setVariant] = useState();\n  const [cartItem, setCartItem] = useMergeState({\n    id: null,\n    productId: product.id,\n    variantId: null,\n    quantity: 1\n  });\n\n  const isInCart = cartItem.id != null;\n  const updatesInFlight = useCartUpdateInFlight();\n\n  useEffect(\n    () => {\n      !cart && dispatch(fetchCart())\n    },\n    [dispatch, cart]\n  );\n\n  useEffect(\n    () => {\n      setVariant(product.variants[0]);\n    },\n    [product.id, currency, product.variants]\n  );\n\n  useEffect(\n    () => {\n      setImages(\n        (\n          variant != null\n            ? [variant]\n            : product.variants\n        ).reduce(\n          (images, iVariant) => images.concat(\n            iVariant.images.map((img) => ({ ...img, src: img.url }))\n          ),\n          []\n        )\n      );\n\n      if (variant == null)\n        return;\n\n      const item = (\n        cart\n          ? cart.items.find((item) => (\n            item.variantId === variant.id &&\n            item.productId === product.id\n          ))\n          : null\n      );\n\n      setCartItem({\n        variantId: variant.id,\n        productId: product.id,\n        ...(\n          item\n            ? { id: item.id, quantity: item.quantity }\n            : { id: null, quantity: 1 }\n        )\n      });\n\n    },\n    [variant, cart, product.id, product.variants, setCartItem]\n  );\n\n  return (\n    <Card>\n      <CardBody>\n        <div className=\"product-card\">\n          <ProductGallery images={images}/>\n          <div className=\"product-card__info\">\n            <h1 className=\"product-card__title\">{product.name}</h1>\n            {\n              cartItem.variantId &&\n              <h2 className=\"product-card__price\">\n                {money(variant.price, variant.currency)}\n                {isSale && <span className=\"product-card__old-price\">$23</span>}\n              </h2>\n            }\n            {product.description && <p>{product.description}</p>}\n            <form className=\"form product-card__form\">\n              <div className=\"form__form-group\">\n                <span className=\"form__form-group-label product-card__form-label\">Select</span>\n                <div className=\"form__form-group-field\">\n                  <VariantSelection\n                    value={variant}\n                    variants={product.variants}\n                    onChange={({ variant }) => setVariant(variant)}\n                  />\n                </div>\n              </div>\n              <div className=\"form__form-group\">\n                <span className=\"form__form-group-label product-card__form-label\">Quantity</span>\n                <div className=\"form__form-group-field\">\n                  <input\n                    type=\"number\"\n                    disabled={updatesInFlight}\n                    value={cartItem.quantity}\n                    onChange={(e) => onUpdateQuantity(e.target.value)}\n                  />\n                </div>\n              </div>\n              <ButtonToolbar className=\"product-card__btn-toolbar\">\n                {\n                  isInCart\n                    ? (\n                      <ButtonToolbar className=\"product-card__btn-toolbar\">\n                        <button\n                          type=\"button\"\n                          className=\"btn btn-warning\"\n                          disabled={updatesInFlight}\n                          onClick={onRemoveFromCart}\n                        >\n                          Remove from cart\n                        </button>\n                        <Link to=\"/cart\" className=\"product-card__wish-btn\">\n                          <ShoppingCartIcon/> View cart\n                        </Link>\n                      </ButtonToolbar>\n                    ) : (\n                      <ButtonToolbar className=\"product-card__btn-toolbar\">\n                        <button\n                          type=\"button\"\n                          className=\"btn btn-primary\"\n                          disabled={!cartItem.variantId || updatesInFlight}\n                          onClick={onAddToCart}\n                        >\n                          Add to cart\n                        </button>\n                        {\n                          variant &&\n                          !variant.onStock &&\n                          <span className=\"product-card__not-in-stock\">\n                            (On backorder)\n                          </span>\n                        }\n                      </ButtonToolbar>\n                    )\n                }\n              </ButtonToolbar>\n            </form>\n            <div className=\"product-card_ _rate\">\n              <SubmitReview\n                product={product}\n                isLoggedIn={!!user}\n                onSuccess={() => dispatch(fetchProduct(product.id))}\n              />\n            </div>\n          </div>\n        </div>\n      </CardBody>\n    </Card>\n  );\n\n  function onAddToCart() {\n    (cartItem.quantity > 0) && dispatch(\n      addToCart(cartItem)\n    );\n  }\n\n  function onRemoveFromCart() {\n    isInCart && dispatch(\n      removeFromCart(cartItem)\n    );\n  }\n\n  function onUpdateQuantity(nextQuantity) {\n    nextQuantity = parseInt(nextQuantity, 10);\n    if (nextQuantity < 0) {\n      nextQuantity = 0;\n    }\n    if (isInCart) {\n      dispatch(\n        updateCartItemQuantity({ ...cartItem, quantity: nextQuantity })\n      );\n    }\n    setCartItem({ quantity: nextQuantity });\n  }\n\n}\n\nfunction SubmitReview(props) {\n\n  const { product, isLoggedIn, onSuccess } = props;\n  const { rating, name } = product;\n\n  const [value, setValue] = useState();\n  const [comments, setComments] = useState('');\n  const [openModal, setOpenModal] = useState(false);\n  const [message, setMessage] = useState();\n\n  const toggleOpen = () => setOpenModal(!openModal);\n  const submit = () => {\n    fetch(\n      `/api/1/product/${product.id}/review.json`,\n      {\n        body: JSON.stringify({ rating: value, text: comments }),\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json; charset=UTF-8' }\n      }\n    ).then(async (response) => {\n      const data = await response.json();\n      if (response.status === 200) {\n        setValue();\n        setMessage();\n        setComments('');\n        setOpenModal(false);\n        onSuccess && onSuccess(response);\n      } else {\n        setMessage({ type: 'danger', text: data.message });\n      }\n    });\n  };\n\n  const\n    widgetEmptyColors = '#ccc',\n    widgetHoverColors = '#FFCC00',\n    widgetRatedColors = '#FFCC00',\n    widgetDimensions = '20px',\n    widgetSpacings = '5px';\n\n  return (\n    <div className=\"rating-widget\">\n      <section className=\"rating-widget__header\">\n        <div className=\"rating-widget__average\">\n          <div>\n            <Ratings\n              rating={rating == null ? 0 : rating.average}\n              widgetEmptyColors={widgetEmptyColors}\n              widgetHoverColors={widgetHoverColors}\n              widgetRatedColors={widgetRatedColors}\n              widgetDimensions={widgetDimensions}\n              widgetSpacings={widgetSpacings}\n            >\n              <Ratings.Widget/>\n              <Ratings.Widget/>\n              <Ratings.Widget/>\n              <Ratings.Widget/>\n              <Ratings.Widget/>\n            </Ratings>\n          </div>\n          <span className=\"rating-widget__label\">\n            {\n              rating == null\n                ? 'No reviews yet.'\n                : `${rating.reviews} review${rating.reviews > 1 ? 's' : ''}. ${rating.average} average rating.`\n            }\n          </span>\n        </div>\n        <div className=\"rating-widget__user\">\n          {\n            isLoggedIn &&\n            <Button outline className=\"btn-sm\" onClick={toggleOpen}>\n              Submit a review\n            </Button>\n          }\n        </div>\n      </section>\n      <section className=\"rating-widget__reviews\">\n        {\n          // rating && JSON.stringify(rating.reviews, null, '  ')\n          // rating && rating.reviews.map(review =>\n          // <div className=\"rating-widget__review\"></div>\n          // )\n        }\n      </section>\n      <Modal\n        isOpen={openModal}\n        toggle={toggleOpen}\n        className={`modal-dialog--`}\n      >\n        <div className=\"modal__header\">\n          <button className=\"lnr lnr-cross modal__close-btn\" type=\"button\" onClick={toggleOpen}/>\n          <h3 className=\"bold-text  modal__title\">Review \"{name}\"</h3>\n        </div>\n        <div className=\"modal__body\">\n          <div className=\"form\">\n            {\n              message &&\n              <Alert color={message.type} className=\"alert--bordered\">\n                <span>{message.text}</span>\n              </Alert>\n            }\n            <div className=\"form__form-group\">\n              <div>\n                <Ratings\n                  rating={value}\n                  changeRating={setValue}\n                  widgetEmptyColors={widgetEmptyColors}\n                  widgetHoverColors={widgetHoverColors}\n                  widgetRatedColors={widgetRatedColors}\n                  widgetDimensions={widgetDimensions}\n                  widgetSpacings={widgetSpacings}\n                >\n                  <Ratings.Widget/>\n                  <Ratings.Widget/>\n                  <Ratings.Widget/>\n                  <Ratings.Widget/>\n                  <Ratings.Widget/>\n                </Ratings>\n              </div>\n              <span className=\"rating-widget__label\">\n                {value ? `Your rating: ${value} star${value > 1 ? 's' : ''}.` : `How would you rate ${name}?`}\n              </span>\n            </div>\n            <div className=\"form__form-group\">\n              <div className=\"form__form-group-field\">\n                <textarea\n                  value={comments}\n                  onChange={(e) => setComments(e.target.value)}\n                  placeholder={`Any additional comments...`}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <ButtonToolbar className=\"modal__footer\">\n          <Button onClick={toggleOpen}>Cancel</Button>\n          <Button outline onClick={submit} disabled={value == null}>Ok</Button>\n        </ButtonToolbar>\n      </Modal>\n    </div>\n  );\n\n}\n\nexport function VariantSelection(props) {\n  const { variants, value, onChange, placeholder, components } = props;\n  const options = variants ? variants.map((variant) => ({\n    value: variant.id,\n    label: getVariantLabel(variant),\n    variant\n  })) : [];\n  const option = value ? { value: value.id, label: getVariantLabel(value), variant: value } : null;\n  return (\n    <Select\n      value={option}\n      onChange={onChange}\n      options={options}\n      clearable={false}\n      className=\"react-select\"\n      classNamePrefix=\"react-select\"\n      placeholder={placeholder}\n      components={components}\n    />\n  );\n}\n\nVariantSelection.defaultProps = {\n  options: null,\n  components: {\n    Option: function Option({ innerProps, isDisabled, data }) {\n      data = data.variant;\n      const label = getVariantLabel(data);\n      const color = data.attributes.filter((attr) => attr.name === 'Color').map((attr) => attr.value.toLowerCase())[0];\n      // noinspection JSConstructorReturnsPrimitive\n      return (!isDisabled ? (\n        <div\n          className=\"react-select__option\"\n          {...innerProps}\n        >\n          {label}\n          {\n            color &&\n            <span\n              className=\"react-select__color\"\n              style={{ backgroundColor: color, boxShadow: '0 0 1px 0 rgba(0,0,0,.5)' }}\n            />\n          }\n        </div>\n      ) : null);\n    }\n  },\n  onChange: () => void null,\n  placeholder: 'Select...',\n};\n\nfunction getVariantLabel(variant) {\n  return variant.attributes.filter((attr) => attr.name === 'Filtersize').map((attr) => attr.value.label);\n}\n\nexport default ProductCard;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable max-len */\nimport React from 'react';\nimport {\n  Col,\n  Row,\n  Container,\n  Card,\n  CardBody\n} from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport { useICE } from '../../util/component';\n\nfunction BlogTeaser(props) {\n\n  const {\n    label,\n    localId,\n    title_s,\n    posts_o // Fake model property. Injected by the reducer.\n  } = props;\n\n  const { props: ice } = useICE({ modelId: localId, label });\n\n  return (\n    <section className=\"landing__section\" {...ice}>\n      <Container>\n        <Row>\n          <Col md={12}>\n            <h3 className=\"landing__section-title\">{title_s}</h3>\n          </Col>\n        </Row>\n        <Row className=\"landing__teasers\">\n          {\n            posts_o.slice(0, 3).map((post) =>\n              <Col key={post.localId} lg={4} md={6}>\n                <BlogPostCard {...post}/>\n              </Col>\n            )\n          }\n        </Row>\n      </Container>\n    </section>\n  );\n}\n\nexport function BlogPostCard({ localId, label, slug_s, title_s, image_s, summary_html_raw, hideSummary }) {\n  const { props: ice } = useICE({ modelId: localId, label });\n  return (\n    <Link to={`/blog/${slug_s}`}>\n      <Card {...ice}>\n        <CardBody className=\"landing__teaser\">\n          <img src={image_s} alt=\"\" className=\"landing__teaser-img\"/>\n          <h3 className=\"landing__teaser-title\">{title_s}</h3>\n          {\n            !hideSummary && summary_html_raw &&\n            <p\n              className=\"landing__teaser-review\"\n              dangerouslySetInnerHTML={{ __html: summary_html_raw }}\n            />\n          }\n        </CardBody>\n      </Card>\n    </Link>\n  );\n}\n\nexport default BlogTeaser;\n","import { ajax } from 'rxjs/ajax';\nimport { useSelector } from 'react-redux';\n\nexport function getProducts(params = {}) {\n\n  const qs = Object.entries({\n    locale: 'en',\n    currency: 'USD',\n    ...(params || {})\n  }).map(([key, value]) => `${key}=${value}`);\n\n  return ajax.get(`/api/1/product/all.json${qs.length > 0 ? '?' : ''}${qs.join('&')}`);\n\n}\n\nexport function useProductsQuery(params = {}) {\n  const { query: { currency, locale } } = useSelector(state => state.products);\n  return { currency, locale, ...params };\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Col, Container, Row } from 'reactstrap';\nimport Layout from './Layout';\nimport ProductCard from './ProductCard';\nimport Spinner from '../shared/Spinner';\nimport { fetchProduct } from '../../redux/actions/productsActions';\nimport Product from './Product';\nimport { forkJoin, of } from 'rxjs';\nimport { ajax } from 'rxjs/ajax';\nimport { map } from 'rxjs/operators';\nimport { BlogPostCard } from './BlogTeaser';\nimport { getProducts } from '../../util/products';\n\nexport default function ProductDetails(props) {\n\n  const dispatch = useDispatch();\n  const products = useSelector(state => state.products);\n\n  const id = props.match.params.product;\n  const product = products.byId ? products.byId[id] : null;\n  const [related, setRelated] = useState();\n\n  useEffect(\n    () => {\n      // if (product == null)\n        dispatch(fetchProduct(id))\n    },\n    [dispatch, id, products.query.locale, products.query.currency]\n  );\n\n  useEffect(\n    () => {\n      let sub = { unsubscribe: () => void null };\n      if (product != null) {\n\n        const keys = product.categories.reduce(\n          (oMap, category) => {\n            oMap.ids.push(category.id);\n            oMap.keys.push(`{matches: \"${category.key}\"}`);\n            return oMap;\n          },\n          { ids: [], keys: [] }\n        );\n\n        const products$ = keys.ids.length\n          ? getProducts({ limit: 4, filter: `categories:${keys.ids.join(',')}`, locale: products.query.locale, currency: products.query.currency })\n          : of({ response: { items: [] } });\n\n        const posts$ = keys.keys.length\n          ? ajax.post(\n            process.env.REACT_APP_GRAPHQL_SERVER,\n            {\n              query: `query {\n              posts: component_post(limit: 3) {\n                items {\n                  title_s\n                  image_s\n                  slug_s\n                  categories_o @skip(if: true) {\n                    item {\n                      key(filter: {or: [${keys.keys.join(',')}]})\n                    }\n                  }\n                }\n              }\n            }`,\n              variables: {}\n            },\n            { 'Content-Type': 'application/json; charset=UTF-8' }\n          ) : of({ response: { data: { posts: { items: [] } } } });\n\n        sub = forkJoin(products$, posts$).pipe(\n          map(([{ response: products }, { response: posts }]) => ([\n            products.items.filter((prod) => prod.id !== product.id).slice(0, 3),\n            posts.data.posts.items\n          ]))\n        ).subscribe(([products, posts]) => {\n          setRelated({ products, posts });\n        });\n\n      }\n      return () => sub.unsubscribe();\n    },\n    [product, products.query.locale, products.query.currency]\n  );\n\n  return (\n    <Layout>\n      <Container>\n        {\n          product ? (\n            <Row>\n              <Col md={12} lg={12}>\n                <ProductCard product={product}/>\n              </Col>\n              {related && <>\n                {related.products.length > 0 && <Col md={12}>\n                  <h2 className=\"page-title page-title--not-last\">Related Products</h2>\n                  <div className=\"catalog-items__wrap\">\n                    <div className=\"catalog-items\">\n                      {\n                        related.products.map(product =>\n                          <Product key={product.id} product={product}/>\n                        )\n                      }\n                    </div>\n                  </div>\n                </Col>}\n                {related.posts.length > 0 && <Col md={12}>\n                  <h2 className=\"page-title page-title--not-last\">Related Posts</h2>\n                  <Row>\n                    {\n                      related.posts.map((post) =>\n                        <Col key={post.slug_s} md={4}>\n                          <BlogPostCard {...post} hideSummary/>\n                        </Col>\n                      )\n                    }\n                  </Row>\n                </Col>}\n              </>}\n            </Row>\n          ) : <Spinner/>\n        }\n      </Container>\n    </Layout>\n  );\n\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport Anchor from '../shared/Anchor';\nimport { getLoginFormDefaults } from '../../util/component';\nimport AssertContent from '../shared/AssertContent';\n\nimport { Field, reduxForm } from 'redux-form';\nimport EyeIcon from 'mdi-react/EyeIcon';\nimport KeyVariantIcon from 'mdi-react/KeyVariantIcon';\nimport AccountOutlineIcon from 'mdi-react/AccountOutlineIcon';\nimport { Link } from 'react-router-dom';\nimport renderCheckBoxField from '../shared/form/CheckBox';\nimport Alert from '../shared/Alert';\nimport { ajax } from 'rxjs/ajax';\nimport { catchError } from 'rxjs/operators';\nimport { __RouterContext } from 'react-router';\nimport { loginComplete } from '../../redux/actions/usersActions';\nimport { useDispatch, useSelector } from 'react-redux';\n\nfunction LogInFormComponent(props) {\n\n  const dispatch = useDispatch();\n  const { history } = useContext(__RouterContext);\n  const state = useSelector(state => state);\n\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState();\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    const data = state.form.login.values;\n    if (data) {\n      if (data.rememberMe) {\n        localStorage.setItem(`${process.env.REACT_APP_STORE_KEY}.email`, data.email);\n      } else {\n        localStorage.removeItem(`${process.env.REACT_APP_STORE_KEY}.email`);\n      }\n      ajax.post(\n        `/api/1/security/login.json`,\n        data,\n        {\n          'Content-Type': 'application/json; charset=UTF-8'\n        }\n      ).pipe(\n        catchError((error) => [error])\n      ).subscribe((response) => {\n        if (response.name === 'AjaxError') {\n          setError(response.response.message);\n        } else {\n          dispatch(loginComplete(response.response));\n          history.push(state.users.loginRedirect);\n        }\n      });\n    }\n  };\n\n  useEffect(\n    () => {\n      const meRemembered = !!localStorage.getItem(`${process.env.REACT_APP_STORE_KEY}.email`);\n      document.querySelectorAll('.form input')[meRemembered ? 1 : 0].focus();\n    },\n    []\n  );\n\n  return (\n    <form className=\"form\" onSubmit={onSubmit}>\n      {\n        error &&\n        <Alert color=\"danger\" className=\"alert--bordered\">\n          <p>{error}</p>\n        </Alert>\n      }\n      <div className=\"form__form-group\">\n        <div className=\"form__form-group-field\">\n          <div className=\"form__form-group-icon\">\n            <AccountOutlineIcon/>\n          </div>\n          <Field\n            name=\"email\"\n            type=\"text\"\n            component=\"input\"\n            placeholder=\"Name\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <div className=\"form__form-group-field\">\n          <div className=\"form__form-group-icon\">\n            <KeyVariantIcon/>\n          </div>\n          <Field\n            name=\"password\"\n            component=\"input\"\n            type={showPassword ? 'text' : 'password'}\n            placeholder=\"Password\"\n          />\n          <button\n            type=\"button\"\n            className={`form__form-group-button${showPassword ? ' active' : ''}`}\n            onClick={() => setShowPassword(!showPassword)}\n          ><EyeIcon/>\n          </button>\n        </div>\n        <div className=\"account__forgot-password\">\n          <a href=\"/\">Forgot a password?</a>\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <div className=\"form__form-group-field\">\n          <Field\n            type=\"checkbox\"\n            name=\"rememberMe\"\n            label=\"Remember me\"\n            component={renderCheckBoxField}\n          />\n        </div>\n      </div>\n      <div className=\"account__btns\">\n        <button className=\"btn btn-primary account__btn account__sign-in-btn\" type=\"submit\">Sign In</button>\n        <Link className=\"btn btn-outline-primary account__btn account__register-btn\" to=\"/register\">\n          Create Account\n        </Link>\n      </div>\n    </form>\n  );\n\n}\n\nexport const LogInForm = reduxForm({ form: 'login' })(LogInFormComponent);\n\nfunction LogIn() {\n  return <AssertContent\n    requirements={['header']}\n    render={({ header }) => {\n      const {\n        logo_s,\n        logo_alt_t,\n        logo_url_s\n      } = header;\n      return (\n        <div className=\"account\">\n          <div className=\"account__wrapper\">\n            <div className=\"account__card\">\n              <div className=\"login-view__logo\">\n                <Anchor href={logo_url_s} className=\"login-view__logo\">\n                  <img src={logo_s} alt={logo_alt_t} className=\"login-view__logo-img\"/>\n                </Anchor>\n              </div>\n              <div className=\"account__head\">\n                <h3 className=\"account__title\">Welcome</h3>\n                <h4 className=\"account__subhead subhead\">Please log in</h4>\n              </div>\n              <LogInForm onSubmit initialValues={getLoginFormDefaults()}/>\n            </div>\n          </div>\n        </div>\n      );\n    }}\n  />;\n}\n\nexport default LogIn;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { memo, useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport AssertContent from '../shared/AssertContent';\nimport Anchor from '../shared/Anchor';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { registrationComplete } from '../../redux/actions/usersActions';\n\nimport { Button, ButtonToolbar } from 'reactstrap';\nimport CheckboxMarkedCircleIcon from 'mdi-react/CheckboxMarkedCircleIcon';\nimport EmailIcon from 'mdi-react/EmailIcon';\n\nimport { Field, reduxForm } from 'redux-form';\nimport EyeIcon from 'mdi-react/EyeIcon';\nimport KeyVariantIcon from 'mdi-react/KeyVariantIcon';\nimport AccountOutlineIcon from 'mdi-react/AccountOutlineIcon';\nimport MailRuIcon from 'mdi-react/MailRuIcon';\nimport Alert from '../shared/Alert';\nimport { catchError } from 'rxjs/operators';\nimport { ajax } from 'rxjs/ajax';\n\nexport const RegisterFormComponent = memo(function ({ handleSubmit, onSuccess }) {\n\n  const [error, setError] = useState();\n  const [showPassword, setShowPassword] = useState(false);\n\n  const submit = (values) => {\n    ajax.post(\n      `/api/1/customer/signup.json`,\n      values,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(\n      catchError((error) => [error])\n    ).subscribe((response) => {\n      if (response.name === 'AjaxError') {\n        setError(response.response.message);\n      } else {\n        onSuccess && onSuccess(response.response, values);\n      }\n    })\n  };\n\n  return (\n    <form className=\"form\" onSubmit={handleSubmit(submit)}>\n      {\n        error &&\n        <Alert color=\"danger\" className=\"alert--bordered\">\n          <p>{error}</p>\n        </Alert>\n      }\n      <div className=\"form__form-group\">\n        <div className=\"form__form-group-field\">\n          <div className=\"form__form-group-icon\">\n            <AccountOutlineIcon/>\n          </div>\n          <Field\n            name=\"firstName\"\n            component=\"input\"\n            type=\"text\"\n            placeholder=\"First Name\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <div className=\"form__form-group-field\">\n          <div className=\"form__form-group-icon\">\n            <AccountOutlineIcon/>\n          </div>\n          <Field\n            name=\"lastName\"\n            component=\"input\"\n            type=\"text\"\n            placeholder=\"Last Name\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <div className=\"form__form-group-field\">\n          <div className=\"form__form-group-icon\">\n            <MailRuIcon/>\n          </div>\n          <Field\n            name=\"email\"\n            component=\"input\"\n            type=\"email\"\n            placeholder=\"E-mail (username)\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group form__form-group--forgot\">\n        <div className=\"form__form-group-field\">\n          <div className=\"form__form-group-icon\">\n            <KeyVariantIcon/>\n          </div>\n          <Field\n            name=\"password\"\n            component=\"input\"\n            type={showPassword ? 'text' : 'password'}\n            placeholder=\"Password\"\n          />\n          <button\n            type=\"button\"\n            className={`form__form-group-button${showPassword ? ' active' : ''}`}\n            onClick={() => setShowPassword(!showPassword)}\n          ><EyeIcon/>\n          </button>\n        </div>\n      </div>\n      <div className=\"account__btns\">\n        <button\n          type=\"submit\"\n          className=\"btn btn-primary account__btn\"\n        >\n          Sign Up\n        </button>\n      </div>\n    </form>\n  );\n});\n\nexport const RegisterForm = reduxForm({ form: 'registration' })(RegisterFormComponent);\n\nconst RegistrationConfirmation = () => (\n  <div className=\"email-confirmation\">\n    <div className=\"email-confirmation__icon\">\n      <EmailIcon className=\"email-confirmation__mail\"/>\n      <CheckboxMarkedCircleIcon className=\"email-confirmation__check\"/>\n    </div>\n    <h3 className=\"email-confirmation__title\">Your account was created successfully.</h3>\n    <p className=\"email-confirmation__sub\">Please check your email to confirm your account.</p>\n    <ButtonToolbar className=\"email-confirmation__buttons\">\n      <Button color=\"primary\">Resend E-mail</Button>\n    </ButtonToolbar>\n  </div>\n);\nconst Register = () => {\n  const dispatch = useDispatch();\n  const success = useSelector(state => state.users.registerConfirmPending);\n  return <AssertContent requirements={['header']} render={({ header }) => {\n    const {\n      logo_s,\n      logo_alt_t,\n      logo_url_s\n    } = header;\n    return (\n      <div className=\"account\">\n        <div className=\"account__wrapper\">\n          <div className=\"account__card\">\n            <div className=\"login-view__logo\">\n              <Anchor href={logo_url_s} className=\"login-view__logo\">\n                <img src={logo_s} alt={logo_alt_t} className=\"login-view__logo-img\"/>\n              </Anchor>\n            </div>\n            {\n              success\n                ? <RegistrationConfirmation/>\n                : <>\n                  <div className=\"account__head\">\n                    <h3 className=\"account__title\">\n                      Create an account\n                    </h3>\n                  </div>\n                  <RegisterForm onSuccess={() => dispatch(registrationComplete())}/>\n                  <div className=\"account__have-account\">\n                    <p>Already have an account? <Link to=\"/login\">Login</Link></p>\n                  </div>\n                </>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }}/>;\n};\n\nexport default Register;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Col, Row, Container } from 'reactstrap';\nimport A from \"../shared/Anchor\";\nimport { useICE } from '../../util/component';\n\nfunction Hero(props) {\n  const {\n    label,\n    title_t,\n    image_s,\n    localId,\n    image_alt_t,\n    section_background_image_s,\n    content_html_raw,\n    buttons_o\n  } = props;\n  const { props: ice } = useICE({ modelId: localId, label });\n  return (\n    <div\n      className=\"landing__header\"\n      style={\n        section_background_image_s\n          ? { backgroundImage: `url(${section_background_image_s})` }\n          : {}\n      }\n      {...ice}\n    >\n      <Container>\n        <Row>\n          <Col md={12}>\n            <h2 className=\"landing__header-title\">\n              {title_t}\n            </h2>\n            <div\n              className=\"landing__header-subhead\"\n              dangerouslySetInnerHTML={{ __html: content_html_raw }}\n            />\n            {\n              buttons_o.item.map(({ label_s, link_s }, index) =>\n                <A\n                  key={index}\n                  href={link_s}\n                  className=\"landing__btn landing__btn--header\"\n                >\n                  {label_s}\n                </A>\n              )\n            }\n            {\n              image_s &&\n              <img\n                className=\"landing__header-img\"\n                src={image_s}\n                alt={image_alt_t || ''}\n              />\n            }\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n}\n\nexport default Hero;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Col, Row, Container } from 'reactstrap';\nimport { useICE } from '../../util/component';\n\nfunction Features(props) {\n  const {\n    label,\n    localId,\n    title_s,\n    features_o,\n    closingContent_html_raw,\n    openingContent_html_raw\n  } = props;\n  const { props: ice } = useICE({ modelId: localId, label });\n  return (\n    <section className=\"landing__section\" {...ice}>\n      <Container>\n        <Row>\n          <Col md={12}>\n            <h3 className=\"landing__section-title\">{title_s}</h3>\n            {openingContent_html_raw &&\n            <div className=\"landing__feature landing__feature-caption\" style={{ width: '100%' }}\n                 dangerouslySetInnerHTML={{ __html: openingContent_html_raw }}/>}\n          </Col>\n        </Row>\n        <Row>\n          <Col md={12}>\n            <div className=\"landing__features-wrap\">\n              {\n                features_o.item.map(({ description_t, icon_s, title_s }, index) =>\n                  <div className=\"landing__feature\" key={index}>\n                    <div className=\"landing__feature-img-wrap\">\n                      <img src={icon_s} alt=\"\"/>\n                    </div>\n                    <p className=\"landing__feature-title\">{title_s}</p>\n                    <p className=\"landing__feature-caption\">{description_t}</p>\n                  </div>\n                )\n              }\n            </div>\n          </Col>\n        </Row>\n        <Row>\n          <Col md={12}>\n            <p className=\"landing__additional-title\" dangerouslySetInnerHTML={{ __html: closingContent_html_raw }}/>\n          </Col>\n        </Row>\n      </Container>\n    </section>\n  );\n}\n\nexport default Features;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable max-len */\nimport React from 'react';\nimport {\n  Col, Row, Container, Card, CardBody,\n} from 'reactstrap';\nimport StarIcon from 'mdi-react/StarIcon';\nimport { useICE } from '../../util/component';\n\nfunction Testimonials(props) {\n  const {\n    label,\n    localId,\n    title_s,\n    testimonials_o\n  } = props;\n  const { props: ice } = useICE({ modelId: localId, label });\n  return (\n    <section className=\"landing__section\" {...ice}>\n      <Container>\n        <Row>\n          <Col md={12}>\n            <h3 className=\"landing__section-title\">{title_s}</h3>\n          </Col>\n        </Row>\n        <Row className=\"landing__testimonials\">\n          {\n            testimonials_o.item.map(({ customer_s, description_html_raw, link_s, stars_i }, index) =>\n              <Col key={index} lg={4} md={6}>\n                <a\n                  href={link_s}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  <Card>\n                    <CardBody className=\"landing__testimonial\">\n                      <p className=\"landing__testimonial-name\">{customer_s}</p>\n                      <div className=\"landing__testimonial-stars\">\n                        {(\n                          () => {\n                            const stars = [];\n                            for (let i = 0; i < stars_i; i++)\n                              stars.push(<StarIcon key={i}/>);\n                            return stars;\n                          }\n                        )()}\n                      </div>\n                      <p\n                        className=\"landing__testimonial-review\"\n                        dangerouslySetInnerHTML={{ __html: description_html_raw }}\n                      />\n                    </CardBody>\n                  </Card>\n                </a>\n              </Col>\n            )\n          }\n        </Row>\n      </Container>\n    </section>\n  );\n}\n\nexport default Testimonials;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Col, Container, Row } from 'reactstrap';\nimport { useICE } from '../../util/component';\n\nfunction ContentSideImage(props) {\n  const {\n    section_background_image_s,\n    contentAlignment_s,\n    content_html_raw,\n    image_alt_s,\n    image_s,\n    title_s,\n    localId,\n    label\n  } = props;\n  const { props: ice } = useICE({ modelId: localId, label });\n  const\n    CopyColumn = (\n      <Col md={6} sm={12} xs={12}>\n        <div className=\"landing__code-text\">\n          <div className=\"landing__code-wrap\">\n            <h3 className=\"landing__section-title\">{title_s}</h3>\n            <p className=\"landing__section-description\" dangerouslySetInnerHTML={{ __html: content_html_raw }}/>\n          </div>\n        </div>\n      </Col>\n    ),\n    ImageColumn = (\n      <Col md={6} sm={12} xs={12}>\n        <div className=\"landing__code-img landing__code-img--no-shadow\">\n          <div className=\"landing__code-wrap\">\n            <img className=\"landing__img landing__img--over\" src={image_s} alt={image_alt_s || ''}/>\n          </div>\n        </div>\n      </Col>\n    );\n\n  return (\n    <section className=\"landing__section\" {...ice}>\n      {\n        section_background_image_s &&\n        <img className=\"landing__section-background landing__section-background--technologies\" src={section_background_image_s} alt=\"\"/>\n      }\n      <Container>\n        <Row\n          className={`landing__code ${\n            contentAlignment_s === 'right'\n              ? 'landing__code--right'\n              : 'landing__code--first landing__code--left'\n          }`}\n        >\n          {\n            (contentAlignment_s === 'right')\n              ? (\n                <>\n                  {ImageColumn}\n                  {CopyColumn}\n                </>\n              ) : (\n                <>\n                  {CopyColumn}\n                  {ImageColumn}\n                </>\n              )\n          }\n        </Row>\n      </Container>\n    </section>\n  );\n}\n\nexport default ContentSideImage;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport Alert from './Alert';\nimport { Col, Container, Row } from 'reactstrap';\n\nconst NotImplemented = ({ contentType }) => (\n  <aside className=\"landing__section\">\n    <Container>\n      <Row>\n        <Col sm={12}>\n          <Alert color=\"warning\" className=\"alert--neutral\" icon>\n            <p>Unrecognized or unimplemented component of type \"{contentType}\".</p>\n          </Alert>\n        </Col>\n      </Row>\n    </Container>\n  </aside>\n);\n\nexport default NotImplemented;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect } from 'react';\n\nimport Hero from './Hero';\nimport Features from './Features';\nimport Testimonials from './Testimonials';\nimport ContentSideImage from './ContentSideImage';\nimport Layout from './Layout';\nimport NotImplemented from '../shared/NotImplemented';\nimport { useSelector } from 'react-redux';\nimport BlogTeaser from './BlogTeaser';\nimport { FETCH_GRAPH } from '../../redux/actions/contentActions';\nimport { byIdLoadingKey } from '../../util/redux';\nimport ProductTeaser from './ProductTeaser';\n\nconst ContentTypeMap = {\n  '/component/hero': Hero,\n  '/component/two-column': ContentSideImage,\n  '/component/feature-list': Features,\n  '/component/testimonials': Testimonials,\n  '/component/blog_teaser': BlogTeaser,\n  '/component/product-teaser': ProductTeaser\n};\n\nexport default function Home() {\n\n  const content = useSelector(state => state.content.home);\n  const persona = useSelector(state => state.users.persona);\n\n  useEffect(\n    () => {\n      if (content) {\n        window.amplify && window.amplify.publish('INIT_ICE_REGIONS');\n      }\n    },\n    [content]\n  );\n\n  return (\n    <Layout\n      className=\"landing__home-page\"\n      variables={{\n        post: [\n          { name: 'ageGroup', type: 'String', value: persona ? persona.age : null },\n          { name: 'gender', type: 'String', value: persona ? persona.gender : null },\n          { name: 'slug', type: 'String', value: null },\n          { name: 'limit', type: 'Int', value: 3 }\n        ]\n      }}\n      requirements={[\n        'home',\n        {\n          name: 'post',\n          getter: (content) =>\n            (content.loading[byIdLoadingKey(FETCH_GRAPH, 'home')] === false) ? content.post : null\n        }\n      ]}\n    >\n      {\n        content && content.map((component) => {\n          const Component = ContentTypeMap[component.contentType] || NotImplemented;\n          return <Component key={component.objectId || component.localId} {...component} />\n        })\n      }\n    </Layout>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable max-len */\nimport React, { useEffect, useState } from 'react';\nimport {\n  Col,\n  Row,\n  Container,\n} from 'reactstrap';\nimport { useICE } from '../../util/component';\nimport Product from './Product';\nimport { switchMap, map } from 'rxjs/operators';\nimport { getProducts, useProductsQuery } from '../../util/products';\n\nexport default function ProductTeaser(props) {\n\n  const {\n    label,\n    localId,\n    title_s,\n    numOfProducts_i = 3\n  } = props;\n\n  const { props: ice } = useICE({ modelId: localId, label });\n  const [products, setProducts] = useState();\n  const query = useProductsQuery({ limit: numOfProducts_i });\n\n  useEffect(\n    () => {\n      // Probe for total number of catalog items\n      getProducts(query)\n        .pipe(\n          switchMap(({ response: { total, items } }) => {\n            if (total === 0 || total <= numOfProducts_i) {\n              return items;\n            } else {\n              // Get a few products from the catalog based on numOfProducts_i &\n              const offset = Math.ceil(Math.random() * total) - numOfProducts_i;\n              return getProducts({ ...query, offset }).pipe(\n                map(({ response: { items } }) => items)\n              );\n            }\n          })\n        ).subscribe(items => setProducts(items));\n    },\n    // TODO: adding query is creating a loop\n    // eslint-disable-next-line\n    [numOfProducts_i, query.locale, query.currency]\n  );\n\n  return (\n    <section className=\"landing__section\" {...ice}>\n      <Container>\n        <Row>\n          <Col md={12}>\n            <h3 className=\"landing__section-title\">{title_s}</h3>\n          </Col>\n        </Row>\n        <Row className=\"landing__teasers\">\n          {\n            products && products.map((product) =>\n              <Product key={product.id} product={product}/>\n            )\n          }\n          {\n            products && products.length === 0 && <strong style={{\n              display:'block',\n              textAlign:'center',\n              width: '100%'\n            }}>\n              No products on the catalog yet. Please check back later!\n            </strong>\n          }\n        </Row>\n      </Container>\n    </section>\n  );\n}\n\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { withTranslation } from 'react-i18next';\n\nconst NotFound404 = (props) => (\n  <div className=\"not-found\">\n    <div className=\"not-found__content\">\n      <h3 className=\"not-found__info\">The page you are looking for was not be found.</h3>\n      <Link className=\"btn btn-primary\" to={props.href || '/'}>{props.t('back_home')}</Link>\n    </div>\n  </div>\n);\n\nexport default withTranslation('common')(NotFound404);\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\n\n// var defaultEmptyImg = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTg0IiBoZWlnaHQ9IjE1MiIgdmlld0JveD0iMCAwIDE4NCAxNTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0IDMxLjY3KSI+CiAgICAgIDxlbGxpcHNlIGZpbGwtb3BhY2l0eT0iLjgiIGZpbGw9IiNGNUY1RjciIGN4PSI2Ny43OTciIGN5PSIxMDYuODkiIHJ4PSI2Ny43OTciIHJ5PSIxMi42NjgiLz4KICAgICAgPHBhdGggZD0iTTEyMi4wMzQgNjkuNjc0TDk4LjEwOSA0MC4yMjljLTEuMTQ4LTEuMzg2LTIuODI2LTIuMjI1LTQuNTkzLTIuMjI1aC01MS40NGMtMS43NjYgMC0zLjQ0NC44MzktNC41OTIgMi4yMjVMMTMuNTYgNjkuNjc0djE1LjM4M2gxMDguNDc1VjY5LjY3NHoiIGZpbGw9IiNBRUI4QzIiLz4KICAgICAgPHBhdGggZD0iTTEwMS41MzcgODYuMjE0TDgwLjYzIDYxLjEwMmMtMS4wMDEtMS4yMDctMi41MDctMS44NjctNC4wNDgtMS44NjdIMzEuNzI0Yy0xLjU0IDAtMy4wNDcuNjYtNC4wNDggMS44NjdMNi43NjkgODYuMjE0djEzLjc5Mmg5NC43NjhWODYuMjE0eiIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudC0xKSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMuNTYpIi8+CiAgICAgIDxwYXRoIGQ9Ik0zMy44MyAwaDY3LjkzM2E0IDQgMCAwIDEgNCA0djkzLjM0NGE0IDQgMCAwIDEtNCA0SDMzLjgzYTQgNCAwIDAgMS00LTRWNGE0IDQgMCAwIDEgNC00eiIgZmlsbD0iI0Y1RjVGNyIvPgogICAgICA8cGF0aCBkPSJNNDIuNjc4IDkuOTUzaDUwLjIzN2EyIDIgMCAwIDEgMiAyVjM2LjkxYTIgMiAwIDAgMS0yIDJINDIuNjc4YTIgMiAwIDAgMS0yLTJWMTEuOTUzYTIgMiAwIDAgMSAyLTJ6TTQyLjk0IDQ5Ljc2N2g0OS43MTNhMi4yNjIgMi4yNjIgMCAxIDEgMCA0LjUyNEg0Mi45NGEyLjI2MiAyLjI2MiAwIDAgMSAwLTQuNTI0ek00Mi45NCA2MS41M2g0OS43MTNhMi4yNjIgMi4yNjIgMCAxIDEgMCA0LjUyNUg0Mi45NGEyLjI2MiAyLjI2MiAwIDAgMSAwLTQuNTI1ek0xMjEuODEzIDEwNS4wMzJjLS43NzUgMy4wNzEtMy40OTcgNS4zNi02LjczNSA1LjM2SDIwLjUxNWMtMy4yMzggMC01Ljk2LTIuMjktNi43MzQtNS4zNmE3LjMwOSA3LjMwOSAwIDAgMS0uMjIyLTEuNzlWNjkuNjc1aDI2LjMxOGMyLjkwNyAwIDUuMjUgMi40NDggNS4yNSA1LjQydi4wNGMwIDIuOTcxIDIuMzcgNS4zNyA1LjI3NyA1LjM3aDM0Ljc4NWMyLjkwNyAwIDUuMjc3LTIuNDIxIDUuMjc3LTUuMzkzVjc1LjFjMC0yLjk3MiAyLjM0My01LjQyNiA1LjI1LTUuNDI2aDI2LjMxOHYzMy41NjljMCAuNjE3LS4wNzcgMS4yMTYtLjIyMSAxLjc4OXoiIGZpbGw9IiNEQ0UwRTYiLz4KICAgIDwvZz4KICAgIDxwYXRoIGQ9Ik0xNDkuMTIxIDMzLjI5MmwtNi44MyAyLjY1YTEgMSAwIDAgMS0xLjMxNy0xLjIzbDEuOTM3LTYuMjA3Yy0yLjU4OS0yLjk0NC00LjEwOS02LjUzNC00LjEwOS0xMC40MDhDMTM4LjgwMiA4LjEwMiAxNDguOTIgMCAxNjEuNDAyIDAgMTczLjg4MSAwIDE4NCA4LjEwMiAxODQgMTguMDk3YzAgOS45OTUtMTAuMTE4IDE4LjA5Ny0yMi41OTkgMTguMDk3LTQuNTI4IDAtOC43NDQtMS4wNjYtMTIuMjgtMi45MDJ6IiBmaWxsPSIjRENFMEU2Ii8+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDkuNjUgMTUuMzgzKSIgZmlsbD0iI0ZGRiI+CiAgICAgIDxlbGxpcHNlIGN4PSIyMC42NTQiIGN5PSIzLjE2NyIgcng9IjIuODQ5IiByeT0iMi44MTUiLz4KICAgICAgPHBhdGggZD0iTTUuNjk4IDUuNjNIMEwyLjg5OC43MDR6TTkuMjU5LjcwNGg0Ljk4NVY1LjYzSDkuMjU5eiIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==\";\n// var simpleEmptyImg = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNDEiIHZpZXdCb3g9IjAgMCA2NCA0MSIgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxlbGxpcHNlIGZpbGw9IiNGNUY1RjUiIGN4PSIzMiIgY3k9IjMzIiByeD0iMzIiIHJ5PSI3Ii8+CiAgICA8ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgIDxwYXRoIGQ9Ik01NSAxMi43Nkw0NC44NTQgMS4yNThDNDQuMzY3LjQ3NCA0My42NTYgMCA0Mi45MDcgMEgyMS4wOTNjLS43NDkgMC0xLjQ2LjQ3NC0xLjk0NyAxLjI1N0w5IDEyLjc2MVYyMmg0NnYtOS4yNHoiLz4KICAgICAgPHBhdGggZD0iTTQxLjYxMyAxNS45MzFjMC0xLjYwNS45OTQtMi45MyAyLjIyNy0yLjkzMUg1NXYxOC4xMzdDNTUgMzMuMjYgNTMuNjggMzUgNTIuMDUgMzVoLTQwLjFDMTAuMzIgMzUgOSAzMy4yNTkgOSAzMS4xMzdWMTNoMTEuMTZjMS4yMzMgMCAyLjIyNyAxLjMyMyAyLjIyNyAyLjkyOHYuMDIyYzAgMS42MDUgMS4wMDUgMi45MDEgMi4yMzcgMi45MDFoMTQuNzUyYzEuMjMyIDAgMi4yMzctMS4zMDggMi4yMzctMi45MTN2LS4wMDd6IiBmaWxsPSIjRkFGQUZBIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K\";\n\nconst img = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNDEiIHZpZXdCb3g9IjAgMCA2NCA0MSIgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxlbGxpcHNlIGZpbGw9IiNGNUY1RjUiIGN4PSIzMiIgY3k9IjMzIiByeD0iMzIiIHJ5PSI3Ii8+CiAgICA8ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgIDxwYXRoIGQ9Ik01NSAxMi43Nkw0NC44NTQgMS4yNThDNDQuMzY3LjQ3NCA0My42NTYgMCA0Mi45MDcgMEgyMS4wOTNjLS43NDkgMC0xLjQ2LjQ3NC0xLjk0NyAxLjI1N0w5IDEyLjc2MVYyMmg0NnYtOS4yNHoiLz4KICAgICAgPHBhdGggZD0iTTQxLjYxMyAxNS45MzFjMC0xLjYwNS45OTQtMi45MyAyLjIyNy0yLjkzMUg1NXYxOC4xMzdDNTUgMzMuMjYgNTMuNjggMzUgNTIuMDUgMzVoLTQwLjFDMTAuMzIgMzUgOSAzMy4yNTkgOSAzMS4xMzdWMTNoMTEuMTZjMS4yMzMgMCAyLjIyNyAxLjMyMyAyLjIyNyAyLjkyOHYuMDIyYzAgMS42MDUgMS4wMDUgMi45MDEgMi4yMzcgMi45MDFoMTQuNzUyYzEuMjMyIDAgMi4yMzctMS4zMDggMi4yMzctMi45MTN2LS4wMDd6IiBmaWxsPSIjRkFGQUZBIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K';\n\nexport function Empty(props) {\n  return (\n    <section className=\"empty\">\n      <figure className=\"empty__fig\">\n        <img className=\"empty__img\" src={img} alt=\"\"/>\n      </figure>\n      {\n        props.description &&\n        <p className=\"empty__desc\">\n          {props.description}\n        </p>\n      }\n    </section>\n  )\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Button, ButtonGroup, ButtonToolbar, Table } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport { removeFromCart, updateCartItemQuantity } from '../../redux/actions/productsActions';\nimport { money } from '../../util/string';\nimport AddCircleOutlineIcon from 'mdi-react/AddCircleOutlineIcon';\nimport DeleteForeverIcon from 'mdi-react/DeleteForeverIcon';\nimport RemoveCircleOutlineIcon from 'mdi-react/RemoveCircleOutlineIcon';\nimport { Empty } from '../shared/Empty';\nimport { useCartUpdateInFlight } from '../../util/component';\n\n\nexport function CartSummary() {\n  const { cart } = useSelector(state => state.products);\n  return (\n    (cart.items.length === 0) ? (\n      <h2 className=\"text-center\">Your cart is empty</h2>\n    ) : (\n      <Table className=\"table--bordered cart__table cart__summary-table\" responsive>\n        <thead>\n        <tr>\n          <th>Product</th>\n          <th/>\n        </tr>\n        </thead>\n        <tbody>\n        {\n          cart && cart.items.map((item) => (\n            <tr key={item.id}>\n              <td>\n                <span className=\"cart__preview-img\">\n                  <img src={item.images[0].url} alt=\"product_preview\"/>\n                </span>\n                <span className=\"cart__product-name--sm\">\n                  {item.productName}\n                </span>\n              </td>\n              <td>\n                <div className=\"cart__quantity-wrapper\">\n                  <span className=\"cart__quantity-display\">x{item.quantity}</span>\n                </div>\n              </td>\n            </tr>\n          ))\n        }\n        </tbody>\n      </Table>\n    )\n  );\n}\n\nfunction CartBody(props) {\n  const dispatch = useDispatch();\n  const { cart } = useSelector(state => state.products);\n  const options = {\n    ...props.displayOptions\n      ? { ...CartBody.defaultProps.displayOptions, ...props.displayOptions }\n      : CartBody.defaultProps.displayOptions\n  };\n  const updatesInFlight = useCartUpdateInFlight();\n  return (\n    (cart.items.length === 0) ? (\n      <Empty description={\n        <>\n          <span>Your cart is empty.</span><br/>\n          <span>If you had left items in your cart, simply <Link to=\"/login\">log in</Link> to recover them.</span>\n        </>\n      } />\n    ) : (\n      <Table className=\"table--bordered cart__table\" responsive>\n        <thead>\n        <tr>\n          <th>Product</th>\n          <th>Quantity</th>\n          {options.showPrice && <th>Price</th>}\n          {options.showTax && <th>Tax</th>}\n          {options.showTotal && <th>Total</th>}\n          {options.showRemove && <th/>}\n        </tr>\n        </thead>\n        <tbody>\n        {\n          cart && cart.items.map((item) => (\n            <tr key={item.id}>\n              <td>\n                <span className=\"cart__preview-img\">\n                  <img src={item.images[0].url} alt=\"product_preview\"/>\n                </span>\n                <Link\n                  className=\"cart__product-name\"\n                  to={`/catalog/${item.productId}`}\n                >\n                  {item.productName}\n                </Link>\n              </td>\n              <td>\n                <div className=\"cart__quantity-wrapper\">\n                  <span className=\"cart__quantity-display\">{item.quantity}</span>\n                  {\n                    options.showQuantityModifiers &&\n                    <ButtonToolbar>\n                      <ButtonGroup className=\"btn-group--icons\">\n                        <Button\n                          type=\"button\"\n                          className=\"cart__remove-one-button sm\"\n                          outline\n                          onClick={() =>\n                            dispatch(updateCartItemQuantity({\n                              ...item,\n                              quantity: item.quantity - 1\n                            }))\n                          }\n                          disabled={updatesInFlight}\n                        >\n                          <RemoveCircleOutlineIcon/>\n                        </Button>\n                        <Button\n                          type=\"button\"\n                          className=\"cart__add-one-button sm\"\n                          outline\n                          onClick={() =>\n                            dispatch(\n                              updateCartItemQuantity({\n                                ...item,\n                                quantity: item.quantity + 1\n                              })\n                            )\n                          }\n                          disabled={updatesInFlight}\n                        >\n                          <AddCircleOutlineIcon/>\n                        </Button>\n                      </ButtonGroup>\n                    </ButtonToolbar>\n                  }\n                </div>\n              </td>\n              {options.showPrice && <td>{money(item.unitPrice, cart.currency)}</td>}\n              {options.showTax && <td>{money(item.taxedPrice, cart.currency)}</td>}\n              {options.showTotal && <td>{money(item.totalPrice, cart.currency)}</td>}\n              {options.showRemove && <td>\n                <button\n                  className=\"cart__table-btn\" type=\"button\"\n                  onClick={() => dispatch(removeFromCart(item))}\n                >\n                  <DeleteForeverIcon/> Remove\n                </button>\n              </td>}\n            </tr>\n          ))\n        }\n        </tbody>\n      </Table>\n    )\n  );\n}\n\nexport function OrderTotals(props) {\n  const { cart } = useSelector(state => state.products);\n  return (\n    <>\n      <h3 className=\"order-details__title\">Order Details</h3>\n      <div className=\"order-details__body\">\n        <table className=\"order-details__table\">\n          <tbody>\n          <tr>\n            <th className=\"order-details__th\">Products</th>\n            <td className=\"order-details__td\">{money(cart.items.reduce((sum, item) => (sum + item.totalPrice), 0), cart.currency)}</td>\n          </tr>\n          <tr>\n            <th className=\"order-details__th\">Shipping</th>\n            <td className=\"order-details__td\">{money(cart.shippingPrice, cart.currency)}</td>\n          </tr>\n          <tr>\n            <th className=\"order-details__th\">Sub Total</th>\n            <td className=\"order-details__td\">{money(cart.totalPrice, cart.currency)}</td>\n          </tr>\n          {\n            cart.taxedPrice &&\n            <tr>\n              <th className=\"order-details__th\">Tax</th>\n              <td className=\"order-details__td\">{money(cart.taxedPrice - cart.totalPrice, cart.currency)}</td>\n            </tr>\n          }\n          <tr>\n            <th className=\"order-details__th\">Total</th>\n            <td className=\"order-details__td\">{money(cart.taxedPrice, cart.currency)}</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </>\n  );\n}\n\nCartBody.defaultProps = {\n  displayOptions: {\n    showTax: true,\n    showPrice: true,\n    showTotal: true,\n    showRemove: true,\n    showQuantityModifiers: true\n  }\n};\n\nexport default CartBody;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport Layout from './Layout';\nimport { ButtonToolbar, Card, CardBody, Col, Container, Row } from 'reactstrap';\n\nimport { Link } from 'react-router-dom';\nimport { money } from '../../util/string';\nimport Spinner from '../shared/Spinner';\nimport CartBody from './CartBody';\nimport { useCart } from '../../util/component';\n\nfunction CartView() {\n  const cart = useCart();\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          <Col md={12} lg={12}>\n            {\n              (cart == null)\n                ? <Spinner contained/>\n                : <Card className=\"cart\">\n                  <CardBody>\n                    <div className=\"card__title\">\n                      <h1 className=\"page-title bold-text\">Cart</h1>\n                    </div>\n                    <CartBody/>\n                    {\n                      (cart.items.length > 0) &&\n                      <div className=\"cart__total-wrapper\">\n                        <h4 className=\"cart__total\">Sub-total: {money(cart.totalPrice, cart.currency)}</h4>\n                        <ButtonToolbar className=\"form__button-toolbar\">\n                          <Link className=\"btn btn-primary\" to=\"/checkout\">Checkout</Link>\n                        </ButtonToolbar>\n                      </div>\n                    }\n                  </CardBody>\n                </Card>\n            }\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nexport default CartView;\n\n\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable react/no-children-prop */\nimport React, { useState } from 'react';\nimport { Button, ButtonToolbar } from 'reactstrap';\nimport { Field, reduxForm, SubmissionError } from 'redux-form';\nimport TextField from '@material-ui/core/TextField';\nimport PropTypes from 'prop-types';\nimport renderCheckBoxField from '../shared/form/CheckBox';\nimport Alert from '../shared/Alert';\nimport { loginComplete } from '../../redux/actions/usersActions';\nimport { useDispatch } from 'react-redux';\n\nconst renderTextField = ({ input, label, meta: { touched, error }, children }) => (\n  <TextField\n    className=\"material-form__field\"\n    label={label}\n    error={touched && error}\n    children={children}\n    value={input.value}\n    onChange={(e) => {\n      e.preventDefault();\n      input.onChange(e.target.value);\n    }}\n  />\n);\n\nrenderTextField.propTypes = {\n  input: PropTypes.shape().isRequired,\n  label: PropTypes.string,\n  meta: PropTypes.shape({\n    touched: PropTypes.bool,\n    error: PropTypes.string,\n  }),\n  children: PropTypes.arrayOf(PropTypes.element),\n};\n\nrenderTextField.defaultProps = {\n  meta: null,\n  label: '',\n  children: [],\n};\n\nfunction ProfileSettings(props) {\n  \n  const dispatch = useDispatch();\n\n  const { handleSubmit, reset, error } = props;\n  const [success, setSuccess] = useState();\n\n  function submit(values) {\n    success && setSuccess();\n    return fetch('/api/1/customer/update.json', {\n      body: JSON.stringify(values),\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n      }\n    }).then(async (response) => {\n      if (response.status !== 200) {\n        const data = await response.json();\n        throw new SubmissionError({\n          _error: data.message\n        });\n      }\n      setSuccess('Update successful.');\n      return response.json();\n    }).then((user) => {\n      dispatch(loginComplete(user))\n    });\n  }\n\n  return (\n    <form className=\"form\" onSubmit={handleSubmit(submit)}>\n      {\n        success &&\n        <Alert color=\"success\" className=\"alert--bordered\" onDismiss={() => setSuccess()}>\n          <p>{success}</p>\n        </Alert>\n      }\n      {\n        error &&\n        <Alert color=\"danger\" className=\"alert--bordered\">\n          <p>{error}</p>\n        </Alert>\n      }\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Name</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            type=\"text\"\n            name=\"firstName\"\n            component=\"input\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Middle Name</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            type=\"text\"\n            name=\"middleName\"\n            component=\"input\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Last Name</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            type=\"text\"\n            name=\"lastName\"\n            component=\"input\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Phone Number</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            type=\"text\"\n            name=\"phone\"\n            component=\"input\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">E-mail</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            type=\"text\"\n            name=\"email\"\n            component=\"input\"\n          />\n        </div>\n      </div>\n      <ButtonToolbar className=\"form__button-toolbar\">\n        <Button color=\"primary\" type=\"submit\">Update profile</Button>\n        <Button type=\"button\" onClick={reset}>\n          Cancel\n        </Button>\n      </ButtonToolbar>\n    </form>\n  );\n\n}\n\nfunction ChangePasswordFormComponent(props) {\n  const { handleSubmit, reset, error } = props;\n  const [type, setType] = useState('password');\n  const [success, setSuccess] = useState();\n\n  function submit(values) {\n    success && setSuccess();\n    return fetch('/api/1/customer/change-password.json', {\n      body: JSON.stringify(values),\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n      }\n    }).then(async (response) => {\n      if (response.status !== 200) {\n        const data = await response.json();\n        throw new SubmissionError({\n          _error: data.message\n        });\n      }\n      reset();\n      setSuccess('Update successful.');\n      return response.json();\n    });\n  }\n\n  return (\n    <form className=\"form\" onSubmit={handleSubmit(submit)}>\n      {\n        success &&\n        <Alert color=\"success\" className=\"alert--bordered\" onDismiss={() => setSuccess()}>\n          <p>{success}</p>\n        </Alert>\n      }\n      {\n        error &&\n        <Alert color=\"danger\" className=\"alert--bordered\">\n          <p>{error}</p>\n        </Alert>\n      }\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Current Password</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            name=\"currentPassword\"\n            component=\"input\"\n            type={type}\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">New Password</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            name=\"newPassword\"\n            component=\"input\"\n            type={type}\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <div className=\"form__form-group-field\">\n          <Field\n            name=\"showPassword\"\n            onChange={(value, checked) => setType(checked ? 'text' : 'password')}\n            component={renderCheckBoxField}\n            label=\"Show passwords\"\n          />\n        </div>\n      </div>\n      <ButtonToolbar className=\"form__button-toolbar\">\n        <Button color=\"primary\" type=\"submit\">Submit</Button>\n        <Button type=\"button\" onClick={reset}>\n          Cancel\n        </Button>\n      </ButtonToolbar>\n    </form>\n  );\n}\n\nexport const ChangePasswordForm = reduxForm({ form: 'passwordUpdateForm' })(ChangePasswordFormComponent);\n\nexport default reduxForm({ form: 'profileForm' })(ProfileSettings);\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { Badge, Table } from 'reactstrap';\nimport React, { useContext, useEffect } from 'react';\nimport { FETCH_ORDERS, fetchOrders } from '../../redux/actions/usersActions';\nimport Spinner from '../shared/Spinner';\nimport { capitalize, money } from '../../util/string';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Empty } from '../shared/Empty';\nimport { __RouterContext } from 'react-router';\n\nfunction OrderList() {\n  const { history } = useContext(__RouterContext);\n  const dispatch = useDispatch();\n  const { orders: ordersTable, loading } = useSelector(state => state.users);\n  const orders = Object.values(ordersTable);\n  useEffect(\n    () => {\n      if (loading[FETCH_ORDERS] == null)\n        dispatch(fetchOrders());\n    },\n    [dispatch, loading]\n  );\n  if (loading[FETCH_ORDERS]) {\n    return <Spinner contained/>;\n  }\n  return (\n    (orders.length === 0) ? (\n      <Empty description={\n        <>You haven't placed any orders yet. Visit <Link to=\"/catalog\">the catalog</Link> to place your first order!</>\n      } />\n    ) : (\n      <Table responsive hover>\n        <thead>\n        <tr>\n          <th>Order ID</th>\n          <th>Created</th>\n          <th>Total</th>\n          <th>Shipping Status</th>\n          <th>Order Status</th>\n        </tr>\n        </thead>\n        <tbody>\n        {orders.map(({ id, created, modified, currency, totalPrice, taxedPrice, shippingStatus, paymentStatus, orderStatus }) =>\n          <tr key={id} onClick={() => history.push(`/account/orders/${id}`)}>\n            <td>{id.substr(0, id.indexOf('-'))}</td>\n            <td>{created}</td>\n            <td>{money(totalPrice + taxedPrice, currency)}</td>\n            <td>{shippingStatus}</td>\n            <td>\n              <Badge color={orderStatus === 'COMPLETE' ? 'success' : 'warning'}>{capitalize(orderStatus)}</Badge>\n            </td>\n          </tr>\n        )}\n        </tbody>\n      </Table>\n    )\n  );\n}\n\nexport default OrderList;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useMemo, useState } from 'react';\nimport { Field, reduxForm, SubmissionError } from 'redux-form';\nimport Layout from './Layout';\nimport { Button, ButtonToolbar, Card, CardBody, Col, Container, Row } from 'reactstrap';\nimport Alert from '../shared/Alert';\nimport Spinner from '../shared/Spinner';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addAddressComplete, editAddressComplete } from '../../redux/actions/usersActions';\nimport { RadioButton } from '../shared/form/RadioButton';\nimport { Link } from 'react-router-dom';\nimport { Empty } from '../shared/Empty';\nimport { useUser } from '../../util/component';\nimport * as qs from 'query-string';\n\nexport function AddressCard({ address, user, showName }) {\n  return (\n    <address className=\"profile__contact\">\n      {\n        ((showName === undefined) || (showName)) &&\n        <p className=\"profile__name\">\n          {\n            address.addressName\n              ? address.addressName\n              : `${address.firstName || user.firstName} ${address.lastName || user.lastName}`\n          }\n        </p>\n      }\n      <div className=\"profile__work\">\n        {address.phone ? <div>{address.phone}</div> : null}\n        {address.mobile ? <div>{address.mobile}</div> : null}\n        {address.fax ? <div>{address.fax}</div> : null}\n      </div>\n      {address.streetAddressLineOne ? <div>{address.streetAddressLineOne}</div> : null}\n      {address.streetAddressLineTwo ? <div>{address.streetAddressLineTwo}</div> : null}\n      {\n        (address.city || address.postalCode) && (\n          <div>\n            {\n              (address.city && address.postalCode)\n                ? `${address.city}, ${address.postalCode}`\n                : address.city || address.postalCode\n            }\n          </div>\n        )\n      }\n      {address.state ? <div>{address.state}</div> : null}\n      <div>{address.country}</div>\n    </address>\n  );\n}\n\nexport const AddressForm = reduxForm({ form: 'addressForm' })(function (props) {\n\n  const {\n    handleSubmit,\n    error,\n    onSuccess,\n    onCancel,\n    isEditMode\n  } = props;\n\n  const [success, setSuccess] = useState();\n\n  const dispatch = useDispatch();\n\n  const submit = (values) => {\n    success && setSuccess();\n    return fetch('/api/1/customer/update.json', {\n      body: JSON.stringify({ [isEditMode ? 'changeAddress' : 'addAddress']: [values] }),\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json; charset=UTF-8' }\n    }).then(async (response) => {\n      const data = await response.json();\n      if (response.status !== 200) {\n        throw new SubmissionError({\n          _error: data.message\n        });\n      }\n      dispatch(isEditMode ? editAddressComplete(data) : addAddressComplete(data));\n      setSuccess('Update successful.');\n      onSuccess(data);\n    });\n  };\n\n  return (\n    <form className=\"form address-form\" onSubmit={handleSubmit(submit)}>\n      {\n        success &&\n        <Alert color=\"success\" className=\"alert--bordered\" onDismiss={() => setSuccess()}>\n          <p>{success}</p>\n        </Alert>\n      }\n      {\n        error &&\n        <Alert color=\"danger\" className=\"alert--bordered\">\n          <p>{error}</p>\n        </Alert>\n      }\n      <Field\n        name=\"id\"\n        component=\"input\"\n        type=\"hidden\"\n      />\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Address Name</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            name=\"addressName\"\n            component=\"input\"\n            type=\"text\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group-columns\">\n        <div className=\"form__form-group form__form-group-col-left\">\n          <span className=\"form__form-group-label\">First Name</span>\n          <div className=\"form__form-group-field\">\n            <Field\n              name=\"firstName\"\n              component=\"input\"\n              type=\"text\"\n            />\n          </div>\n        </div>\n        <div className=\"form__form-group form__form-group-col-right\">\n          <span className=\"form__form-group-label\">Last Name</span>\n          <div className=\"form__form-group-field\">\n            <Field\n              name=\"lastName\"\n              component=\"input\"\n              type=\"text\"\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Street Address</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            name=\"streetAddressLineOne\"\n            component=\"input\"\n            type=\"text\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <div className=\"form__form-group-field\">\n          <Field\n            name=\"streetAddressLineTwo\"\n            component=\"input\"\n            type=\"text\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group-columns\">\n        <div className=\"form__form-group form__form-group-col-left\">\n          <span className=\"form__form-group-label\">Country</span>\n          <div className=\"form__form-group-field\">\n            <Field\n              name=\"country\"\n              component=\"input\"\n              type=\"text\"\n            />\n          </div>\n        </div>\n        <div className=\"form__form-group form__form-group-col-right\">\n          <span className=\"form__form-group-label\">State</span>\n          <div className=\"form__form-group-field\">\n            <Field\n              name=\"state\"\n              component=\"input\"\n              type=\"text\"\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"form__form-group-columns\">\n        <div className=\"form__form-group form__form-group-col-left\">\n          <span className=\"form__form-group-label\">City</span>\n          <div className=\"form__form-group-field\">\n            <Field\n              name=\"city\"\n              component=\"input\"\n              type=\"text\"\n            />\n          </div>\n        </div>\n        <div className=\"form__form-group form__form-group-col-right\">\n          <span className=\"form__form-group-label\">Postcode</span>\n          <div className=\"form__form-group-field\">\n            <Field\n              name=\"postalCode\"\n              component=\"input\"\n              type=\"text\"\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Phone</span>\n        <div className=\"form__form-group-field\">\n          <Field\n            name=\"phone\"\n            component=\"input\"\n            type=\"text\"\n          />\n        </div>\n      </div>\n      <ButtonToolbar className=\"form__button-toolbar\">\n        <Button color=\"primary\" type=\"submit\">Submit</Button>\n        <Button type=\"button\" onClick={onCancel}>\n          Cancel\n        </Button>\n      </ButtonToolbar>\n    </form>\n  );\n});\n\nexport function AddressEntry(props) {\n\n  const user = useSelector(state => state.users.user);\n  const addressId = props.match.params.id;\n  const queryString = qs.parse(props.location.search);\n  const backUrl = queryString.origin || '/account/address-book';\n\n  const isEditMode = useMemo(\n    () => props.match.params.id != null,\n    [props.match.params.id]\n  );\n\n  if (user == null) {\n    return <Spinner/>;\n  }\n\n  return (\n    <Layout>\n      <Container>\n        <Card>\n          <CardBody>\n            <h1 className=\"page-title\">\n              {`${isEditMode ? 'Edit' : 'Add'} Address`}\n            </h1>\n            <AddressForm\n              user={user}\n              isEditMode={isEditMode}\n              onSuccess={() => props.history.push(backUrl)}\n              onCancel={() => props.history.push(backUrl)}\n              initialValues={\n                (isEditMode && user.addresses.find(\n                  (address) => address.id === addressId\n                )) || {\n                  firstName: user.firstName,\n                  lastName: user.lastName,\n                  email: user.email\n                }\n              }\n            />\n          </CardBody>\n        </Card>\n      </Container>\n    </Layout>\n  );\n}\n\nexport function AddressSelection({ name, onChange, currentValue, returnUrl }) {\n\n  const user = useUser();\n  const { addresses } = user;\n\n  let newAddressUrl = '/account/address-book/new';\n  if (returnUrl) {\n    newAddressUrl = `${newAddressUrl}?origin=${returnUrl}`;\n  }\n\n  return (\n    <Row>\n      {\n        (addresses && addresses.length > 0) ? <>\n\n          {addresses.map((address) =>\n            <Col md={4} sm={6} key={address.id}>\n              <RadioButton\n                label={`${address.firstName || user.firstName} ${address.lastName || user.lastName}`}\n                name={name}\n                value={address.id}\n                currentValue={currentValue}\n                onChange={(e) => onChange(e.target.value)}\n              />\n              <div className=\"cart__delivery-time\">\n                <AddressCard address={address} user={user} showName={false}/>\n              </div>\n            </Col>\n          )}\n          <Col md={12}>\n            <hr/>\n            <Link to={newAddressUrl}>\n              Add new address\n            </Link>\n          </Col>\n\n        </> : <Col md={12}>\n          <Empty\n            description={\n              <span>\n                Please <Link to={newAddressUrl}>add an address</Link> to your address book.\n              </span>\n            }\n          />\n        </Col>\n      }\n    </Row>\n  );\n}\n\nexport default AddressCard;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useMemo } from 'react';\nimport Layout from './Layout';\nimport {\n  Badge,\n  Button,\n  Card,\n  CardBody,\n  Col,\n  Container,\n  DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  Nav,\n  NavItem,\n  NavLink,\n  Row,\n  TabContent,\n  TabPane,\n  UncontrolledDropdown\n} from 'reactstrap';\n\nimport classnames from 'classnames';\nimport ProfileSettings, { ChangePasswordForm } from './ProfileSettings';\nimport OrdersList from './OrderList';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { logout, removeAddress, setAddressDefaults } from '../../redux/actions/usersActions';\nimport AddressCard from './AddressCard';\nimport ChevronDownIcon from 'mdi-react/ChevronDownIcon';\n\nimport authorized from '../shared/authorized';\nimport { Empty } from '../shared/Empty';\n\nfunction Account({ history, match, user }) {\n\n  const dispatch = useDispatch();\n  const { orders } = useSelector(state => state.users);\n\n  const activeTab = useMemo(\n    () => (\n      [\n        'profile',\n        'orders',\n        'address-book',\n        'password'\n      ].includes(match.params.tab)\n        ? match.params.tab\n        : 'profile'\n    ),\n    [match.params.tab]\n  );\n\n  const setActiveTab = (tab) => {\n    history.push(`/account/${tab}`);\n  };\n  \n  return (\n    <Layout>\n      <Container>\n        <div className=\"profile\">\n          <Row>\n            <Col md={12} lg={12} xl={4}>\n              <Card style={{ height: 'auto' }}>\n                <CardBody className=\"profile__card\">\n                  <div className=\"profile__information\">\n                    <div className=\"\">\n                      <p className=\"profile__name\">\n                        {`${user.firstName} ${user.middleName || ''} ${user.lastName}`}\n                      </p>\n                      <p className=\"profile__work\">{user.phone}</p>\n                      <p className=\"profile__contact\">{user.email}</p>\n                      <Button\n                        color=\"primary\"\n                        className=\"icon profile__btn\"\n                        onClick={() => dispatch(logout(history.push))}\n                      >\n                        Sign Out\n                      </Button>\n                    </div>\n                  </div>\n                  {\n                    orders &&\n                    <div className=\"profile__stats\">\n                      <div className=\"profile__stat\">\n                        <p className=\"profile__stat-number\">{Object.values(orders).length}</p>\n                        <p className=\"profile__stat-title\">Orders</p>\n                      </div>\n                    </div>\n                  }\n                </CardBody>\n              </Card>\n            </Col>\n            <Col md={12} lg={12} xl={8}>\n              <Card>\n                <div className=\"profile__card tabs tabs--bordered-bottom\">\n                  <div className=\"tabs__wrap\">\n                    <Nav tabs>\n                      <NavItem>\n                        <NavLink\n                          className={classnames({ active: activeTab === 'profile' })}\n                          onClick={() => setActiveTab('profile')}\n                        >\n                          Profile\n                        </NavLink>\n                      </NavItem>\n                      <NavItem>\n                        <NavLink\n                          className={classnames({ active: activeTab === 'address-book' })}\n                          onClick={() => setActiveTab('address-book')}\n                        >\n                          Address Book\n                        </NavLink>\n                      </NavItem>\n                      <NavItem>\n                        <NavLink\n                          className={classnames({ active: activeTab === 'orders' })}\n                          onClick={() => setActiveTab('orders')}\n                        >\n                          Orders\n                        </NavLink>\n                      </NavItem>\n                      <NavItem>\n                        <NavLink\n                          className={classnames({ active: activeTab === 'password' })}\n                          onClick={() => setActiveTab('password')}\n                        >\n                          Password\n                        </NavLink>\n                      </NavItem>\n                    </Nav>\n                    <TabContent activeTab={activeTab}>\n                      <TabPane tabId=\"profile\">\n                        <ProfileSettings initialValues={user}/>\n                      </TabPane>\n                      <TabPane tabId=\"address-book\">\n                        <Row>\n                          <Col md={12}>\n                            <Button color=\"primary\" onClick={() => history.push('/account/address-book/new')}>\n                              Add Address\n                            </Button>\n                            {\n                              (user.addresses == null || user.addresses.length === 0) &&\n                              <Empty description=\"You haven't registered any addresses yet.\"/>\n                            }\n                          </Col>\n                          {\n                            user.addresses && user.addresses.map((address) =>\n                              <Col md={4} sm={6} key={address.id}>\n                                <Card>\n                                  <CardBody>\n                                    <AddressCard address={address} user={user}/>\n                                    {\n                                      (user.addresses.length === 1 || address.isShippingDefault) &&\n                                      <div className=\"address-display__default\">\n                                        <Badge color=\"info\">Shipping Default</Badge>\n                                      </div>\n                                    }\n                                    {\n                                      (user.addresses.length === 1 || address.isBillingDefault) &&\n                                      <div className=\"address-display__default\">\n                                        <Badge color=\"success\">Billing Default</Badge>\n                                      </div>\n                                    }\n                                    <UncontrolledDropdown>\n                                      <DropdownToggle className=\"icon icon--right btn-sm address-options-btn\" outline>\n                                        <p>Options <ChevronDownIcon/></p>\n                                      </DropdownToggle>\n                                      <DropdownMenu className=\"dropdown__menu\">\n                                        <DropdownItem\n                                          onClick={() => history.push(`/account/address-book/edit/${address.id}`)}>\n                                          Edit\n                                        </DropdownItem>\n                                        <DropdownItem onClick={() => onSetDefaultBilling(address)}>\n                                          Set as billing default\n                                        </DropdownItem>\n                                        <DropdownItem onClick={() => onSetDefaultShipping(address)}>\n                                          Set as shipping default\n                                        </DropdownItem>\n                                        <DropdownItem divider/>\n                                        <DropdownItem onClick={() => onRemoveAddress(address.id)}>\n                                          Remove\n                                        </DropdownItem>\n                                      </DropdownMenu>\n                                    </UncontrolledDropdown>\n                                  </CardBody>\n                                </Card>\n                              </Col>\n                            )\n                          }\n                        </Row>\n                      </TabPane>\n                      <TabPane tabId='orders'>\n                        <OrdersList/>\n                      </TabPane>\n                      <TabPane tabId=\"password\">\n                        <ChangePasswordForm/>\n                      </TabPane>\n                    </TabContent>\n                  </div>\n                </div>\n              </Card>\n            </Col>\n          </Row>\n        </div>\n      </Container>\n    </Layout>\n  );\n\n  function onRemoveAddress(addressId) {\n    dispatch(removeAddress(addressId));\n  }\n\n  function onSetDefaultBilling(address) {\n    const nextAddress = { ...address, isBillingDefault: true };\n    onUpdateAddressDefaults(nextAddress);\n  }\n\n  function onSetDefaultShipping(address) {\n    const nextAddress = { ...address, isShippingDefault: true };\n    onUpdateAddressDefaults(nextAddress);\n  }\n\n  function onUpdateAddressDefaults(address) {\n    dispatch(setAddressDefaults(address));\n  }\n\n}\n\nexport default authorized(Account);\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useContext } from 'react';\n\n// import invariant from 'tiny-invariant';\nimport hoistStatics from 'hoist-non-react-statics';\n\nimport { __RouterContext } from 'react-router';\nimport { useUser } from '../../util/component';\nimport Spinner from './Spinner';\n\nexport default function authorized(Component) {\n\n  const displayName = `authorized(${Component.displayName || Component.name})`;\n  const C = props => {\n\n    const { history, location } = useContext(__RouterContext);\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    const user = useUser({\n      redirect: location.pathname,\n      onMissing: () => setTimeout(() => history.push('/login'))\n    });\n\n    if (user)\n      return (\n        <Component\n          {...remainingProps}\n          ref={wrappedComponentRef}\n          user={user}\n        />\n      );\n    else\n      return null;\n\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n\n  return hoistStatics(C, Component);\n\n}\n\nexport function awaitRequirements(Component, { requirements, onMissing }) {\n\n  const displayName = `awaitRequirements(${Component.displayName || Component.name})`;\n  const C = props => {\n\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    const reqs = {};\n    const missing = [];\n    Object.entries(requirements).forEach(([key, getter]) => {\n      reqs[key] = getter();\n      if (reqs[key] == null) {\n        missing.push(key);\n      }\n    });\n\n    onMissing && onMissing(missing);\n\n    if (missing.length > 0) {\n      return <Spinner/>;\n    } else {\n      return (\n        <Component\n          ref={wrappedComponentRef}\n          {...remainingProps}\n          {...reqs}\n        />\n      );\n    }\n\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n\n  return hoistStatics(C, Component);\n\n}\n\n// Example\n// export default awaitRequirements(LogIn, {\n//   ['onMissing']: (reqs) => {\n//     const dispatch = useDispatch();\n//     useEffect(\n//       () => {\n//         if (reqs.length)\n//           dispatch(fetchGraph(['header']));\n//       },\n//       []\n//     );\n//   },\n//   requirements: {\n//     ['header']: () => useHeader()\n//   }\n// });\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport Layout from './Layout';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Button, ButtonToolbar, Card, CardBody, Col, Container, Row } from 'reactstrap';\nimport { LogInForm } from './LogIn';\nimport { getLoginFormDefaults, useCart, useProductsBranch, useUser } from '../../util/component';\nimport { CartSummary, OrderTotals } from './CartBody';\nimport CreditCardIcon from 'mdi-react/CreditCardIcon';\nimport { RadioButton } from '../shared/form/RadioButton';\nimport { AddressSelection } from './AddressCard';\nimport Spinner from '../shared/Spinner';\nimport { money } from '../../util/string';\nimport { Empty } from '../shared/Empty';\nimport { useDispatch } from 'react-redux';\nimport {\n  checkout, UPDATE_CART,\n  updateCart\n} from '../../redux/actions/productsActions';\n\nfunction address(cart, user, type) {\n  if (cart == null || user == null) {\n    return;\n  }\n  const cartAddress = cart[type === 'shipping' ? 'shippingAddress' : 'billingAddress'];\n  if (cartAddress == null || user.addresses == null) {\n    return;\n  }\n  const address = user.addresses.find((_address_) =>\n    _address_.streetAddressLineOne === cartAddress.streetAddressLineOne\n  );\n  return address ? address.id : undefined;\n}\n\nfunction ShippingSelection({ onChange, selectedValue, items }) {\n  return (\n    <div className=\"form__form-group shipping-method-selection\">\n      <div className=\"form__form-group-field cart__delivery-field\">\n        {items ? items.map((item) =>\n          <div className=\"cart__delivery\" key={item.id}>\n            <RadioButton\n              label={item.name}\n              name=\"shippingMethod\"\n              value={item.id}\n              currentValue={selectedValue}\n              onChange={() => onChange(item.id)}\n            />\n            <p className=\"cart__delivery-time\">{item.description}</p>\n            <p className=\"cart__delivery-price\">{money(item.price, item.currency)}</p>\n          </div>\n        ) : (\n          <Empty description=\"Shipping is not available for your location. :(\"/>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction CreditCardForm({ cardNumber, cvc, expirationDate, nameOnCard, onChange }) {\n  return (\n    <form className=\"form payment__credit-cards\">\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Card number</span>\n        <div className=\"form__form-group-field\">\n          <div className=\"form__form-group-icon\">\n            <CreditCardIcon/>\n          </div>\n          <input\n            type=\"text\"\n            name=\"cardNumber\"\n            value={cardNumber}\n            onChange={onChange}\n            placeholder=\"xxxx-xxxx-xxxx-xxxx\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group-date-cvc\">\n        <div className=\"form__form-group form__form-group-date\">\n          <span className=\"form__form-group-label\">Expiration Date</span>\n          <div className=\"form__form-group-field\">\n            <input\n              type=\"month\"\n              name=\"expirationDate\"\n              placeholder=\"MM/YY\"\n              min=\"2019-07\"\n              value={expirationDate}\n              onChange={onChange}\n            />\n          </div>\n        </div>\n        <div className=\"form__form-group form__form-group-cvc\">\n          <span className=\"form__form-group-label\">CVC</span>\n          <div className=\"form__form-group-field\">\n            <input\n              type=\"number\"\n              name=\"cvc\"\n              minLength={3}\n              maxLength={4}\n              value={cvc}\n              onChange={onChange}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Cardholder name</span>\n        <div className=\"form__form-group-field\">\n          <input\n            type=\"text\"\n            name=\"nameOnCard\"\n            placeholder=\"Name and Surname\"\n            value={nameOnCard}\n            onChange={onChange}\n          />\n        </div>\n      </div>\n    </form>\n  );\n}\n\nfunction CheckoutView({ history }) {\n\n  const dispatch = useDispatch();\n  const { loading } = useProductsBranch();\n  const user = useUser({ redirect: '/checkout' });\n  const cart = useCart({ onEmpty: () => history.push('/cart') });\n  const [card, setState] = useState({\n    cvc: '',\n    nameOnCard: '',\n    cardNumber: '',\n    expirationDate: '',\n  });\n\n  const [shippingAddress, setShippingAddress] = useState();\n  const [billingAddress, setBillingAddress] = useState();\n  const [shippingMethod, setShippingMethod] = useState();\n\n  const onCardDataEntry = (e) => {\n    const { value, name } = e.target;\n    setState({ ...card, [name]: value });\n  };\n\n  const onAddressSelection = (value, type) => {\n    (type === 'shipping' ? setShippingAddress : setBillingAddress)(value);\n  };\n\n  useEffect(\n    () => {\n\n      const shipping = address(cart, user, 'shipping');\n      const billing = address(cart, user, 'billing');\n      const method = (cart || {}).shippingMethod;\n\n      shipping && (shipping !== shippingAddress) && setShippingAddress(shipping);\n      billing && (billing !== billingAddress) && setBillingAddress(billing);\n      method && (method !== shippingMethod) && setShippingMethod(method);\n\n    },\n    [user, cart, shippingAddress, billingAddress, shippingMethod]\n  );\n\n  useEffect(\n    () => {\n      if (cart) {\n\n        const\n          shippingCondition = (!!shippingAddress && shippingAddress !== address(cart, user, 'shipping')),\n          billingCondition = (!!billingAddress && billingAddress !== address(cart, user, 'billing')),\n          methodCondition = (!!shippingMethod && cart.shippingMethod !== shippingMethod);\n\n        if (\n          shippingCondition ||\n          billingCondition ||\n          methodCondition\n        ) {\n          dispatch(updateCart({\n            ...shippingCondition ? { shippingAddress } : {},\n            ...billingCondition ? { billingAddress } : {},\n            ...methodCondition ? { shippingMethod } : {}\n          }));\n        }\n\n      }\n\n    },\n    [dispatch, user, cart, shippingAddress, billingAddress, shippingMethod]\n  );\n\n  const checkoutDisabled = useMemo(\n    () => !(\n      shippingAddress &&\n      billingAddress &&\n      shippingMethod &&\n      card.cvc &&\n      card.nameOnCard &&\n      card.cardNumber &&\n      card.expirationDate\n    ),\n    [shippingAddress, billingAddress, shippingMethod, card]\n  );\n\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          {(cart == null) ? <Col md={12}><Spinner contained/></Col> : (user == null) ? <>\n\n            <Col md={12} lg={12}>\n              <Card>\n                <CardBody>\n                  <div className=\"text-center\">\n                    <h1 className=\"page-title\">Checkout</h1>\n                    <p className=\"page-subhead subhead\">\n                      In order to checkout please sign in or create an account if you don't have one.\n                    </p>\n                    <div className=\"payment-view__login\">\n                      <LogInForm initialValues={getLoginFormDefaults()}/>\n                    </div>\n                  </div>\n                </CardBody>\n              </Card>\n            </Col>\n\n          </> : <>\n\n            <Col md={9}>\n              <Card>\n                <CardBody>\n\n                  <div className=\"card__title\">\n                    <h1 className=\"bold-text\">Checkout</h1>\n                  </div>\n                  <div className=\"payment\">\n                    <fieldset className=\"payment__checkout-section\">\n                      <legend>Shipping Address</legend>\n                      <AddressSelection\n                        returnUrl=\"/checkout\"\n                        name=\"shippingAddress\"\n                        currentValue={shippingAddress}\n                        onChange={(value) => onAddressSelection(value, 'shipping')}\n                      />\n                    </fieldset>\n                    <fieldset className=\"payment__checkout-section\">\n                      <legend>Billing Address</legend>\n                      <AddressSelection\n                        returnUrl=\"/checkout\"\n                        name=\"billingAddress\"\n                        currentValue={billingAddress}\n                        onChange={(value) => onAddressSelection(value, 'billing')}\n                      />\n                    </fieldset>\n                    <fieldset className=\"payment__checkout-section\">\n                      <legend>Shipping Method</legend>\n                      {\n                        loading[UPDATE_CART] ? <Spinner small/> : cart.shippingMethods ? (\n                          <ShippingSelection\n                            items={cart.shippingMethods}\n                            selectedValue={shippingMethod}\n                            onChange={(value) => setShippingMethod(value)}\n                          />\n                        ) : <Empty description=\"Select shipping address to view available shipping methods\"/>\n                      }\n                    </fieldset>\n                    <fieldset className=\"payment__checkout-section\">\n                      <legend>Payment Method</legend>\n                      <CreditCardForm {...card} onChange={onCardDataEntry}/>\n                    </fieldset>\n                  </div>\n\n                </CardBody>\n              </Card>\n            </Col>\n\n            <Col md={3}>\n              <CartSummary/>\n              <OrderTotals/>\n              <ButtonToolbar className=\"form__button-toolbar\">\n                <Button\n                  type=\"button\"\n                  color=\"primary\"\n                  onClick={onCheckout}\n                  disabled={checkoutDisabled}\n                  className=\"payment__complete-purchase-btn\"\n                >\n                  Complete Purchase\n                </Button>\n              </ButtonToolbar>\n            </Col>\n\n          </>}\n        </Row>\n      </Container>\n    </Layout>\n  );\n\n  function onCheckout() {\n    dispatch(checkout({ card, shippingMethod, shippingAddress, billingAddress }, history.push));\n  }\n\n}\n\nexport default CheckoutView;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Badge, Card, CardBody, Col, Container, Row, Table } from 'reactstrap';\n\nimport Layout from './Layout';\nimport { useOrder } from '../../util/component';\nimport Spinner from '../shared/Spinner';\nimport { Link } from 'react-router-dom';\nimport { capitalize, money } from '../../util/string';\n\n\nfunction OrderDetails(props) {\n\n  const id = props.match.params.id;\n  const order = useOrder(id);\n\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          <Col md={9}>\n\n            <Card>\n              <CardBody>\n                <h1 className=\"page-title\">\n                  {`Order # ${id} - Details`}\n                </h1>\n\n                {order == null ? <Spinner contained/> : <>\n\n                  <Table className=\"table--bordered cart__table\" responsive>\n                    <thead>\n                    <tr>\n                      <th>Product</th>\n                      <th>Quantity</th>\n                      <th>Price</th>\n                      <th>Total</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {\n                      order.items && order.items.map((item) => (\n                        <tr key={item.id}>\n                          <td>\n                            <span className=\"cart__preview-img\">\n                              <img src={item.images[0].url} alt=\"product_preview\"/>\n                            </span>\n                            <Link\n                              className=\"cart__product-name\"\n                              to={`/catalog/${item.productId}`}\n                            >\n                              {item.productName}\n                            </Link>\n                          </td>\n                          <td>{item.quantity}</td>\n                          <td>{money(item.unitPrice, order.currency)}</td>\n                          <td>{money(item.totalPrice, order.currency)}</td>\n                        </tr>\n                      ))\n                    }\n                    </tbody>\n                  </Table>\n\n                </>}\n\n              </CardBody>\n            </Card>\n          </Col>\n          <Col md={3}>\n            {\n              order && order.items && <>\n\n                <table className=\"table\">\n                  <tbody>\n                  <tr>\n                    <th>Order Status</th>\n                    <td>\n                      <Badge color={['OPEN', 'CONFIRMED', 'COMPLETE'].includes(order.orderStatus) ? 'success' : 'warning'}>\n                        {capitalize(order.orderStatus)}\n                      </Badge>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>Payment Status</th>\n                    <td>\n                      <Badge color={order.paymentStatus === 'COMPLETE' ? 'success' : 'warning'}>\n                        {capitalize(order.paymentStatus || 'Pending')}\n                      </Badge>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>Shipping Status</th>\n                    <td>\n                      <Badge color={order.shippingStatus === 'COMPLETE' ? 'success' : 'warning'}>\n                        {capitalize(order.shippingStatus || 'Pending')}\n                      </Badge>\n                    </td>\n                  </tr>\n                  </tbody>\n                </table>\n\n                <div className=\"order-details__body\">\n                  <table className=\"order-details__table\">\n                    <tbody>\n                    <tr>\n                      <th className=\"order-details__th\">Products</th>\n                      <td className=\"order-details__td\">{money(order.items.reduce((sum, item) => (sum + item.totalPrice), 0), order.currency)}</td>\n                    </tr>\n                    <tr>\n                      <th className=\"order-details__th\">Shipping</th>\n                      <td className=\"order-details__td\">{money(order.shippingPrice, order.currency)}</td>\n                    </tr>\n                    <tr>\n                      <th className=\"order-details__th\">Sub Total</th>\n                      <td className=\"order-details__td\">{money(order.totalPrice, order.currency)}</td>\n                    </tr>\n                    <tr>\n                      <th className=\"order-details__th\">Tax</th>\n                      <td className=\"order-details__td\">{money(order.taxedPrice - order.totalPrice, order.currency)}</td>\n                    </tr>\n                    <tr>\n                      <th className=\"order-details__th\">Total</th>\n                      <td className=\"order-details__td\">{money(order.taxedPrice, order.currency)}</td>\n                    </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </>\n            }\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nexport default OrderDetails;\n\n// Payment:\n// BALANCE_DUE\n// PENDING\n// PAID\n// CREDIT_OWED\n// FAILED\n//\n// Shipping:\n// READY\n// PENDING\n// PARTIAL\n// DELAYED\n// SHIPPED\n// BACK_ORDER\n//\n// Order:\n// OPEN\n// CONFIRMED\n// COMPLETE\n// CANCELLED\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Layout from './Layout';\nimport { Container, Row, Col, Card } from 'reactstrap';\nimport { useContentBranch } from '../../util/component';\nimport { loader } from 'graphql.macro';\nimport { ajax } from 'rxjs/ajax';\nimport { map, catchError } from 'rxjs/operators';\nimport { BlogPostCard } from './BlogTeaser';\nimport Spinner from '../shared/Spinner';\nimport { Empty } from '../shared/Empty';\nimport * as qs from 'query-string';\nimport KeyboardArrowLeftIcon from 'mdi-react/KeyboardArrowLeftIcon';\nimport { Link } from 'react-router-dom';\n\nconst query = loader('../../queries/Blog.graphql').loc.source.body;\n\nexport default function BlogRoll(props) {\n\n  const content = useContentBranch();\n  const [roll, setRoll] = useState();\n  const selectedCategory = qs.parse(props.location.search).category;\n\n  useEffect(\n    () => {\n      let sub = { unsubscribe: () => void null };\n      if (!!content.nav) {\n        const navItem = content.nav.find(item => props.location.pathname === item.url);\n        sub = ajax.post(\n          process.env.REACT_APP_GRAPHQL_SERVER,\n          { query, variables: { id: navItem.localId } },\n          { 'Content-Type': 'application/json; charset=UTF-8' }\n        ).pipe(\n          map(({ response }) => response.data),\n          catchError(({ response }) => [response])\n        ).subscribe((response) => {\n          setRoll({\n            blog: response.blog.items[0],\n            posts: response.post.items,\n            categories: response.categories.items[0].items.item\n          });\n        })\n      }\n      return () => sub.unsubscribe()\n    },\n    [content.nav, props.location.pathname]\n  );\n\n  if (!roll) {\n    return (\n      <Layout>\n        <Container>\n          <Row>\n            <Col md={12}>\n              <Spinner contained/>\n            </Col>\n          </Row>\n        </Container>\n      </Layout>\n    );\n  }\n\n  const posts = selectedCategory\n    ? roll.posts.filter(\n      ({categories_o}) => categories_o.item.some(i => i.key === selectedCategory)\n    )\n    : roll.posts;\n\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          <Col md={12}>\n            <h1 className=\"page-title\">{roll.blog.title_s}</h1>\n          </Col>\n          <Col md={9}>\n            <Row>\n              {\n                posts.length === 0 && <Col sm={12}>\n                  <Card style={{ background: '#fff' }}>\n                    <Empty description=\"There are no posts at this time. Please check back often :)\"/>\n                  </Card>\n                </Col>\n              }\n              {\n                posts.map((post) =>\n                  <Col key={post.localId} xl={4} lg={6}>\n                    <BlogPostCard {...post} hideSummary/>\n                  </Col>\n                )\n              }\n            </Row>\n          </Col>\n          <Col md={3}>\n            <CategoryListing\n              categories={roll.categories}\n              selected={selectedCategory}\n            />\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nexport function CategoryListing(props) {\n  const { categories, selected } = props;\n  return (\n    categories && categories.length > 0 ? <div className=\"blog__sidebar-bar-block\">\n      <h2 className=\"blog__side-bar-title\">Categories</h2>\n      <nav className=\"blog__side-bar-list\">\n        {\n          selected\n            ? <>\n              <div>Viewing `{categories.find(({key}) => key === selected).value}`</div>\n              <Link to={`/blog`}>\n                <KeyboardArrowLeftIcon/> clear\n              </Link>\n            </>\n            : categories.map(({ key, value }) =>\n              <Link\n                key={key}\n                to={`/blog?category=${key}`}\n                className=\"blog__side-bar-item\"\n              >\n                {value}\n              </Link>\n            )\n        }\n      </nav>\n    </div> : <></>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Layout from './Layout';\nimport { Container, Row, Col, Card, CardBody } from 'reactstrap';\nimport { CategoryListing } from './BlogRoll';\nimport { Link } from 'react-router-dom';\nimport { ajax } from 'rxjs/ajax';\nimport { catchError, map } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport { useICE } from '../../util/component';\nimport { getProducts, useProductsQuery } from '../../util/products';\n\nexport default function BlogEntry(props) {\n  const slug = props.match.params.slug;\n  return <Layout\n    requirements={[\n      {\n        name: 'categories',\n        optional: true,\n        getter: (content) => content.categories ? Object.values(content.categories.byId) : null\n      },\n      { name: 'post', getter: (content) => content.post && content.post.bySlug[slug] }\n    ]}\n    variables={{\n      post: [\n        { name: 'ageGroup', type: 'String', value: null },\n        { name: 'gender', type: 'String', value: null },\n        { name: 'slug', type: 'String', value: slug },\n        { name: 'limit', type: 'Int', value: 1 }\n      ]\n    }}\n    render={\n      (reqs) => (\n        <Container>\n          <Row>\n            <Col md={9}>\n              <Card>\n                <CardBody>\n                  <Post post={reqs.post}/>\n                </CardBody>\n              </Card>\n            </Col>\n            <Col md={3}>\n\n              <CategoryListing categories={reqs.categories}/>\n\n              <RelatedPosts categories={reqs.post.categories_o.item} slug={slug}/>\n              <RelatedProducts categories={reqs.post.categories_o.item}/>\n\n            </Col>\n          </Row>\n        </Container>\n      )\n    }\n  />;\n}\n\nfunction Post({ post }) {\n  const { title_s, image_s, author_s, subtitle_s, content_html_raw, categories_o, localId } = post;\n  const { props: ice } = useICE({ modelId: localId, label: `Blog Post: ${title_s}` });\n  return (\n    <>\n      <section className=\"post__head\" {...ice}>\n        <h1 className=\"post__title\">{title_s}</h1>\n        {subtitle_s && <p className=\"post__subtitle\">{subtitle_s}</p>}\n        {author_s && <p className=\"post__author\">By {author_s}</p>}\n      </section>\n      {image_s && <img className=\"post__image\" src={image_s} alt=\"\"/>}\n      <div className=\"post__body\" dangerouslySetInnerHTML={{ __html: content_html_raw }}/>\n      <div className=\"post__categories\">{categories_o.item.map((item) => item.value_smv).join(', ')}</div>\n    </>\n  );\n}\n\nfunction RelatedPosts({ categories, slug }) {\n  const [relatedPosts, setRelatedPosts] = useState();\n  useEffect(\n    () => {\n      ajax.post(\n        process.env.REACT_APP_GRAPHQL_SERVER,\n        {\n          query: `query {\n            posts: component_post (limit: 3, sortOrder: ASC, sortBy: \"title_s\") {\n              items {\n                title_s\n                image_s\n                slug_s(filter: { not: [{ equals: \"${slug}\" }]})\n                categories_o @skip(if: true) {\n                  item {\n                    key(filter: {matches: \"${categories[0].key}\"})\n                  }\n                }\n              }\n            }\n          }`\n        },\n        { 'Content-Type': 'application/json; charset=UTF-8' }\n      ).pipe(\n        map(({ response }) => (response.data.posts.items)),\n        catchError((response) => of(response)),\n      ).subscribe(posts => setRelatedPosts(posts));\n    },\n    [slug, categories]\n  );\n  return (\n    relatedPosts ? <div className=\"blog__sidebar-bar-block\">\n      <h2 className=\"blog__side-bar-title\">Related Posts</h2>\n      <nav className=\"blog__side-bar-list\">\n        {\n          relatedPosts.map(({ title_s, image_s, slug_s }) =>\n            <Link key={slug_s} className=\"blog__side-bar-item\" to={`/blog/${slug_s}`}>\n              <img src={image_s} alt=\"\"/>\n              <h3 className=\"blog__related-post-title\">{title_s}</h3>\n            </Link>\n          )\n        }\n      </nav>\n    </div> : <></>\n  );\n}\n\nfunction RelatedProducts({ categories }) {\n  const [items, setItems] = useState();\n  const params = useProductsQuery();\n  useEffect(\n    () => {\n      getProducts({ limit: 3, offset: Math.floor(Math.random() * 11), ...params })\n        .subscribe(({ response }) => setItems(response.items));\n    },\n    // TODO: adding params is creating a loop\n    // eslint-disable-next-line\n    [categories, params.locale, params.currency]\n  );\n  return (\n    items ? <div className=\"blog__sidebar-bar-block\">\n      <h2 className=\"blog__side-bar-title\">Related Products</h2>\n      <nav className=\"blog__side-bar-list\">\n        {\n          items.map(({ id, variants, name }) =>\n            <Link key={id} className=\"blog__side-bar-item blog__side-bar-item--horizontal\" to={`/catalog/${id}`}>\n              <img className=\"blog__side-bar-item-image\" src={variants[0].images[0].url} alt=\"\"/>\n              <h3 className=\"blog__related-post-title\">{name}</h3>\n            </Link>\n          )\n        }\n      </nav>\n    </div> : <></>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Layout from './Layout';\nimport { Badge, Card, CardBody, Col, Container, Row } from 'reactstrap';\nimport * as qs from 'query-string';\n\nimport { SearchService } from '@craftercms/search';\n\nimport MagnifyIcon from 'mdi-react/MagnifyIcon';\nimport { Empty } from '../shared/Empty';\nimport { Link } from 'react-router-dom';\nimport { capitalize } from '../../util/string';\nimport { crafterConf, getQuery } from '../../util/component';\nimport { getProducts, useProductsQuery } from '../../util/products';\n\nconst\n  ARTICLE = 'ARTICLE',\n  PRODUCT = 'PRODUCT';\n\nexport default function Search(props) {\n\n  const { q: query } = { q: '', ...qs.parse(props.location.search) };\n  const [value, setValue] = useState(query);\n\n  const [productResults, setProductResults] = useState();\n  const [contentResults, setContentResults] = useState();\n\n  const productsQueryParams = useProductsQuery({ q: query, limit: 10, offset: 0 });\n\n  useEffect(\n    () => {\n      if (query) {\n\n\n        SearchService.search(getQuery(query), crafterConf).subscribe((content) => {\n          setContentResults({\n            total: Number.isInteger(content.total) ?  content.total : content.total.value,\n            articles: content.hits.map(item => item._source)\n          });\n        });\n\n        getProducts(productsQueryParams).subscribe(({ response: catalog }) => {\n          setProductResults({\n            total: catalog.total,\n            products: catalog.items\n          });\n        });\n\n        setValue(query);\n\n      }\n    },\n    // TODO: adding productsQueryParams is creating a loop\n    // eslint-disable-next-line\n    [query, productsQueryParams.locale, productsQueryParams.currency]\n  );\n\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          <Col md={9}>\n            <Card>\n              <CardBody>\n                <div className=\"card__title\">\n                  <h1 className=\"bold-text\">Search</h1>\n                </div>\n                <form\n                  className=\"form\"\n                  onSubmit={(e) => {\n                    e.preventDefault();\n                    props.history.push(`/search?q=${value}`);\n                  }}\n                >\n                  <div className=\"form__form-group\">\n                    <div className=\"form__form-group-field\">\n                      <input name=\"q\" type=\"text\" placeholder=\"Search...\" value={value}\n                             onChange={(e) => setValue(e.target.value)}/>\n                      <button className=\"form__form-group-icon\">\n                        <MagnifyIcon/>\n                      </button>\n                    </div>\n                  </div>\n                </form>\n                {\n                  !query &&\n                  <Empty description=\"Please enter your search query to perform a search.\"/>\n                }\n                {\n                  contentResults && <>\n                    <h4>{`Search result for \"${query}\"`}</h4>\n                    <p className=\"subhead\">Found {contentResults.total} results.</p>\n                    <div>\n                      {\n                        contentResults.total === 0\n                          ? <Empty description=\"No results where found for your query.\"/>\n                          : contentResults.articles.map((item) =>\n                            <SearchResult\n                              key={item.objectId}\n                              type={ARTICLE}\n                              item={item}\n                            />\n                          )\n                      }\n                    </div>\n                  </>\n                }\n              </CardBody>\n            </Card>\n          </Col>\n          <Col md={3}>\n            {\n              productResults ?\n                productResults.total === 0\n                  ? 'No products matched your search'\n                  : <>\n                    <p className=\"subhead\">Products related to your search.</p>\n                    <div>\n                      {\n                        productResults.products.map((item) => <SearchResult\n                          key={item.id}\n                          type={PRODUCT}\n                          item={item}\n                        />)\n                      }\n                    </div>\n                  </>\n                : null\n            }\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nexport function SearchResult(props) {\n  const { type, item } = props;\n  const\n    title = item[type === ARTICLE ? 'title_s' : 'name'],\n    link = type === ARTICLE ? `/blog/${item.slug_s}` : `/catalog/${item.id}`,\n    preview = type === PRODUCT ? item.description : item.content_html.substr(0, 100),\n    img = type === PRODUCT ? item.variants[0].images[0].url : item.image_s;\n  return (\n    <div className=\"search-result\">\n      <Link to={link}>\n        <img className=\"search-result__img\" src={img} alt=\"\"/>\n      </Link>\n      <div className=\"search-result__content\">\n        <Link className=\"search-result__title\" to={link}>{title}</Link>\n        {type === PRODUCT ? null : <p className=\"search-result__preview\">{preview}</p>}\n        <Badge color=\"info\">{capitalize(type.toLowerCase())}</Badge>\n      </div>\n    </div>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useContext, useEffect } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport ProductListing from './app/ProductsListing';\nimport ProductDetails from './app/ProductDetails';\n\nimport LogIn from './app/LogIn';\nimport Register from './app/Register';\nimport Home from './app/Home';\nimport NotFound404 from './app/NotFoundView';\nimport CartView from './app/CartView';\nimport Account from './app/Account';\nimport CheckoutView from './app/CheckoutView';\nimport { AddressEntry } from './app/AddressCard';\nimport OrderDetails from './app/OrderDetails';\nimport BlogRoll from './app/BlogRoll';\nimport BlogEntry from './app/BlogEntry';\nimport Search from './app/Search';\nimport { __RouterContext } from 'react-router';\nimport { useSelector } from 'react-redux';\n\nconst Routes = () => {\n\n  const { history } = useContext(__RouterContext);\n  const { isAuthoring } = useSelector(state => state.theme);\n\n  useEffect(\n    () => {\n      if (isAuthoring) {\n        return history.listen((location) => {\n          window.require &&\n          window.require(['guest'], (guest) => {\n            guest.reportNavigation(location, location.pathname);\n          });\n        });\n      }\n    },\n    [history, isAuthoring]\n  );\n\n  return (\n    <Switch>\n      <Route exact path=\"/\" component={Home}/>\n      <Route exact path=\"/catalog\" component={ProductListing}/>\n      <Route path=\"/catalog/:product\" component={ProductDetails}/>\n      <Route path=\"/cart\" component={CartView}/>\n      <Route path=\"/checkout\" component={CheckoutView}/>\n      <Route exact path=\"/account/address-book/new\" component={AddressEntry}/>\n      <Route exact path=\"/account/address-book/edit/:id?\" component={AddressEntry}/>\n      <Route exact path=\"/account/orders/:id\" component={OrderDetails}/>\n      <Route path=\"/account/:tab?\" component={Account}/>\n      <Route exact path=\"/blog\" component={BlogRoll}/>\n      <Route path=\"/blog/:slug\" component={BlogEntry}/>\n      <Route path=\"/login\" component={LogIn}/>\n      <Route path=\"/register\" component={Register}/>\n      <Route path=\"/search\" component={Search}/>\n      <Route path=\"/\" component={NotFound404}/>\n    </Switch>\n  );\n};\n\nexport default Routes;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport {\n  CHANGE_THEME_TO_DARK,\n  CHANGE_THEME_TO_LIGHT,\n  SET_IS_AUTHORING,\n  CHANGE_BORDER_RADIUS,\n  TOGGLE_BOX_SHADOW,\n  TOGGLE_TOP_NAVIGATION\n} from '../actions/themeActions';\n\nconst initialState = {\n  isAuthoring: false,\n  className: 'theme-light',\n  squaredCorners: false,\n  withBoxShadow: false,\n  topNavigation: false,\n};\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case CHANGE_THEME_TO_DARK:\n      return { ...state, className: 'theme-dark' };\n    case CHANGE_THEME_TO_LIGHT:\n      return { ...state, className: 'theme-light' };\n    case SET_IS_AUTHORING:\n      return { ...state, isAuthoring: action.payload.isAuthoring };\n    case CHANGE_BORDER_RADIUS:\n      return { ...state, squaredCorners: !state.squaredCorners };\n    case TOGGLE_BOX_SHADOW:\n      return { ...state, withBoxShadow: !state.withBoxShadow };\n    case TOGGLE_TOP_NAVIGATION:\n      return { ...state, topNavigation: !state.topNavigation };\n    default:\n      return state;\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport function toLookupTable(array, prop = 'id') {\n  return array.reduce(\n    (table, item) => {\n      table[item[prop]] = item;\n      return table;\n    },\n    {}\n  )\n}\n\nexport function shuffle(source) {\n  let\n    array = [...source],\n    currentIndex = array.length,\n    temporaryValue,\n    randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { FETCH_GRAPH, FETCH_GRAPH_COMPLETE, FETCH_GRAPH_FAILED } from '../actions/contentActions';\nimport { byIdLoadingKey, removeProp } from '../../util/redux';\nimport { toLookupTable } from '../../util/array';\nimport { LOGIN_COMPLETE } from '../actions/usersActions';\n\nconst initialState = {\n  nav: null,\n  header: null,\n  home: null,\n  footer: null,\n  store: null,\n  post: null,\n  categories: null,\n  loading: {},\n  errors: {}\n};\n\nexport default function contentReducer(state = initialState, action) {\n  const { payload, type } = action;\n  switch (type) {\n    case LOGIN_COMPLETE: {\n      return {\n        ...state,\n        home: null,\n        loading: removeProp(state.loading, byIdLoadingKey(FETCH_GRAPH, 'home'))\n      }\n    }\n    case FETCH_GRAPH: {\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [FETCH_GRAPH]: true,\n          ...payload.requirements.reduce(\n            (table, req) => {\n              const key = byIdLoadingKey(FETCH_GRAPH, req);\n              table[key] = true;\n              return table;\n            },\n            {}\n          )\n        }\n      };\n    }\n    case FETCH_GRAPH_COMPLETE: {\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [FETCH_GRAPH]: false,\n          ...action.rootPayload.requirements.reduce(\n            (table, req) => {\n              const key = byIdLoadingKey(FETCH_GRAPH, req);\n              table[key] = false;\n              return table;\n            },\n            {}\n          )\n        },\n        nav: getNav(payload) || state.nav,\n        header: getHeader(payload) || state.header,\n        home: getHome(payload) || state.home,\n        footer: getFooter(payload) || state.footer,\n        post: getPosts(state.post, payload),\n        categories: getCategories(state.categories, payload),\n        errors: removeProp(state.errors, FETCH_GRAPH),\n        store: getStore(state.store, payload)\n      };\n    }\n    case FETCH_GRAPH_FAILED: {\n      return {\n        ...state,\n        loading: removeProp(\n          state.loading,\n          FETCH_GRAPH,\n          ...action.rootPayload.requirements.map(req => byIdLoadingKey(FETCH_GRAPH, req))\n        ),\n        errors: {\n          ...state.errors,\n          [FETCH_GRAPH]: payload.errors\n        }\n      }\n    }\n    default:\n      return state;\n  }\n}\n\nfunction getHeader(data) {\n  return data && data.header ? data.header.items[0] : null;\n}\n\nfunction getFooter(data) {\n  return data && data.footer ? data.footer.items[0] : null;\n}\n\nfunction getNav(data) {\n  return data && data.nav ? data.nav.items : null;\n}\n\nfunction getHome(data) {\n  if (!data || !data.home)\n    return null;\n\n  const posts = data.post && data.post.items.length > 0 ? data.post.items : [];\n  const sections = data.home.items[0].sections_o.item;\n\n  return sections\n    .map(({ component, key, value }) => ({\n      localId: key,\n      label: value,\n      ...component,\n      ...component.contentType === '/component/blog_teaser' ? { posts_o: posts } : {}\n    }))\n    .filter(\n      (component) => ![\n        '/component/header',\n        '/component/footer'\n      ].includes(component.contentType)\n    );\n\n}\n\nfunction getPosts(state, payload) {\n  const data = payload && payload.post ? payload.post : null;\n  if (!data || (!data && !state)) {\n    return state;\n  }\n  return {\n    bySlug: {\n      ...state ? state.bySlug : {},\n      ...toLookupTable(data.items, 'slug_s')\n    }\n  };\n}\n\nfunction getStore(state, payload) {\n  const data = payload && payload.store ? payload.store : null;\n  if (!data || (!data && !state)) {\n    return state;\n  }\n  return {\n    ...payload.store.settings\n  };\n}\n\nfunction getCategories(state, payload) {\n  const data = payload && payload.categories ? payload.categories : null;\n  if (!data || (!data && !state))\n    return state;\n  return {\n    byId: toLookupTable(payload.categories.items[0].items.item, 'key')\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport {\n  ADD_USER_ADDRESS,\n  ADD_USER_ADDRESS_COMPLETE,\n  ADD_USER_ADDRESS_FAILED,\n  EDIT_USER_ADDRESS,\n  EDIT_USER_ADDRESS_COMPLETE,\n  EDIT_USER_ADDRESS_FAILED, FETCH_ORDER, FETCH_ORDER_COMPLETE, FETCH_ORDER_FAILED,\n  FETCH_ORDERS,\n  FETCH_ORDERS_COMPLETE,\n  FETCH_ORDERS_FAILED, LOGIN,\n  LOGIN_COMPLETE,\n  LOGIN_FAILED,\n  LOGOUT_COMPLETE, REGISTRATION_COMPLETE,\n  REMOVE_USER_ADDRESS,\n  REMOVE_USER_ADDRESS_COMPLETE,\n  REMOVE_USER_ADDRESS_FAILED,\n  RESET_LOGIN_REDIRECT,\n  SET_LOGIN_REDIRECT, SET_PERSONA,\n  SET_USER_ADDRESS_DEFAULTS,\n  SET_USER_ADDRESS_DEFAULTS_COMPLETE,\n  SET_USER_ADDRESS_DEFAULTS_FAILED,\n  SUBMIT_REGISTRATION_FAILED\n} from '../actions/usersActions';\nimport { getRootType, removeProp } from '../../util/redux';\nimport { CHECKOUT_COMPLETE } from '../actions/productsActions';\nimport { toLookupTable } from '../../util/array';\n\nconst initialState = {\n  loading: {},\n  errors: {},\n  user: null,\n  orders: {},\n  persona: null,\n  loginRedirect: '/account',\n  registerConfirmPending: false\n};\n\nexport default function usersReducer(state = initialState, action) {\n  let { root, type, payload } = action;\n  if (!root) root = getRootType(type);\n  switch (type) {\n\n    case SET_PERSONA:\n      return {\n        ...state,\n        persona: payload.persona\n      };\n\n    case LOGIN:\n    case FETCH_ORDER:\n    case FETCH_ORDERS:\n    case ADD_USER_ADDRESS:\n    case EDIT_USER_ADDRESS:\n    case REMOVE_USER_ADDRESS:\n    case SET_USER_ADDRESS_DEFAULTS:\n      return {\n        ...state,\n        errors: removeProp(state.errors, type),\n        loading: {\n          ...state.loading,\n          [type]: true\n        }\n      };\n\n    case CHECKOUT_COMPLETE:\n    case FETCH_ORDER_COMPLETE:\n      return {\n        ...state,\n        orders: {\n          ...state.orders,\n          [payload.id]: payload\n        }\n      };\n\n    case LOGIN_COMPLETE:\n    case ADD_USER_ADDRESS_COMPLETE:\n    case EDIT_USER_ADDRESS_COMPLETE:\n    case REMOVE_USER_ADDRESS_COMPLETE:\n    case SET_USER_ADDRESS_DEFAULTS_COMPLETE:\n      return {\n        ...state,\n        persona: payload.attributes,\n        user: payload,\n        loading: {\n          ...state.loading,\n          [root]: false\n        }\n      };\n\n    case FETCH_ORDERS_COMPLETE:\n      return {\n        ...state,\n        errors: removeProp(state.errors, FETCH_ORDERS),\n        loading: {\n          ...state.loading,\n          [FETCH_ORDERS]: false\n        },\n        orders: toLookupTable(payload.items)\n      };\n\n    case LOGOUT_COMPLETE:\n      return {\n        ...state,\n        user: null\n      };\n\n    case LOGIN_FAILED:\n    case FETCH_ORDER_FAILED:\n    case ADD_USER_ADDRESS_FAILED:\n    case EDIT_USER_ADDRESS_FAILED:\n    case REMOVE_USER_ADDRESS_FAILED:\n    case SET_USER_ADDRESS_DEFAULTS_FAILED:\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [root]: false\n        },\n        errors: {\n          [root]: payload.message\n        }\n      };\n\n    case SUBMIT_REGISTRATION_FAILED:\n      return {\n        ...state,\n        errors: {\n          registration: payload.response.message\n        }\n      };\n    case FETCH_ORDERS_FAILED:\n      return payload.status === 403 ? {\n        ...state,\n        user: null\n      } : state;\n\n    case SET_LOGIN_REDIRECT:\n      return {\n        ...state,\n        loginRedirect: payload.url\n      };\n    case RESET_LOGIN_REDIRECT:\n      return {\n        ...state,\n        loginRedirect: initialState.loginRedirect\n      };\n\n    case REGISTRATION_COMPLETE:\n      return {\n        ...state,\n        registerConfirmPending: true\n      };\n\n    default:\n      return state;\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { LOGIN_COMPLETE } from '../actions/usersActions';\nimport {\n  ADD_TO_CART,\n  ADD_TO_CART_COMPLETE,\n  ADD_TO_CART_FAILED,\n  CHANGE_CURRENCY,\n  CHANGE_LOCALE,\n  CHECKOUT_COMPLETE,\n  FACETS_CHANGED,\n  FETCH_CART_COMPLETE,\n  FETCH_PRODUCT,\n  FETCH_PRODUCT_COMPLETE,\n  FETCH_PRODUCT_FAILED,\n  FETCH_PRODUCTS,\n  FETCH_PRODUCTS_COMPLETE,\n  FETCH_PRODUCTS_FAILED,\n  FETCH_SHIPPING_METHODS,\n  FETCH_SHIPPING_METHODS_COMPLETE,\n  FETCH_SHIPPING_METHODS_FAILED,\n  KEYWORDS_CHANGED, REMOVE_FROM_CART,\n  REMOVE_FROM_CART_COMPLETE, SET_STORE_SETTINGS,\n  UPDATE_CART,\n  UPDATE_CART_COMPLETE, UPDATE_CART_FAILED, UPDATE_CART_ITEM_QUANTITY,\n  UPDATE_CART_ITEM_QUANTITY_COMPLETE, UPDATE_CART_ITEM_QUANTITY_FAILED\n} from '../actions/productsActions';\nimport { toLookupTable } from '../../util/array';\nimport { byIdLoadingKey, getRootType, removeProp } from '../../util/redux';\nimport { FETCH_GRAPH_COMPLETE } from '../actions/contentActions';\nimport Cookies from 'js-cookie'\n\nconst initialState = {\n  byId: null,\n  cart: null,\n  facets: [],\n  loading: {},\n  errors: {},\n  query: {\n    offset: 0,\n    limit: 10,\n    locale: 'en',\n    currency: 'USD'\n  }\n};\n\nexport default function productReducer(state = initialState, action) {\n  let { root, type, payload } = action;\n  if (root == null) root = getRootType(type);\n  switch (type) {\n\n    case ADD_TO_CART:\n    case UPDATE_CART:\n    case REMOVE_FROM_CART:\n    case UPDATE_CART_ITEM_QUANTITY:\n      return {\n        ...state,\n        errors: removeProp(state.errors, type),\n        loading: {\n          ...state.loading,\n          [type]: true\n        }\n      };\n\n    case CHECKOUT_COMPLETE:\n      return {\n        ...state,\n        cart: null\n      };\n\n    case FETCH_PRODUCTS:\n      return {\n        ...state,\n        errors: removeProp(state.errors, FETCH_PRODUCTS),\n        loading: {\n          ...state.loading,\n          [FETCH_PRODUCTS]: true\n        },\n        query: payload.query\n          ? {\n            ...state.query,\n            ...payload.query\n          }\n          : state.query\n      };\n\n    case FETCH_PRODUCTS_COMPLETE:\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [FETCH_PRODUCTS]: false\n        },\n        query: {\n          ...state.query,\n          total: payload.total\n        },\n        byId: toLookupTable(payload.items),\n        facets: payload.facets\n      };\n\n    case CHANGE_LOCALE:\n    case CHANGE_CURRENCY: {\n      Cookies.set(type === CHANGE_LOCALE ? 'locale' : 'currency', payload.value);\n      return {\n        ...state,\n        query: {\n          ...state.query,\n          [type === CHANGE_LOCALE ? 'locale' : 'currency']: payload.value\n        }\n      }\n    }\n\n    case SET_STORE_SETTINGS: {\n      return {\n        ...state,\n        query: {\n          ...state.query,\n          ...payload\n        }\n      }\n    }\n\n    case FETCH_GRAPH_COMPLETE: {\n      // TODO: Enable optional chaining operator\n      if (payload && payload.store && payload.store.settings) {\n        return {\n          ...state,\n          query: {\n            ...state.query,\n            currency: Cookies.get('currency') || payload.store.settings.currencies[0],\n            locale: Cookies.get('locale') || payload.store.settings.locales[0]\n          }\n        };\n      } else {\n        return state;\n      }\n    }\n\n    case FETCH_PRODUCT:\n      return {\n        ...state,\n        errors: removeProp(state.errors, FETCH_PRODUCT),\n        loading: {\n          ...state.loading,\n          [byIdLoadingKey(root, payload.id)]: true\n        }\n      };\n\n    case FETCH_PRODUCT_COMPLETE:\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [byIdLoadingKey(root, payload.item.id)]: false\n        },\n        byId: {\n          ...state.byId,\n          [payload.item.id]: payload.item\n        }\n      };\n\n    case LOGIN_COMPLETE:\n      return payload.cart ? {\n        ...state,\n        cart: payload.cart\n      } : state;\n\n    case FETCH_CART_COMPLETE:\n    case UPDATE_CART_COMPLETE:\n    case ADD_TO_CART_COMPLETE:\n    case REMOVE_FROM_CART_COMPLETE:\n    case UPDATE_CART_ITEM_QUANTITY_COMPLETE:\n      return {\n        ...state,\n        cart: payload,\n        loading: {\n          ...state.loading,\n          [root]: false\n        }\n      };\n\n    case FACETS_CHANGED:\n      return {\n        ...state,\n        query: {\n          ...state.query,\n          ...payload.query\n        }\n      };\n\n    case KEYWORDS_CHANGED:\n      return {\n        ...state,\n        query: {\n          ...state.query,\n          keywords: payload.keywords\n        }\n      };\n\n    case FETCH_SHIPPING_METHODS:\n      return {\n        ...state,\n        errors: removeProp(state.errors, FETCH_SHIPPING_METHODS),\n        loading: {\n          ...state.loading,\n          [FETCH_SHIPPING_METHODS]: true\n        }\n      };\n\n    case FETCH_SHIPPING_METHODS_COMPLETE:\n      return {\n        ...state,\n        shippingMethods: payload,\n        loading: {\n          ...state.loading,\n          [FETCH_SHIPPING_METHODS]: false\n        }\n      };\n\n\n    case ADD_TO_CART_FAILED:\n    case UPDATE_CART_FAILED:\n    case FETCH_PRODUCT_FAILED:\n    case FETCH_PRODUCTS_FAILED:\n    case FETCH_SHIPPING_METHODS_FAILED:\n    case UPDATE_CART_ITEM_QUANTITY_FAILED:\n      return {\n        ...state,\n        errors: {\n          ...state.errors,\n          [root]: payload.message || payload.response.message\n        },\n        loading: {\n          ...state.loading,\n          [root]: false\n        }\n      };\n\n    default:\n      return state;\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { ofType } from 'redux-observable';\nimport {\n  LOGIN,\n  LOGOUT,\n  FETCH_ORDERS,\n  UNAUTHORIZED,\n  SUBMIT_REGISTRATION,\n  fetchOrdersComplete,\n  fetchOrdersFailed,\n  loginComplete,\n  loginFailed,\n  logoutComplete,\n  logoutFailed,\n  submitRegistrationComplete,\n  submitRegistrationFailed,\n  ADD_USER_ADDRESS,\n  addAddressComplete,\n  addAddressFailed,\n  EDIT_USER_ADDRESS,\n  editAddressComplete,\n  editAddressFailed,\n  REMOVE_USER_ADDRESS,\n  removeAddressFailed,\n  removeAddressComplete,\n  SET_USER_ADDRESS_DEFAULTS,\n  setAddressDefaultsComplete,\n  setAddressDefaultsFailed,\n  FETCH_ORDER,\n  fetchOrderFailed,\n  fetchOrderComplete\n} from '../actions/usersActions';\nimport { catchError, ignoreElements, map, switchMap, tap, withLatestFrom } from 'rxjs/operators';\nimport { ajax } from 'rxjs/ajax';\nimport { errorOp, mapOp } from '../../util/redux';\n\nexport function submitRegistrationEpic(action$, state$) {\n  return action$.pipe(\n    ofType(SUBMIT_REGISTRATION),\n    switchMap(() => {\n      const data = state$.value.form.registration.values;\n      return ajax.post(\n        `/api/1/customer/signup.json`,\n        data,\n        {\n          'Content-Type': 'application/json; charset=UTF-8'\n        }\n      ).pipe(\n        catchError((error) => [error])\n      );\n    }),\n    map((response) => {\n      if (response.name === 'AjaxError') {\n        return submitRegistrationFailed(response);\n      } else {\n        return submitRegistrationComplete(response.response);\n      }\n    })\n  );\n}\n\nexport const loginEpic = (action$, state$) => action$.pipe(\n  ofType(LOGIN),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/security/login.json`,\n      payload.data,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(\n      tap(() => setTimeout(() =>\n        payload.redirect &&\n        payload.redirect(state$.value.users.loginRedirect)\n      )),\n      errorOp\n    )\n  ),\n  mapOp(loginComplete, loginFailed)\n);\n\nexport const logoutEpic = (action$) => action$.pipe(\n  ofType(LOGOUT),\n  switchMap(({ payload }) =>\n    ajax\n      .post(`/api/1/security/logout.json`)\n      .pipe(\n        withLatestFrom([payload.redirect]),\n        errorOp\n      )\n  ),\n  map(([response, redirect]) => {\n    if (response.name === 'AjaxError') {\n      return logoutFailed(response);\n    } else {\n      redirect('/');\n      return logoutComplete(response.response);\n    }\n  })\n);\n\nexport const unauthorizedEpic = (action$) => action$.pipe(\n  ofType(UNAUTHORIZED),\n  tap(({ payload }) => payload.redirect('/login')),\n  ignoreElements()\n);\n\nexport const fetchOrdersEpic = (action$) => action$.pipe(\n  ofType(FETCH_ORDERS),\n  switchMap(() => ajax\n    .get(`/api/1/customer/orders.json`)\n    .pipe(errorOp)\n  ),\n  map((response) =>\n    (response.name === 'AjaxError')\n      ? fetchOrdersFailed(response)\n      : fetchOrdersComplete(response.response)\n  )\n);\n\nexport const fetchOrderEpic = (action$) => action$.pipe(\n  ofType(FETCH_ORDER),\n  switchMap(({ payload }) => ajax\n    .get(`/api/1/customer/orders/${payload.id}.json`)\n    .pipe(errorOp)\n  ),\n  mapOp(fetchOrderComplete, fetchOrderFailed)\n);\n\nexport const addUserAddressEpic = (action$) => action$.pipe(\n  ofType(ADD_USER_ADDRESS),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/customer/update.json`,\n      { addAddress: [payload.address] },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(addAddressComplete, addAddressFailed)\n);\n\nexport const editUserAddressEpic = (action$) => action$.pipe(\n  ofType(EDIT_USER_ADDRESS),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/customer/update.json`,\n      { changeAddress: [payload.address] },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(editAddressComplete, editAddressFailed)\n);\n\nexport const removeUserAddressEpic = (action$) => action$.pipe(\n  ofType(REMOVE_USER_ADDRESS),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/customer/update.json`,\n      { removeAddress: [{ id: payload.id }] },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(removeAddressComplete, removeAddressFailed)\n);\n\nexport const setAsDefaultAddressEpic = (action$) => action$.pipe(\n  ofType(SET_USER_ADDRESS_DEFAULTS),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/customer/update.json`,\n      {\n        ...payload.address.isBillingDefault ? { defaultBillingAddress: payload.address.id } : {},\n        ...payload.address.isShippingDefault ? { defaultShippingAddress: payload.address.id } : {}\n      },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    )\n  ),\n  mapOp(setAddressDefaultsComplete, setAddressDefaultsFailed)\n);\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { loader } from 'graphql.macro';\nimport { ofType } from 'redux-observable';\nimport {\n  FETCH_GRAPH,\n  FETCH_GRAPH_COMPLETE,\n  fetchGraphComplete,\n  fetchGraphFailed\n} from '../actions/contentActions';\nimport { catchError, filter, map, switchMap } from 'rxjs/operators';\nimport { capitalize } from '../../util/string';\nimport { ajax } from 'rxjs/ajax';\nimport { of } from 'rxjs';\nimport { setStoreSettings } from '../actions/productsActions';\n\nconst FragmentMap = {\n  home: loader('../../queries/Home.fragment.graphql').loc.source.body,\n  nav: loader('../../queries/Nav.fragment.graphql').loc.source.body,\n  header: loader('../../queries/Header.fragment.graphql').loc.source.body,\n  footer: loader('../../queries/Footer.fragment.graphql').loc.source.body,\n  post: loader('../../queries/Post.fragment.graphql').loc.source.body,\n  categories: loader('../../queries/Categories.fragment.graphql').loc.source.body,\n  blog: loader('../../queries/Blog.graphql').loc.source.body,\n  Hero: loader('../../queries/Hero.fragment.graphql').loc.source.body,\n  ContentSideImage: loader('../../queries/ContentSideImage.fragment.graphql').loc.source.body,\n  FeatureList: loader('../../queries/FeatureList.fragment.graphql').loc.source.body,\n  Testimonials: loader('../../queries/Testimonials.fragment.graphql').loc.source.body,\n  store: loader('../../queries/Store.fragment.graphql').loc.source.body\n};\n\nexport function fetchGraphEpic(action$) {\n  return action$.pipe(\n    ofType(FETCH_GRAPH),\n    switchMap(({ payload }) => {\n      const { requirements, variables } = payload;\n\n      const fragments = [];\n      const queryPieces = ['\\n'];\n      const vars = {};\n      let varSignature = '';\n\n      if (variables && variables.length) {\n        const signaturePieces = [];\n        variables.forEach((variable) => {\n          if (variable.value != null) {\n            vars[variable.name] = variable.value;\n          }\n          signaturePieces.push(`$${variable.name}: ${variable.type}`);\n        });\n        varSignature = `(${signaturePieces.join(', ')})`;\n      }\n\n      requirements.forEach((req) => {\n        queryPieces.push(`...${capitalize(req)}\\n`);\n        fragments.push(FragmentMap[req]);\n      });\n\n      const query = `query CustomGraph${varSignature} {${queryPieces.join('')}}\\n${fragments.join('\\n')}`;\n\n      return ajax.post(\n        process.env.REACT_APP_GRAPHQL_SERVER,\n        {\n          query,\n          variables: vars\n        },\n        { 'Content-Type': 'application/json; charset=UTF-8' }\n      ).pipe(\n        catchError((response) => of(response)),\n        map(({ response, name }) => (\n          (name !== 'AjaxError' && !response.errors)\n            ? fetchGraphComplete(response.data, payload)\n            : fetchGraphFailed(response, payload)\n        ))\n      );\n\n    })\n  );\n}\n\nexport function fetchGraphCompleteEpic(action$) {\n  return action$.pipe(\n    ofType(FETCH_GRAPH_COMPLETE),\n    filter(({ payload }) => (\n      payload &&\n      payload.store &&\n      payload.store.settings\n    )),\n    map(({ payload: { store: { settings } } }) => setStoreSettings(settings))\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { combineEpics } from 'redux-observable';\nimport {\n  addToCartEpic,\n  checkoutEpic,\n  facetsChangedEpic,\n  fetchCartEpic,\n  fetchProductEpic,\n  fetchProductsEpic,\n  removeFromCartEpic,\n  updateCartEpic,\n  updateCartItemEpic\n} from './products';\nimport {\n  addUserAddressEpic,\n  editUserAddressEpic,\n  fetchOrderEpic,\n  fetchOrdersEpic,\n  loginEpic,\n  logoutEpic,\n  removeUserAddressEpic,\n  setAsDefaultAddressEpic,\n  unauthorizedEpic\n} from './users';\nimport { fetchGraphEpic } from './content';\n\n// (action$: Observable<Action>, state$: StateObservable<State>): Observable<Action>;\n\nexport default combineEpics(\n  fetchProductEpic,\n  fetchProductsEpic,\n  fetchGraphEpic,\n  fetchCartEpic,\n  addToCartEpic,\n  removeFromCartEpic,\n  updateCartItemEpic,\n  fetchOrdersEpic,\n  loginEpic,\n  logoutEpic,\n  unauthorizedEpic,\n  facetsChangedEpic,\n  addUserAddressEpic,\n  editUserAddressEpic,\n  removeUserAddressEpic,\n  setAsDefaultAddressEpic,\n  updateCartEpic,\n  checkoutEpic,\n  fetchOrderEpic\n);\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { ofType } from 'redux-observable';\nimport { mapTo, pluck, switchMap, tap, withLatestFrom } from 'rxjs/operators';\nimport { ajax } from 'rxjs/ajax';\n\nimport {\n  ADD_TO_CART,\n  addToCartComplete,\n  addToCartFailed,\n  CHECKOUT,\n  checkoutComplete,\n  checkoutFailed,\n  FACETS_CHANGED,\n  FETCH_CART,\n  FETCH_PRODUCT,\n  FETCH_PRODUCTS,\n  FETCH_SHIPPING_METHODS,\n  fetchCartComplete,\n  fetchCartFailed,\n  fetchProductComplete,\n  fetchProductFailed,\n  fetchProducts,\n  fetchProductsComplete,\n  fetchProductsFailed,\n  fetchShippingMethodsComplete,\n  fetchShippingMethodsFailed,\n  REMOVE_FROM_CART,\n  removeFromCartComplete,\n  removeFromCartFailed,\n  UPDATE_CART,\n  UPDATE_CART_COMPLETE,\n  UPDATE_CART_ITEM_QUANTITY,\n  updateCartComplete,\n  updateCartFailed,\n  updateCartItemQuantityComplete,\n  updateCartItemQuantityFailed\n} from '../actions/productsActions';\nimport { errorOp, mapOp } from '../../util/redux';\n\nexport const fetchProductEpic = (action$, state$) => action$.pipe(\n  ofType(FETCH_PRODUCT),\n  withLatestFrom(state$.pipe(pluck('products'))),\n  switchMap(([{ payload }, state]) =>\n    ajax\n      .get(`/api/1/product/${payload.id}.json?locale=${state.query.locale}&currency=${state.query.currency}`)\n      .pipe(errorOp)\n  ),\n  mapOp(fetchProductComplete, fetchProductFailed)\n);\n\nexport const fetchProductsEpic = (action$, state$) => action$.pipe(\n  ofType(FETCH_PRODUCTS),\n  withLatestFrom(state$.pipe(pluck('products'))),\n  switchMap(([action, state]) => {\n    const { query } = state;\n    const qs = [];\n\n    Object.entries(query).forEach(([key, value]) => {\n      if (key !== 'total' && value != null && value !== '') {\n        if (Array.isArray(value)) {\n          (value.length > 0) && qs.push(`filter=${key}:${value.join(',')}`)\n        } else if (typeof value === 'object') {\n          qs.push(`filter=${key}:${value.min};${value.max}`);\n        } else {\n          qs.push(`${key}=${value}`);\n        }\n      }\n    });\n\n    return ajax\n      .get(`/api/1/product/all.json?${qs.join('&')}`)\n      .pipe(errorOp);\n  }),\n  mapOp(fetchProductsComplete, fetchProductsFailed)\n);\n\nexport const fetchCartEpic = (action$) => action$.pipe(\n  ofType(FETCH_CART),\n  switchMap(() => ajax.get('/api/1/cart/current.json').pipe(errorOp)),\n  mapOp(fetchCartComplete, fetchCartFailed)\n);\n\nexport const addToCartEpic = (action$) => action$.pipe(\n  ofType(ADD_TO_CART),\n  switchMap(\n    ({ payload }) => ajax.post(\n      '/api/1/cart/item/add.json',\n      payload,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(addToCartComplete, addToCartFailed)\n);\n\nexport const updateCartItemEpic = (action$) => action$.pipe(\n  ofType(UPDATE_CART_ITEM_QUANTITY),\n  switchMap(\n    ({ payload }) => ajax.post(\n      '/api/1/cart/item/change.json',\n      { itemId: payload.id, quantity: payload.quantity },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(updateCartItemQuantityComplete, updateCartItemQuantityFailed)\n);\n\nexport const updateCartEpic = (action$) => action$.pipe(\n  ofType(UPDATE_CART),\n  switchMap(({ payload }) =>\n    ajax.post(\n      '/api/1/cart/update.json',\n      payload,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(updateCartComplete, updateCartFailed)\n);\n\nexport const fetchShippingMethodsEpic = (action$) => action$.pipe(\n  ofType(UPDATE_CART_COMPLETE, FETCH_SHIPPING_METHODS),\n  switchMap(() =>\n    ajax\n      .get('/api/1/cart/shipping-methods.json')\n      .pipe(errorOp)\n  ),\n  mapOp(fetchShippingMethodsComplete, fetchShippingMethodsFailed)\n);\n\nexport const removeFromCartEpic = (action$) => action$.pipe(\n  ofType(REMOVE_FROM_CART),\n  switchMap(({ payload }) =>\n    ajax.post(\n      '/api/1/cart/item/change.json',\n      { itemId: payload.id, quantity: 0 },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(removeFromCartComplete, removeFromCartFailed)\n);\n\nexport const facetsChangedEpic = (action$) => action$.pipe(\n  ofType(FACETS_CHANGED),\n  mapTo(fetchProducts())\n);\n\nexport const checkoutEpic = (action$) => action$.pipe(\n  ofType(CHECKOUT),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/cart/checkout.json`,\n      payload.data.card,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    )\n    .pipe(\n      tap(({ response }) => payload.redirect(`/account/orders/${response.id}`)),\n      errorOp\n    )\n  ),\n  mapOp(checkoutComplete, checkoutFailed)\n);\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { combineReducers, createStore, applyMiddleware, compose } from 'redux';\nimport { reducer as reduxFormReducer } from 'redux-form';\nimport { createEpicMiddleware } from 'redux-observable';\nimport {\n  themeReducer,\n  contentReducer,\n  usersReducer,\n  productsReducer\n} from './reducers';\n\nimport rootEpic from './epics/epics';\nimport { loginComplete, setPersona } from './actions/usersActions';\nimport { setIsAuthoring } from './actions/themeActions';\nimport { setStoreSettings } from './actions/productsActions';\n\nconst reducer = combineReducers({\n  form: reduxFormReducer,\n  theme: themeReducer,\n  content: contentReducer,\n  users: usersReducer,\n  products: productsReducer\n});\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst epicMiddleware = createEpicMiddleware();\n\nconst store = createStore(\n  reducer,\n  composeEnhancers(\n    applyMiddleware(epicMiddleware)\n  )\n);\n\nconst json = document.getElementById('userJSON').innerHTML;\ntry {\n  const user = JSON.parse(json);\n  user && store.dispatch(loginComplete(user));\n} catch (e) {\n  (process.env.NODE_ENV === 'development') && console.error('Invalid syntax for user JSON.', e.message);\n}\n\nlet persona = null;\ntry {\n  const json = document.getElementById('personaJSON').innerHTML;\n  persona = JSON.parse(json);\n  persona && store.dispatch(setPersona(persona))\n} catch (e) {\n  (process.env.NODE_ENV === 'development') && console.error('Invalid syntax for persona JSON.', e.message);\n}\n\nlet storeSettings = null;\ntry {\n  const json = document.getElementById('storeSettingsJSON').innerHTML;\n  storeSettings = JSON.parse(json);\n  storeSettings && store.dispatch(setStoreSettings(storeSettings));\n} catch (e) {\n  (process.env.NODE_ENV === 'development') && console.error('Invalid syntax for store settings JSON.', e.message);\n}\n\n// True if the site is being view via authoring (studio).\n// False if it's the live site.\nconst isAuthoring = ['true']\n  .includes(\n    document\n      .querySelector('html')\n      .getAttribute('data-craftercms-preview')\n  );\n\nif (isAuthoring) {\n  store.dispatch(setIsAuthoring(isAuthoring));\n}\n\nepicMiddleware.run(rootEpic);\n\nexport default store;\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const CHANGE_THEME_TO_DARK = 'CHANGE_THEME_TO_DARK';\nexport const CHANGE_THEME_TO_LIGHT = 'CHANGE_THEME_TO_LIGHT';\nexport const SET_IS_AUTHORING = 'SET_IS_AUTHORING';\nexport const CHANGE_BORDER_RADIUS = 'CHANGE_BORDER_RADIUS';\nexport const TOGGLE_BOX_SHADOW = 'TOGGLE_BOX_SHADOW';\nexport const TOGGLE_TOP_NAVIGATION = 'TOGGLE_TOP_NAVIGATION';\n\nexport function changeThemeToDark() {\n  return {\n    type: CHANGE_THEME_TO_DARK,\n  };\n}\n\nexport function changeThemeToLight() {\n  return {\n    type: CHANGE_THEME_TO_LIGHT,\n  };\n}\n\nexport function setIsAuthoring(isAuthoring) {\n  return {\n    type: SET_IS_AUTHORING,\n    payload: { isAuthoring }\n  };\n}\n\nexport function changeBorderRadius() {\n  return {\n    type: CHANGE_BORDER_RADIUS,\n  };\n}\n\nexport function toggleBoxShadow() {\n  return {\n    type: TOGGLE_BOX_SHADOW,\n  };\n}\n\nexport function toggleTopNavigation() {\n  return {\n    type: TOGGLE_TOP_NAVIGATION,\n  };\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport resources from './resources';\n\nexport const config = {\n  interpolation: { escapeValue: false }, // React already does escaping\n  lng: 'en',\n  resources,\n};\n\nexport { resources };\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable camelcase */\nimport es from './es/main.json';\nimport en from './en/main.json';\n\nexport default {\n  en: { ...en },\n  es: { ...es  }\n};\n","/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { catchError, map } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\nexport function removeProp(branch, ...keys) {\n  const next = { ...branch };\n  keys.forEach((key) => {\n    delete next[key];\n  });\n  return next;\n}\n\nexport const errorOp = catchError((response) => of(response));\n\nexport const mapOp = (success, fail) => map(\n  ({ response, name }) =>\n    (name !== 'AjaxError')\n      ? success(response)\n      : fail(response)\n);\n\nexport function getRootType(type) {\n  return type.replace(/_FAILED|_COMPLETE/g, '');\n}\n\nexport function byIdLoadingKey(root, id) {\n  return `${root}[${id}]`;\n}\n","\n/*\n * MIT License\n *\n * Copyright (c) 2019 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const FETCH_GRAPH = 'FETCH_GRAPH';\nexport const FETCH_GRAPH_COMPLETE = 'FETCH_GRAPH_COMPLETE';\nexport const FETCH_GRAPH_FAILED = 'FETCH_GRAPH_FAILED';\n\nexport function fetchGraph(requirements, variables) {\n  return {\n    type: FETCH_GRAPH,\n    payload: { requirements, variables }\n  };\n}\n\nexport function fetchGraphComplete(data, rootPayload) {\n  return {\n    type: FETCH_GRAPH_COMPLETE,\n    payload: data,\n    rootPayload\n  };\n}\n\nexport function fetchGraphFailed(response, rootPayload) {\n  return {\n    type: FETCH_GRAPH_FAILED,\n    payload: response,\n    rootPayload\n  };\n}\n"],"sourceRoot":""}