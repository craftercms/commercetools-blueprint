"use strict";(self.webpackChunkecommerce_app=self.webpackChunkecommerce_app||[]).push([[599],{42139:(e,a,t)=>{t.r(a),t.d(a,{default:()=>K});var n=t(42982),s=t(4942),c=t(1413),i=t(70885),r=t(72791),l=t(20743),o=t(81815),u=t(56153),d=t(27988),h=t(76704),p=t(25837),m=t(28754),f=t(15671),g=t(43144),v=t(60136),x=t(54062),j=(t(85262),t(60490)),_=t(80184),k=(0,j.ZP.createSliderWithTooltip)(j.ZP.Range),b=function(e){(0,v.Z)(t,e);var a=(0,x.Z)(t);function t(){return(0,f.Z)(this,t),a.apply(this,arguments)}return(0,g.Z)(t,[{key:"render",value:function(){var e=this.props,a=e.min,t=e.max,n=e.marks,s=e.value,c=e.tipFormatter,i=e.tipOptions,r=e.onChange,l=e.onAfterChange;return(0,_.jsxs)("div",{className:"slider",children:[(0,_.jsx)("div",{className:"slider__min",children:(0,_.jsx)("p",{children:c?c(a):a})}),(0,_.jsx)("div",{className:"slider__max",children:(0,_.jsx)("p",{children:c?c(t):t})}),(0,_.jsx)(k,{min:a,max:t,defaultValue:s,tipFormatter:c,marks:n,tipProps:i,onAfterChange:l,onChange:r})]})}}]),t}(r.PureComponent);b.defaultProps={marks:{},tipFormatter:function(e){return e},tipOptions:{visible:!0}};function N(e){var a=e.title,t=e.facets,n=e.checked,s=e.onSelection;return(0,_.jsxs)("nav",{className:"multiple-selection-facets",children:[a&&(0,_.jsx)("h2",{className:"facet-list-title",children:a}),(0,_.jsx)("div",{className:"form__form-group",children:t.map((function(e){return(0,_.jsx)("div",{className:"form__form-group-field",children:(0,_.jsx)(p.J,{name:"categories",label:e.label,value:e.value,checked:n.includes(e.value),onChange:function(a){return s(a.target.checked,e)}})},e.value)}))})]})}function y(e){var a=e.title,t=e.facets;return(0,_.jsxs)("nav",{className:"single-selection-facets",children:[a&&(0,_.jsx)("h2",{className:"facet-list-title",children:a}),(0,_.jsx)("div",{className:"form__form-group",children:t.map((function(e){return(0,_.jsx)("div",{className:"form__form-group-field",children:(0,m.ZP)({label:e.label,radioValue:e.value,input:{value:t[0].value,name:"singleGroupName",onChange:function(){}}})},e.value)}))})]})}function C(e){var a=e.min,t=e.max,n=e.value,s=e.title,c=e.onChange,i=e.tipFormatter;return(0,_.jsxs)("nav",{className:"range-selection-facet",children:[(0,_.jsx)("h2",{className:"facet-list-title",children:s}),(0,_.jsx)(b,{min:a,max:t,value:n,tipOptions:{visible:!1},onAfterChange:c,tipFormatter:i})]})}y.defaultProps=N.defaultProps=function e(a){var t=a.title,n=a.facets,s=a.checked,i=a.onSelection;return(0,_.jsxs)("nav",{className:"hierarchical-facets",children:[t&&(0,_.jsx)("h2",{className:"facet-list-title",children:"Clothing"}),n.map((function(t){return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)("button",{className:"hierarchical-facets__item ".concat(s[t.value]?"hierarchical-facets__item--checked":""),onClick:function(){return i(t)},children:t.label}),t.children&&t.children.length&&s[t.value]&&(0,_.jsx)(e,(0,c.Z)((0,c.Z)({},a),{},{title:null,facets:t.children}))]},t.value)}))]})}.defaultProps={title:"Clothing",facets:[{label:"Dresses",value:"dresses"},{label:"Cardigans & Sweaters",value:"cardigans_n_sweaters",children:[{label:"Sweaters",value:"sweaters"},{label:"Cardigans",value:"cardigans"},{label:"Sweatshirts",value:"sweatshirts"}]},{label:"Jumpsuits",value:"jumpsuits"},{label:"T-shirts",value:"t-shirts"},{label:"Jackets",value:"jackets"}],checked:{cardigans_n_sweaters:!0},onSelection:function(e){}};var Z=t(94628),w=t(25198),q=t(4245),P=t(92716),S=t(2674),F=t(91523),E=t(48671),O=t.n(E),J=t(47806),L=t.n(J),A=t(78459),I=t.n(A),R=t(96048),D=t.n(R),V=t(16030);function K(e){var a=(0,V.I0)(),t=e.history,p=(0,V.v9)((function(e){return e.products})),m=p.byId,f=p.facets,g=p.query,v=p.loading,x=p.errors,j=m?Object.values(m):null,k=(0,r.useRef)(),b=q.parse(e.location.search),E={list:[],types:{},state:{}};f&&f.forEach((function(e){var a=e.type,t=e.value;switch(E.list.push(t),E.types[t]=a,a){case"multiple":E.state[t]=[];break;case"single":E.state[t]="";break;case"range":E.state[t]=null}})),Object.entries(b).forEach((function(e){var a=(0,i.Z)(e,2),t=a[0],n=a[1];"q"===t?(t="keywords",E.state[t]=n):E.state[t]="offset"===t||"limit"===t?n:["rating","price"].includes(t)?n.split("-").reduce((function(e,a,t){return(0,c.Z)((0,c.Z)({},e),(0,s.Z)({},0===t?"min":"max",parseInt(a)))}),{}):E.state[t]=n.split(",")}));var J=function(){a((0,P.t2)(E.state))};return(0,r.useEffect)(J,[t.location.search,g.locale,g.currency,a]),(0,r.useEffect)((function(){(k.current||{value:""}).value=g.keywords}),[g.keywords]),(0,_.jsx)(h.Z,{children:(0,_.jsxs)(l.Z,{children:[x[P.bJ]&&(0,_.jsx)(S.Z,{color:"danger",className:"alert--bordered",icon:!0,dismiss:!1,children:(0,_.jsxs)("span",{children:["An error has occurred trying to fetch products.",(0,_.jsx)(o.Z,{outline:!0,onClick:J,className:"btn-retry btn-sm",children:"Retry"})]})}),v[P.bJ]&&(0,_.jsx)(Z.Z,{contained:!0}),!1===v[P.bJ]&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(u.Z,{children:[E.state.keywords&&(0,_.jsxs)(d.Z,{md:12,children:[(0,_.jsxs)("h2",{className:"page-title",children:['Search results for "',E.state.keywords,'"']}),(0,_.jsx)(F.rU,{className:"page-subhead",to:"/catalog",children:"(clear query)"})]}),(0,_.jsx)(d.Z,{md:9,children:(0,_.jsxs)("div",{className:"catalog-items__wrap",children:[(0,_.jsx)("div",{className:"catalog-page-controls",children:(0,_.jsx)(D(),{containerClassName:"pagination",pageClassName:"pagination__item",pageLinkClassName:"pagination__link",previousClassName:"pagination__item",previousLinkClassName:"pagination__link pagination__link--arrow",nextClassName:"pagination__item",nextLinkClassName:"pagination__link pagination__link--arrow",pageRangeDisplayed:3,marginPagesDisplayed:3,activeClassName:"active",initialPage:g.offset/g.limit,pageCount:Math.ceil(g.total/g.limit),onPageChange:function(e){return function(e){var a=[],n=e-1,s=g.limit*n;null!=s&&a.push("offset=".concat(s)),b.q&&a.push("q=".concat(b.q)),b.price&&a.push("price=".concat(b.price)),b.rating&&a.push("rating=".concat(b.rating)),b.categories&&a.push("categories=".concat(b.categories)),b.colors&&a.push("colors=".concat(b.colors)),t.push("/catalog".concat(a.length?"?".concat(a.join("&")):""))}(e.selected+1)},disableInitialCallback:!0,previousLabel:(0,_.jsx)(I(),{className:"pagination__link-icon"}),nextLabel:(0,_.jsx)(L(),{className:"pagination__link-icon"})})}),(0,_.jsxs)("div",{className:"catalog-items",children:[j.map((function(e){return(0,_.jsx)(w.Z,{product:e},e.id)})),0===j.length&&(0,_.jsx)(S.Z,{color:"info",className:"alert--bordered",icon:!0,dismiss:!1,children:(0,_.jsxs)("span",{children:["No products to display (",(0,_.jsx)(F.rU,{to:"/catalog",children:"clear filters"}),")"]})})]})]})}),(0,_.jsxs)(d.Z,{md:3,children:[(0,_.jsx)("div",{className:"form",style:{background:"white",marginBottom:20,border:"1px solid #ddd"},children:(0,_.jsxs)("div",{className:"form__form-group-field",children:[(0,_.jsx)("div",{className:"form__form-group-icon",children:(0,_.jsx)(O(),{})}),(0,_.jsx)("input",{ref:k,type:"text",name:"keywords",placeholder:"Keywords...",defaultValue:g.keywords,onKeyPress:function(e){return"Enter"===e.key&&function(e){var a=[];a.push("q=".concat(e||"")),b.price&&a.push("price=".concat(b.price)),b.rating&&a.push("rating=".concat(b.rating)),b.categories&&a.push("categories=".concat(b.categories)),b.colors&&a.push("colors=".concat(b.colors)),t.push("/catalog".concat(a.length?"?".concat(a.join("&")):""))}(e.target.value)}})]})}),f&&f.map((function(e){switch(e.type){case"single":case"multiple":var a="multiple"===e.type?N:y;return(0,_.jsx)(a,{title:e.name,checked:E.state[e.value],onSelection:function(a,s){return function(e,a,s){var c=s.value,r=g[e]||[];r=a?[].concat((0,n.Z)(r),[c]):r.filter((function(e){return e!==c}));var l=[];b.q&&l.push("q=".concat(b.q)),Object.entries(b).forEach((function(a){var t=(0,i.Z)(a,2),n=t[0],s=t[1];"offset"===n?l.push("".concat(n,"=0")):n!==e&&l.push("".concat(n,"=").concat(s))})),r.length>0&&l.push("".concat(e,"=").concat(r.join(","))),t.push("/catalog".concat(l.length?"?".concat(l.join("&")):""))}(e.value,a,s)},facets:e.items.map((function(e){return{value:e.value,label:e.name}}))},e.value);case"range":return(0,_.jsx)(C,{onChange:function(a){return function(e,a){var n=[];b.q&&n.push("q=".concat(b.q)),Object.entries(b).forEach((function(a){var t=(0,i.Z)(a,2),s=t[0],c=t[1];return s!==e&&n.push("".concat(s,"=").concat(c))})),n.push("".concat(e,"=").concat(a.join("-"))),t.push("/catalog".concat(n.length?"?".concat(n.join("&")):""))}(e.value,a)},title:e.name,min:e.min,max:e.max,tipFormatter:"price"===e.value?function(e){return"$".concat(e)}:function(e){return e},value:E.state[e.value]?[E.state[e.value].min,E.state[e.value].max]:[e.min,e.max]},e.value);default:return null}}))]})]})})]})})}}}]);
//# sourceMappingURL=599.5957ab25.chunk.js.map