{"version":3,"sources":["components/app/Product.js","components/app/BlogTeaser.js","components/shared/form/CheckBox.js","components/shared/form/RadioButton.js","components/app/ProductGallery.js","util/component.js","components/app/ProductCard.js","components/app/ProductDetails.js","components/app/LogIn.js","components/app/Register.js","components/app/NotFoundView.js","components/app/CartBody.js","components/app/CartView.js","components/app/ProfileSettings.js","components/app/OrderList.js","components/app/AddressCard.js","components/app/Account.js","components/shared/authorized.js","components/app/CheckoutView.js","components/app/OrderDetails.js","components/app/BlogEntry.js","components/app/Search.js","components/shared/contentTypeMap.js","components/shared/DynamicRoute.js","components/Routes.js","components/ScrollReset.js","translations/i18n.js","translations/resources.js","components/MainWrapper.js","components/App.js","util/content.js","components/shared/queries.graphql.js","components/shared/context.js","redux/actions/themeActions.js","redux/reducers/themeReducer.js","redux/actions/contentActions.js","util/redux.js","util/array.js","redux/reducers/contentReducer.js","redux/reducers/usersReducer.js","redux/reducers/productsReducer.js","redux/epics/users.js","redux/epics/content.js","redux/epics/epics.js","redux/epics/products.js","redux/store.js","redux/actions/productsActions.js","components/app/BlogRoll.js","redux/actions/usersActions.js","img/burger.svg","components/app/Header.js","components/app/Footer.js","components/app/Layout.js","components/shared/hooks.js","util/constants.js","util/string.js","components/shared/Alert.js","components/shared/Empty.js","components/shared/Anchor.js","util/products.js","components/shared/utils.js"],"names":["process","Product","props","product","id","name","variants","rating","colors","filter","variant","attributes","some","a","map","find","value","toLowerCase","price","img","images","className","to","src","url","alt","description","average","widgetEmptyColors","widgetHoverColors","widgetRatedColors","widgetDimensions","widgetSpacings","Widget","money","currency","color","index","style","background","BlogPostCard","slug_s","title_s","image_s","summary_html_raw","hideSummary","component","Card","model","dangerouslySetInnerHTML","__html","BlogTeaser","posts","usePosts","md","items","post","lg","craftercms","CheckBox","disabled","onChange","label","checked","CheckboxClass","classNames","htmlFor","type","borderColor","CheckBoxField","this","defaultChecked","PureComponent","defaultProps","renderCheckBoxField","input","meta","initial","RadioButton","currentValue","classes","RadioButtonField","radioValue","RadioButtonClass","renderRadioButtonField","ProductGallery","useReducer","b","image","currentIndex","lightboxIsOpen","state","setState","useEffect","length","onClick","e","preventDefault","href","i","changeImg","onClose","views","getLoginFormDefaults","email","localStorage","getItem","rememberMe","useCart","onEmpty","ref","useRef","current","dispatch","useAppDispatch","cart","useAppSelector","products","locale","query","fetchCart","useUser","redirect","onMissing","user","users","setLoginRedirect","useCartUpdateInFlight","loading","FETCH_CART","UPDATE_CART","ADD_TO_CART","REMOVE_FROM_CART","UPDATE_CART_ITEM_QUANTITY","Cookie","get","reducer","SubmitReview","isLoggedIn","onSuccess","useState","setValue","comments","setComments","openModal","setOpenModal","message","setMessage","toggleOpen","reviews","Button","outline","Modal","isOpen","toggle","Alert","text","changeRating","target","placeholder","ButtonToolbar","fetch","body","JSON","stringify","method","headers","then","response","json","data","status","VariantSelection","components","options","getVariantLabel","option","clearable","classNamePrefix","attr","Option","innerProps","isDisabled","backgroundColor","boxShadow","ProductCard","initialState","setImages","setVariant","productId","variantId","quantity","cartItem","setCartItem","isInCart","updatesInFlight","reduce","iVariant","concat","item","CardBody","nextQuantity","parseInt","updateCartItemQuantity","onUpdateQuantity","removeFromCart","addToCart","onStock","fetchProduct","ProductDetails","match","params","byId","related","setRelated","sub","unsubscribe","keys","categories","oMap","category","ids","push","key","products$","getProducts","limit","join","of","posts$","ajax","variables","forkJoin","pipe","prod","slice","subscribe","Layout","Container","Row","Col","Spinner","LogInForm","history","useHistory","showPassword","setShowPassword","error","setError","meRemembered","document","querySelectorAll","focus","initialValues","onSubmit","setItem","removeItem","catchError","loginComplete","loginRedirect","handleSubmit","LogIn","header","useHeader","Anchor","logo_url_s","logo_s","logo_alt_t","RegisterForm","memo","values","RegistrationConfirmation","Register","success","registerConfirmPending","registrationComplete","withTranslation","t","CartSummary","Table","responsive","productName","CartBody","displayOptions","Empty","showPrice","showTax","showTotal","showRemove","showQuantityModifiers","ButtonGroup","unitPrice","taxedPrice","totalPrice","OrderTotals","sum","shippingPrice","CartView","contained","ChangePasswordForm","setType","setSuccess","FORM_ERROR","form","submitError","reset","onDismiss","ProfileSettings","OrderList","ordersTable","orders","Object","FETCH_ORDERS","fetchOrders","hover","created","modified","shippingStatus","orderStatus","paymentStatus","substr","indexOf","Badge","capitalize","AddressCard","address","showName","undefined","addressName","firstName","lastName","phone","mobile","fax","streetAddressLineOne","streetAddressLineTwo","city","postalCode","country","AddressForm","onCancel","isEditMode","editAddressComplete","addAddressComplete","AddressEntry","addressId","backUrl","qs","location","search","origin","useMemo","addresses","AddressSelection","returnUrl","newAddressUrl","sm","authorized","Component","displayName","C","useLocation","wrappedComponentRef","remainingProps","pathname","setTimeout","WrappedComponent","hoistStatics","activeTab","includes","tab","setActiveTab","xl","height","middleName","logout","Nav","tabs","NavItem","NavLink","classnames","active","TabContent","TabPane","tabId","isShippingDefault","isBillingDefault","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","onUpdateAddressDefaults","onSetDefaultBilling","onSetDefaultShipping","divider","removeAddress","setAddressDefaults","cartAddress","_address_","ShippingSelection","selectedValue","CreditCardForm","cardNumber","cvc","expirationDate","nameOnCard","min","minLength","maxLength","CheckoutView","card","shippingAddress","setShippingAddress","billingAddress","setBillingAddress","shippingMethod","setShippingMethod","onAddressSelection","shipping","billing","shippingCondition","billingCondition","methodCondition","updateCart","checkoutDisabled","small","shippingMethods","checkout","OrderDetails","order","fetchOrder","useOrder","BlogEntry","slug","useCategories","itemsPerPage","currentPage","paginationData","Post","RelatedPosts","categories_o","RelatedProducts","author_s","subtitle_s","content_html_raw","value_smv","relatedPosts","setRelatedPosts","setItems","useProductsQuery","offset","Math","floor","random","ARTICLE","PRODUCT","Search","q","productResults","setProductResults","productsQueryParams","resource","useUrlSearchQueryFetchResource","catalog","total","fallback","SearchResults","SearchResult","title","link","preview","content_html","hits","read","lazy","DynamicRoute","destroyed","reportNavigation","fetchQuery","byUrlQuery","parseDescriptor","content","window","scroll","isAuthoring","path","contentTypeMap","Routes","exact","Account","NotFound404","withRouter","scrollTo","children","config","interpolation","escapeValue","lng","resources","en","es","MainWrapper","theme","wrapperClass","squaredCorners","withBoxShadow","topNavigation","App","store","getState","script","createElement","setAttribute","head","appendChild","jQuery","i18n","i18next","init","i18nextConfig","siteName","getElementById","innerHTML","Cookies","Error","graphqlServer","operation","commonFragments","main","postsQuery","navQuery","footerQuery","headerQuery","storeSettingsQuery","GlobalContext","createContext","useGlobalContext","context","useContext","GlobalContextProvider","useSpreadState","pages","pagesLoading","$","Provider","CHANGE_THEME_TO_DARK","CHANGE_THEME_TO_LIGHT","SET_IS_AUTHORING","CHANGE_BORDER_RADIUS","TOGGLE_BOX_SHADOW","TOGGLE_TOP_NAVIGATION","themeReducer","action","payload","FETCH_GRAPH","FETCH_GRAPH_COMPLETE","FETCH_GRAPH_FAILED","removeProp","branch","next","forEach","errorOp","mapOp","fail","getRootType","replace","byIdLoadingKey","root","toLookupTable","array","prop","table","nav","home","footer","errors","getHeader","getFooter","getNav","getHome","sections_o","localId","contentType","posts_o","getPosts","bySlug","getStore","settings","getCategories","persona","facets","FragmentMap","blog","Hero","ContentSideImage","FeatureList","Testimonials","combineEpics","action$","state$","ofType","FETCH_PRODUCT","withLatestFrom","pluck","switchMap","fetchProductComplete","fetchProductFailed","FETCH_PRODUCTS","entries","Array","isArray","max","fetchProductsComplete","fetchProductsFailed","requirements","fragments","queryPieces","vars","varSignature","signaturePieces","variable","req","rootPayload","fetchGraphFailed","fetchCartComplete","fetchCartFailed","addToCartComplete","addToCartFailed","itemId","removeFromCartComplete","removeFromCartFailed","updateCartItemQuantityComplete","updateCartItemQuantityFailed","fetchOrdersFailed","fetchOrdersComplete","LOGIN","tap","loginFailed","LOGOUT","logoutFailed","logoutComplete","UNAUTHORIZED","ignoreElements","FACETS_CHANGED","mapTo","fetchProducts","ADD_USER_ADDRESS","addAddress","addAddressFailed","EDIT_USER_ADDRESS","changeAddress","editAddressFailed","REMOVE_USER_ADDRESS","removeAddressComplete","removeAddressFailed","SET_USER_ADDRESS_DEFAULTS","defaultBillingAddress","defaultShippingAddress","setAddressDefaultsComplete","setAddressDefaultsFailed","updateCartComplete","updateCartFailed","CHECKOUT","checkoutComplete","checkoutFailed","FETCH_ORDER","fetchOrderComplete","fetchOrderFailed","combineReducers","LOGIN_COMPLETE","SET_PERSONA","CHECKOUT_COMPLETE","FETCH_ORDER_COMPLETE","ADD_USER_ADDRESS_COMPLETE","EDIT_USER_ADDRESS_COMPLETE","REMOVE_USER_ADDRESS_COMPLETE","SET_USER_ADDRESS_DEFAULTS_COMPLETE","FETCH_ORDERS_COMPLETE","LOGOUT_COMPLETE","LOGIN_FAILED","FETCH_ORDER_FAILED","ADD_USER_ADDRESS_FAILED","EDIT_USER_ADDRESS_FAILED","REMOVE_USER_ADDRESS_FAILED","SET_USER_ADDRESS_DEFAULTS_FAILED","SUBMIT_REGISTRATION_FAILED","registration","FETCH_ORDERS_FAILED","SET_LOGIN_REDIRECT","RESET_LOGIN_REDIRECT","REGISTRATION_COMPLETE","FETCH_PRODUCTS_COMPLETE","CHANGE_LOCALE","CHANGE_CURRENCY","set","SET_STORE_SETTINGS","currencies","locales","FETCH_PRODUCT_COMPLETE","FETCH_CART_COMPLETE","UPDATE_CART_COMPLETE","ADD_TO_CART_COMPLETE","REMOVE_FROM_CART_COMPLETE","UPDATE_CART_ITEM_QUANTITY_COMPLETE","KEYWORDS_CHANGED","keywords","FETCH_SHIPPING_METHODS","FETCH_SHIPPING_METHODS_COMPLETE","ADD_TO_CART_FAILED","UPDATE_CART_FAILED","FETCH_PRODUCT_FAILED","FETCH_PRODUCTS_FAILED","FETCH_SHIPPING_METHODS_FAILED","UPDATE_CART_ITEM_QUANTITY_FAILED","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","epicMiddleware","createEpicMiddleware","createStore","applyMiddleware","parse","setPersona","storeSettings","setStoreSettings","querySelector","getAttribute","setIsAuthoring","run","rootEpic","AppStoreContext","AppStoreContextProvider","subscription","Subscription","onStateChange","notifyNestedSubs","createStoreHook","createSelectorHook","createDispatchHook","fetchShippingMethodsComplete","fetchShippingMethodsFailed","changeLocale","changeCurrency","BlogRoll","selectedCategory","postsFiltered","setPostsFiltered","CategoryListing","selected","SUBMIT_REGISTRATION","submitRegistrationComplete","submitRegistrationFailed","FlagCodeMap","de","en_us","Header","localesOpen","setLocalesOpen","currenciesOpen","setCurrenciesOpen","searchOpen","setSearchOpen","setKeywords","useNavigation","useStoreSettings","classList","contains","remove","add","hamburger","Dropdown","caret","code","Popover","placement","PopoverBody","onKeyPress","Footer","useFooter","section_background_image_s","direction","Date","getFullYear","React","Children","child","cloneElement","defaultPaginationData","neverResource","createResource","Promise","nextState","initializerArg","initializer","setPosts","postsLimit","postsOffset","pageCount","ceil","categoriesLoading","update","destroyedRef","useSearchQuery","setQuery","p","page","setPage","useCallback","contentTypes","size","setResource","createQuery","from","crafterConfig","rest","counted","parsedHits","_source","preParseSearchResults","toPromise","headerLoading","component_header","footerLoading","component_footer","storeSettingsLoading","Currencies","USD","EUR","str","charAt","toUpperCase","substring","amount","parseFloat","toFixed","onShow","visible","Icon","icon","dismiss","autoTarget","isExternal","protocol","Link","resultProps","documentElement","factory","result","suspender","REACT_APP_CRAFTERCMS_SITE_ID","baseUrl","REACT_APP_CRAFTERCMS_BASE_URL","site","crafterConf","configure"],"mappings":"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","file":"static/js/3.6f569f46.chunk.js","sourcesContent":["/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { money } from '../../util/string';\nimport Ratings from 'react-ratings-declarative';\n\nconst saleBadge = `${process.env.PUBLIC_URL}/img/for_store/catalog/sale_lable.png`;\nconst newBadge = `${process.env.PUBLIC_URL}/img/for_store/catalog/new_lable.png`;\n\nexport default function Product(props) {\n\n  let isNew, isSale;\n  const { product } = props;\n  const { id, name, variants, rating } = product || {};\n\n  const colors = variants\n    .filter(variant => variant.attributes.some(a => a.name === 'Color'))\n    .map((variant) =>\n      variant.attributes.find(a => a.name === 'Color').value.toLowerCase()\n    );\n\n  const price = variants[0].price;\n  const oldPrice = price * 2;\n\n  const img = variants[0].images[0];\n\n  const\n    widgetEmptyColors = '#ccc',\n    widgetHoverColors = '#FFCC00',\n    widgetRatedColors = '#FFCC00',\n    widgetDimensions = '20px',\n    widgetSpacings = '5px';\n\n  return (\n    <div className=\"catalog-item\">\n      <Link className=\"catalog-item__link\" to={`/catalog/${id}`}>\n\n        {isNew ? <img className=\"catalog-item__label\" src={newBadge} alt=\"new\"/> : ''}\n        {isSale ? <img className=\"catalog-item__label\" src={saleBadge} alt=\"sale\"/> : ''}\n\n        <div className=\"catalog-item__img-wrap\">\n          <img className=\"catalog-item__img\" src={img.url} alt={img.description}/>\n        </div>\n\n        <div className=\"catalog-item--rating-widget rating-widget\">\n          <section className=\"rating-widget__header\">\n            <div className=\"rating-widget__average\">\n              <div>\n                {\n                  (rating == null) ? 'No reviews yet.' : <>\n                    <Ratings\n                      rating={rating == null ? 0 : rating.average}\n                      widgetEmptyColors={widgetEmptyColors}\n                      widgetHoverColors={widgetHoverColors}\n                      widgetRatedColors={widgetRatedColors}\n                      widgetDimensions={widgetDimensions}\n                      widgetSpacings={widgetSpacings}\n                    >\n                      <Ratings.Widget/>\n                      <Ratings.Widget/>\n                      <Ratings.Widget/>\n                      <Ratings.Widget/>\n                      <Ratings.Widget/>\n                    </Ratings>\n                  </>\n                }\n              </div>\n            </div>\n          </section>\n        </div>\n\n        <div className=\"catalog-item__info\">\n          <h4 className=\"catalog-item__title\">{name}</h4>\n          <em className=\"catalog-item__price\">{money(price, variants[0].currency)}</em>\n          {isSale ? <p className=\"catalog-item__old-price\">${oldPrice}</p> : ''}\n          {\n            colors.map((color, index) => (\n              <span\n                key={index}\n                className=\"catalog-item__color\"\n                style={{ background: color }}\n              />\n            ))\n          }\n        </div>\n\n      </Link>\n    </div>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable max-len */\nimport React from 'react';\nimport {\n  Col,\n  Row,\n  Container,\n  Card,\n  CardBody\n} from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport { usePosts } from '../shared/hooks';\nimport { Field } from '@craftercms/studio-guest';\n\nfunction BlogTeaser(props) {\n\n  const {\n    title_s,\n  } = props;\n  const posts = usePosts();\n\n  return (\n    <Field component=\"section\" className=\"landing__section\" model={props}>\n      <Container>\n        <Row>\n          <Col md={12}>\n            <h3 className=\"landing__section-title\">{title_s}</h3>\n          </Col>\n        </Row>\n        <Row className=\"landing__teasers\">\n          {\n            posts &&\n            posts.items.map((post) =>\n              <Col key={post.craftercms.id} lg={4} md={6}>\n                <BlogPostCard {...post}/>\n              </Col>\n            )\n          }\n        </Row>\n      </Container>\n    </Field>\n  );\n}\n\nexport function BlogPostCard(props) {\n  const { slug_s, title_s, image_s, summary_html_raw, hideSummary } = props;\n  return (\n    <Link to={`/blog/${slug_s}`}>\n      <Field component={Card} model={props}>\n        <CardBody className=\"landing__teaser\">\n          <img src={image_s} alt=\"\" className=\"landing__teaser-img\"/>\n          <h3 className=\"landing__teaser-title\">{title_s}</h3>\n          {\n            !hideSummary && summary_html_raw &&\n            <p\n              className=\"landing__teaser-review\"\n              dangerouslySetInnerHTML={{ __html: summary_html_raw }}\n            />\n          }\n        </CardBody>\n      </Field>\n    </Link>\n  );\n}\n\nexport default BlogTeaser;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable jsx-a11y/label-has-for */\nimport React, { PureComponent } from 'react';\nimport CheckIcon from 'mdi-react/CheckIcon';\nimport CloseIcon from 'mdi-react/CloseIcon';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nexport function CheckBox(props) {\n\n  const {\n    disabled,\n    className,\n    name,\n    value,\n    onChange,\n    label,\n    color,\n    checked\n  } = props;\n\n  const CheckboxClass = classNames({\n    'checkbox-btn': true,\n    disabled,\n  });\n\n  return (\n    <label\n      className={`${CheckboxClass} ${className ? ` checkbox-btn--${className}` : ''}`}\n      htmlFor={`${name}[${value}]`}\n    >\n      <input\n        className=\"checkbox-btn__checkbox\"\n        type=\"checkbox\"\n        id={`${name}[${value}]`}\n        name={name}\n        onChange={onChange}\n        checked={checked}\n        disabled={disabled}\n        value={value}\n      />\n      <span\n        className=\"checkbox-btn__checkbox-custom\"\n        style={color ? { background: color, borderColor: color } : {}}\n      >\n        <CheckIcon/>\n      </span>\n      {\n        className === 'button'\n          ? (\n            <span className=\"checkbox-btn__label-svg\">\n              <CheckIcon className=\"checkbox-btn__label-check\"/>\n              <CloseIcon className=\"checkbox-btn__label-uncheck\"/>\n            </span>\n          )\n          : (\n            ''\n          )\n      }\n      <span className=\"checkbox-btn__label\">\n        {label}\n      </span>\n    </label>\n  );\n}\n\nclass CheckBoxField extends PureComponent {\n  static propTypes = {\n    onChange: PropTypes.func.isRequired,\n    name: PropTypes.string.isRequired,\n    value: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.bool,\n    ]).isRequired,\n    label: PropTypes.string,\n    defaultChecked: PropTypes.bool,\n    disabled: PropTypes.bool,\n    className: PropTypes.string,\n    color: PropTypes.string,\n  };\n\n  static defaultProps = {\n    label: '',\n    defaultChecked: false,\n    disabled: false,\n    className: '',\n    color: '',\n  };\n\n  componentDidMount() {\n    const { onChange, defaultChecked } = this.props;\n    onChange(defaultChecked);\n  }\n\n  render() {\n    const {\n      disabled, className, name, value, onChange, label, color,\n    } = this.props;\n    const CheckboxClass = classNames({\n      'checkbox-btn': true,\n      disabled,\n    });\n\n    return (\n      <label\n        className={`${CheckboxClass} ${className ? ` checkbox-btn--${className}` : ''}`}\n        htmlFor={name}\n      >\n        <input\n          className=\"checkbox-btn__checkbox\"\n          type=\"checkbox\"\n          id={name}\n          name={name}\n          onChange={onChange}\n          checked={value}\n          disabled={disabled}\n        />\n        <span\n          className=\"checkbox-btn__checkbox-custom\"\n          style={color ? { background: color, borderColor: color } : {}}\n        >\n          <CheckIcon/>\n        </span>\n        {\n          className === 'button'\n            ? (\n              <span className=\"checkbox-btn__label-svg\">\n                <CheckIcon className=\"checkbox-btn__label-check\"/>\n                <CloseIcon className=\"checkbox-btn__label-uncheck\"/>\n              </span>\n            )\n            : (\n              ''\n            )\n        }\n        <span className=\"checkbox-btn__label\">\n          {label}\n        </span>\n      </label>\n    );\n  }\n}\n\nconst renderCheckBoxField = (props) => {\n  const {\n    input, label, defaultChecked, disabled, className, color,\n  } = props;\n  return (\n    <CheckBoxField\n      {...input}\n      label={label}\n      defaultChecked={\n        props.meta.initial != null\n          ? props.meta.initial\n          : defaultChecked\n      }\n      disabled={disabled}\n      className={className}\n      color={color}\n    />\n  );\n};\n\nrenderCheckBoxField.propTypes = {\n  input: PropTypes.shape({\n    onChange: PropTypes.func,\n    name: PropTypes.string,\n    value: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.bool,\n    ]),\n  }).isRequired,\n  label: PropTypes.string,\n  defaultChecked: PropTypes.bool,\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  color: PropTypes.string,\n};\n\nrenderCheckBoxField.defaultProps = {\n  label: '',\n  defaultChecked: false,\n  disabled: false,\n  className: '',\n  color: '',\n};\n\nexport default renderCheckBoxField;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable jsx-a11y/label-has-for */\nimport React, { PureComponent } from 'react';\nimport CheckIcon from 'mdi-react/CheckIcon';\nimport CloseIcon from 'mdi-react/CloseIcon';\nimport * as PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nexport function RadioButton(props) {\n  const {\n    name,\n    label,\n    value,\n    disabled,\n    onChange,\n    className,\n    currentValue\n  } = props;\n  const classes = classNames({\n    disabled,\n    'radio-btn': true,\n    [`radio-btn--${className}`]: !!className\n  });\n  return (\n    <label className={classes}>\n      <input\n        type=\"radio\"\n        name={name}\n        value={value}\n        onChange={onChange}\n        disabled={disabled}\n        checked={value === currentValue}\n        className=\"radio-btn__radio\"\n      />\n      <span className=\"radio-btn__radio-custom\"/>\n      {className === 'button' ? (\n        <span className=\"radio-btn__label-svg\">\n          <CheckIcon className=\"radio-btn__label-check\"/>\n          <CloseIcon className=\"radio-btn__label-uncheck\"/>\n        </span>\n      ) : ''}\n      <span className=\"radio-btn__label\">{label}</span>\n    </label>\n  );\n}\n\nexport class RadioButtonField extends PureComponent {\n  static propTypes = {\n    onChange: PropTypes.func.isRequired,\n    name: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired,\n    label: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),\n    defaultChecked: PropTypes.bool,\n    radioValue: PropTypes.string,\n    disabled: PropTypes.bool,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    label: '',\n    defaultChecked: false,\n    radioValue: '',\n    disabled: false,\n    className: '',\n  };\n\n  componentDidMount() {\n    const { defaultChecked, onChange, radioValue } = this.props;\n    if (defaultChecked) {\n      onChange(radioValue);\n    }\n  }\n\n  onChange = () => {\n    const { onChange, radioValue } = this.props;\n    onChange(radioValue);\n  };\n\n  render() {\n    const {\n      disabled, className, name, label, radioValue, value,\n    } = this.props;\n    const RadioButtonClass = classNames({\n      'radio-btn': true,\n      disabled,\n    });\n\n    return (\n      <label\n        className={`${RadioButtonClass}${className ? ` radio-btn--${className}` : ''}`}\n      >\n        <input\n          className=\"radio-btn__radio\"\n          name={name}\n          type=\"radio\"\n          onChange={this.onChange}\n          checked={value === radioValue}\n          disabled={disabled}\n        />\n        <span className=\"radio-btn__radio-custom\"/>\n        {className === 'button'\n          ? (\n            <span className=\"radio-btn__label-svg\">\n              <CheckIcon className=\"radio-btn__label-check\"/>\n              <CloseIcon className=\"radio-btn__label-uncheck\"/>\n            </span>\n          ) : ''}\n        <span className=\"radio-btn__label\">{label}</span>\n      </label>\n    );\n  }\n}\n\nconst renderRadioButtonField = (props) => {\n  const {\n    input, label, defaultChecked, disabled, className, radioValue,\n  } = props;\n  return (\n    <RadioButtonField\n      {...input}\n      label={label}\n      defaultChecked={defaultChecked}\n      disabled={disabled}\n      radioValue={radioValue}\n      className={className}\n    />\n  );\n};\n\nrenderRadioButtonField.propTypes = {\n  input: PropTypes.shape({\n    onChange: PropTypes.func,\n    name: PropTypes.string,\n  }).isRequired,\n  label: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),\n  defaultChecked: PropTypes.bool,\n  disabled: PropTypes.bool,\n  radioValue: PropTypes.string,\n  className: PropTypes.string,\n};\n\nrenderRadioButtonField.defaultProps = {\n  label: '',\n  defaultChecked: false,\n  disabled: false,\n  radioValue: '',\n  className: '',\n};\n\nexport default renderRadioButtonField;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable react/no-array-index-key */\nimport React, { useEffect, useReducer } from 'react';\nimport Carousel, { Modal, ModalGateway } from 'react-images';\n\nfunction ProductGallery(props) {\n\n  const [state, setState] = useReducer(\n    (a, b) => ({ ...a, ...b }),\n    {\n      image: null,\n      currentIndex: 0,\n      lightboxIsOpen: false,\n    }\n  );\n\n  const { images } = props;\n\n  const { image, currentIndex, lightboxIsOpen } = state;\n\n  const changeImg = (index, e) => {\n    e.preventDefault();\n    setState({\n      currentIndex: index,\n      image: images[index]\n    });\n  };\n\n  const openLightbox = (event) => {\n    event.preventDefault();\n    setState({ lightboxIsOpen: true });\n  };\n\n  useEffect(\n    () => {\n      const index = 0;\n      setState({\n        image: images[index],\n        currentIndex: index\n      });\n    },\n    [images]\n  );\n\n  return (\n    <div className=\"product-gallery\">\n      {\n        (images && images.length && image)\n          ? (\n            <>\n              <a\n                className=\"product-gallery__current-img\"\n                onClick={e => openLightbox(e)}\n                href={state.image.src}\n              >\n                <img src={state.image.src} className=\"product-img\" alt={\"\"}/>\n              </a>\n              <div className=\"product_gallery__gallery\">\n                {images.map((img, i) => (\n                  <button type=\"button\" key={i} onClick={e => changeImg(i, e)} className=\"product-gallery__img-preview\">\n                    <img src={img.src} alt=\"product-img\"/>\n                  </button>\n                ))}\n              </div>\n              <ModalGateway>\n                {lightboxIsOpen ? (\n                  <Modal onClose={() => setState({ lightboxIsOpen: false })}>\n                    <Carousel currentIndex={currentIndex} views={images}/>\n                  </Modal>\n                ) : null}\n              </ModalGateway>\n            </>\n          ) : (\n            <div className=\"text-center\">No images are available for this product.</div>\n          )\n      }\n    </div>\n  );\n\n}\n\nexport default ProductGallery;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport {\n  ADD_TO_CART,\n  FETCH_CART,\n  fetchCart,\n  REMOVE_FROM_CART,\n  UPDATE_CART,\n  UPDATE_CART_ITEM_QUANTITY\n} from '../redux/actions/productsActions';\nimport { useEffect, useRef } from 'react';\nimport { fetchOrder, setLoginRedirect } from '../redux/actions/usersActions';\nimport { SearchService } from '@craftercms/search';\nimport Cookie from 'js-cookie';\nimport { useAppDispatch, useAppSelector } from '../redux/store';\n\nexport function getLoginFormDefaults() {\n  const email = localStorage.getItem(`${process.env.REACT_APP_STORE_KEY}.email`);\n  return {\n    email: email || '',\n    rememberMe: email != null\n  };\n}\n\nexport function useCart({ onEmpty } = {}) {\n  const ref = useRef({});\n  ref.current = { onEmpty };\n  const dispatch = useAppDispatch();\n  const cart = useAppSelector(state => state.products.cart);\n  const locale = useAppSelector(state => state.products).query.locale;\n  const currency = useAppSelector(state => state.products).query.currency;\n  useEffect(\n    () => {\n      if (cart && cart.items.length === 0) {\n        if(ref.current.onEmpty) {\n          ref.current.onEmpty();\n        }\n      }\n    },\n    [cart]\n  );\n  useEffect(() => {\n    dispatch(fetchCart());\n  }, [dispatch, locale, currency])\n  return cart;\n}\n\nexport function useUser({ redirect, onMissing } = {}) {\n  const ref = useRef({});\n  ref.current = { redirect, onMissing };\n  const dispatch = useAppDispatch();\n  const user = useAppSelector(state => state.users.user);\n  useEffect(\n    () => {\n      if (user == null) {\n        if (ref.current.redirect) {\n          dispatch(setLoginRedirect(ref.current.redirect));\n        }\n        if(ref.current.onMissing) {\n          ref.current.onMissing();\n        }\n      }\n    },\n    [dispatch, user]\n  );\n  return user;\n}\n\nexport function useUserBranch() {\n  return useAppSelector(state => state.users);\n}\n\nexport function useOrder(id) {\n  const dispatch = useAppDispatch();\n  const order = useAppSelector(state => state.users.orders[id]);\n  useEffect(\n    () => {\n      if (id && (order == null || order.items == null))\n        dispatch(fetchOrder(id));\n    },\n    [dispatch, id, order]\n  );\n  return order;\n}\n\nexport function useProductsBranch() {\n  return useAppSelector(state => state.products);\n}\n\nexport function useContentBranch() {\n  return useAppSelector(state => state.content);\n}\n\nexport function useCartUpdateInFlight() {\n  const { loading } = useAppSelector(state => state.products);\n  return (\n    loading[FETCH_CART] ||\n    loading[UPDATE_CART] ||\n    loading[ADD_TO_CART] ||\n    loading[REMOVE_FROM_CART] ||\n    loading[UPDATE_CART_ITEM_QUANTITY]\n  );\n}\n\nexport const crafterConf = {\n  baseUrl: process.env.REACT_APP_CRAFTER_BASE,\n  // By default empty on the .env so preview grabs the crafterSite cookie set by authoring\n  // Dev may use it's .env.local for local development or fix the value.\n  site: process.env.REACT_APP_SITE_ID || Cookie.get('crafterSite')\n};\n\nexport function getQuery(query) {\n  const crafterQuery = SearchService.createQuery('elasticsearch');\n  crafterQuery.query = {\n    query: {\n      bool: {\n        filter: [\n          { multi_match: { query, 'type': 'phrase_prefix' } },\n          { match: { 'content-type': '/component/post' } }\n        ]\n      }\n    }\n  };\n  return crafterQuery;\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useReducer, useState } from 'react';\nimport {\n  Card, CardBody, ButtonToolbar, Button, Modal,\n} from 'reactstrap';\nimport ProductGallery from './ProductGallery';\nimport Select from 'react-select';\nimport {\n  addToCart,\n  fetchCart, fetchProduct,\n  removeFromCart,\n  updateCartItemQuantity\n} from '../../redux/actions/productsActions';\nimport { money } from '../../util/string';\nimport { Link } from 'react-router-dom';\nimport ShoppingCartIcon from 'mdi-react/ShoppingCartIcon';\nimport Ratings from 'react-ratings-declarative';\nimport Alert from '../shared/Alert';\nimport { useCartUpdateInFlight } from '../../util/component';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\n\nconst isSale = false;\n\nconst reducer = (a, b) => ({ ...a, ...b });\n\nexport function useMergeState(initialState) {\n  return useReducer(reducer, initialState);\n}\n\nfunction ProductCard(props) {\n\n  const dispatch = useAppDispatch();\n\n  const { cart } = useAppSelector(state => state.products);\n  const { user } = useAppSelector(state => state.users);\n  const { product } = props;\n  const currency = product.variants[0].currency;\n\n  const [images, setImages] = useState([]);\n  const [variant, setVariant] = useState();\n  const [cartItem, setCartItem] = useMergeState({\n    id: null,\n    productId: product.id,\n    variantId: null,\n    quantity: 1\n  });\n\n  const isInCart = cartItem.id != null;\n  const updatesInFlight = useCartUpdateInFlight();\n\n  useEffect(\n    () => {\n      !cart && dispatch(fetchCart())\n    },\n    [dispatch, cart]\n  );\n\n  useEffect(\n    () => {\n      setVariant(product.variants[0]);\n    },\n    [product.id, currency, product.variants]\n  );\n\n  useEffect(\n    () => {\n      setImages(\n        (\n          variant != null\n            ? [variant]\n            : product.variants\n        ).reduce(\n          (images, iVariant) => images.concat(\n            iVariant.images.map((img) => ({ ...img, src: img.url }))\n          ),\n          []\n        )\n      );\n\n      if (variant == null)\n        return;\n\n      const item = (\n        cart\n          ? cart.items.find((item) => (\n            item.variantId === variant.id &&\n            item.productId === product.id\n          ))\n          : null\n      );\n\n      setCartItem({\n        variantId: variant.id,\n        productId: product.id,\n        ...(\n          item\n            ? { id: item.id, quantity: item.quantity }\n            : { id: null, quantity: 1 }\n        )\n      });\n\n    },\n    [variant, cart, product.id, product.variants, setCartItem]\n  );\n\n  return (\n    <Card>\n      <CardBody>\n        <div className=\"product-card\">\n          <ProductGallery images={images}/>\n          <div className=\"product-card__info\">\n            <h1 className=\"product-card__title\">{product.name}</h1>\n            {\n              cartItem.variantId &&\n              <h2 className=\"product-card__price\">\n                {money(variant.price, variant.currency)}\n                {isSale && <span className=\"product-card__old-price\">$23</span>}\n              </h2>\n            }\n            {product.description && <p>{product.description}</p>}\n            <form className=\"form product-card__form\">\n              <div className=\"form__form-group\">\n                <span className=\"form__form-group-label product-card__form-label\">Select</span>\n                <div className=\"form__form-group-field\">\n                  <VariantSelection\n                    value={variant}\n                    variants={product.variants}\n                    onChange={({ variant }) => setVariant(variant)}\n                  />\n                </div>\n              </div>\n              <div className=\"form__form-group\">\n                <span className=\"form__form-group-label product-card__form-label\">Quantity</span>\n                <div className=\"form__form-group-field\">\n                  <input\n                    type=\"number\"\n                    disabled={updatesInFlight}\n                    value={cartItem.quantity}\n                    onChange={(e) => onUpdateQuantity(e.target.value)}\n                  />\n                </div>\n              </div>\n              <ButtonToolbar className=\"product-card__btn-toolbar\">\n                {\n                  isInCart\n                    ? (\n                      <ButtonToolbar className=\"product-card__btn-toolbar\">\n                        <button\n                          type=\"button\"\n                          className=\"btn btn-warning\"\n                          disabled={updatesInFlight}\n                          onClick={onRemoveFromCart}\n                        >\n                          Remove from cart\n                        </button>\n                        <Link to=\"/cart\" className=\"product-card__wish-btn\">\n                          <ShoppingCartIcon/> View cart\n                        </Link>\n                      </ButtonToolbar>\n                    ) : (\n                      <ButtonToolbar className=\"product-card__btn-toolbar\">\n                        <button\n                          type=\"button\"\n                          className=\"btn btn-primary\"\n                          disabled={!cartItem.variantId || updatesInFlight}\n                          onClick={onAddToCart}\n                        >\n                          Add to cart\n                        </button>\n                        {\n                          variant &&\n                          !variant.onStock &&\n                          <span className=\"product-card__not-in-stock\">\n                            (On backorder)\n                          </span>\n                        }\n                      </ButtonToolbar>\n                    )\n                }\n              </ButtonToolbar>\n            </form>\n            <div className=\"product-card_ _rate\">\n              <SubmitReview\n                product={product}\n                isLoggedIn={!!user}\n                onSuccess={() => dispatch(fetchProduct(product.id))}\n              />\n            </div>\n          </div>\n        </div>\n      </CardBody>\n    </Card>\n  );\n\n  function onAddToCart() {\n    (cartItem.quantity > 0) && dispatch(\n      addToCart(cartItem)\n    );\n  }\n\n  function onRemoveFromCart() {\n    isInCart && dispatch(\n      removeFromCart(cartItem)\n    );\n  }\n\n  function onUpdateQuantity(nextQuantity) {\n    nextQuantity = parseInt(nextQuantity, 10);\n    if (nextQuantity < 0) {\n      nextQuantity = 0;\n    }\n    if (isInCart) {\n      dispatch(\n        updateCartItemQuantity({ ...cartItem, quantity: nextQuantity })\n      );\n    }\n    setCartItem({ quantity: nextQuantity });\n  }\n\n}\n\nfunction SubmitReview(props) {\n\n  const { product, isLoggedIn, onSuccess } = props;\n  const { rating, name } = product;\n\n  const [value, setValue] = useState();\n  const [comments, setComments] = useState('');\n  const [openModal, setOpenModal] = useState(false);\n  const [message, setMessage] = useState();\n\n  const toggleOpen = () => setOpenModal(!openModal);\n  const submit = () => {\n    fetch(\n      `/api/1/product/${product.id}/review.json`,\n      {\n        body: JSON.stringify({ rating: value, text: comments }),\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json; charset=UTF-8' }\n      }\n    ).then(async (response) => {\n      const data = await response.json();\n      if (response.status === 200) {\n        setValue();\n        setMessage();\n        setComments('');\n        setOpenModal(false);\n        onSuccess && onSuccess(response);\n      } else {\n        setMessage({ type: 'danger', text: data.message });\n      }\n    });\n  };\n\n  const\n    widgetEmptyColors = '#ccc',\n    widgetHoverColors = '#FFCC00',\n    widgetRatedColors = '#FFCC00',\n    widgetDimensions = '20px',\n    widgetSpacings = '5px';\n\n  return (\n    <div className=\"rating-widget\">\n      <section className=\"rating-widget__header\">\n        <div className=\"rating-widget__average\">\n          <div>\n            <Ratings\n              rating={rating == null ? 0 : rating.average}\n              widgetEmptyColors={widgetEmptyColors}\n              widgetHoverColors={widgetHoverColors}\n              widgetRatedColors={widgetRatedColors}\n              widgetDimensions={widgetDimensions}\n              widgetSpacings={widgetSpacings}\n            >\n              <Ratings.Widget/>\n              <Ratings.Widget/>\n              <Ratings.Widget/>\n              <Ratings.Widget/>\n              <Ratings.Widget/>\n            </Ratings>\n          </div>\n          <span className=\"rating-widget__label\">\n            {\n              rating == null\n                ? 'No reviews yet.'\n                : `${rating.reviews} review${rating.reviews > 1 ? 's' : ''}. ${rating.average} average rating.`\n            }\n          </span>\n        </div>\n        <div className=\"rating-widget__user\">\n          {\n            isLoggedIn &&\n            <Button outline className=\"btn-sm\" onClick={toggleOpen}>\n              Submit a review\n            </Button>\n          }\n        </div>\n      </section>\n      <section className=\"rating-widget__reviews\">\n        {\n          // rating && JSON.stringify(rating.reviews, null, '  ')\n          // rating && rating.reviews.map(review =>\n          // <div className=\"rating-widget__review\"></div>\n          // )\n        }\n      </section>\n      <Modal\n        isOpen={openModal}\n        toggle={toggleOpen}\n        className={`modal-dialog--`}\n      >\n        <div className=\"modal__header\">\n          <button className=\"lnr lnr-cross modal__close-btn\" type=\"button\" onClick={toggleOpen}/>\n          <h3 className=\"bold-text  modal__title\">Review \"{name}\"</h3>\n        </div>\n        <div className=\"modal__body\">\n          <div className=\"form\">\n            {\n              message &&\n              <Alert color={message.type} className=\"alert--bordered\">\n                <span>{message.text}</span>\n              </Alert>\n            }\n            <div className=\"form__form-group\">\n              <div>\n                <Ratings\n                  rating={value}\n                  changeRating={setValue}\n                  widgetEmptyColors={widgetEmptyColors}\n                  widgetHoverColors={widgetHoverColors}\n                  widgetRatedColors={widgetRatedColors}\n                  widgetDimensions={widgetDimensions}\n                  widgetSpacings={widgetSpacings}\n                >\n                  <Ratings.Widget/>\n                  <Ratings.Widget/>\n                  <Ratings.Widget/>\n                  <Ratings.Widget/>\n                  <Ratings.Widget/>\n                </Ratings>\n              </div>\n              <span className=\"rating-widget__label\">\n                {value ? `Your rating: ${value} star${value > 1 ? 's' : ''}.` : `How would you rate ${name}?`}\n              </span>\n            </div>\n            <div className=\"form__form-group\">\n              <div className=\"form__form-group-field\">\n                <textarea\n                  value={comments}\n                  onChange={(e) => setComments(e.target.value)}\n                  placeholder={`Any additional comments...`}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <ButtonToolbar className=\"modal__footer\">\n          <Button onClick={toggleOpen}>Cancel</Button>\n          <Button outline onClick={submit} disabled={value == null}>Ok</Button>\n        </ButtonToolbar>\n      </Modal>\n    </div>\n  );\n\n}\n\nexport function VariantSelection(props) {\n  const { variants, value, onChange, placeholder, components } = props;\n  const options = variants ? variants.map((variant) => ({\n    value: variant.id,\n    label: getVariantLabel(variant),\n    variant\n  })) : [];\n  const option = value ? { value: value.id, label: getVariantLabel(value), variant: value } : null;\n  return (\n    <Select\n      value={option}\n      onChange={onChange}\n      options={options}\n      clearable={false}\n      className=\"react-select\"\n      classNamePrefix=\"react-select\"\n      placeholder={placeholder}\n      components={components}\n    />\n  );\n}\n\nVariantSelection.defaultProps = {\n  options: null,\n  components: {\n    Option: function Option({ innerProps, isDisabled, data }) {\n      data = data.variant;\n      const label = getVariantLabel(data);\n      const color = data.attributes.filter((attr) => attr.name === 'Color').map((attr) => attr.value.toLowerCase())[0];\n      // noinspection JSConstructorReturnsPrimitive\n      return (!isDisabled ? (\n        <div\n          className=\"react-select__option\"\n          {...innerProps}\n        >\n          {label}\n          {\n            color &&\n            <span\n              className=\"react-select__color\"\n              style={{ backgroundColor: color, boxShadow: '0 0 1px 0 rgba(0,0,0,.5)' }}\n            />\n          }\n        </div>\n      ) : null);\n    }\n  },\n  onChange: () => void null,\n  placeholder: 'Select...',\n};\n\nfunction getVariantLabel(variant) {\n  return variant.attributes.filter((attr) => attr.name === 'Filtersize').map((attr) => attr.value.label);\n}\n\nexport default ProductCard;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Col, Container, Row } from 'reactstrap';\nimport Layout from './Layout';\nimport ProductCard from './ProductCard';\nimport Spinner from '../shared/Spinner';\nimport { fetchProduct } from '../../redux/actions/productsActions';\nimport Product from './Product';\nimport { forkJoin, of } from 'rxjs';\nimport { ajax } from 'rxjs/ajax';\nimport { map } from 'rxjs/operators';\nimport { BlogPostCard } from './BlogTeaser';\nimport { getProducts } from '../../util/products';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\n\nexport default function ProductDetails(props) {\n\n  const dispatch = useAppDispatch();\n  const products = useAppSelector(state => state.products);\n\n  const id = props.match.params.product;\n  const product = products.byId ? products.byId[id] : null;\n  const [related, setRelated] = useState();\n\n  useEffect(\n    () => {\n      // if (product == null)\n        dispatch(fetchProduct(id))\n    },\n    [dispatch, id, products.query.locale, products.query.currency]\n  );\n\n  useEffect(\n    () => {\n      let sub = { unsubscribe: () => void null };\n      if (product != null) {\n\n        const keys = product.categories.reduce(\n          (oMap, category) => {\n            oMap.ids.push(category.id);\n            oMap.keys.push(`{matches: \"${category.key}\"}`);\n            return oMap;\n          },\n          { ids: [], keys: [] }\n        );\n\n        const products$ = keys.ids.length\n          ? getProducts({ limit: 4, filter: `categories:${keys.ids.join(',')}`, locale: products.query.locale, currency: products.query.currency })\n          : of({ response: { items: [] } });\n\n        const posts$ = keys.keys.length\n          ? ajax.post(\n            process.env.REACT_APP_GRAPHQL_SERVER,\n            {\n              query: `query {\n              posts: component_post(limit: 3) {\n                items {\n                  title_s\n                  image_s\n                  slug_s\n                  categories_o @skip(if: true) {\n                    item {\n                      key(filter: {or: [${keys.keys.join(',')}]})\n                    }\n                  }\n                }\n              }\n            }`,\n              variables: {}\n            },\n            { 'Content-Type': 'application/json; charset=UTF-8' }\n          ) : of({ response: { data: { posts: { items: [] } } } });\n\n        sub = forkJoin(products$, posts$).pipe(\n          map(([{ response: products }, { response: posts }]) => ([\n            products.items.filter((prod) => prod.id !== product.id).slice(0, 3),\n            posts.data.posts.items\n          ]))\n        ).subscribe(([products, posts]) => {\n          setRelated({ products, posts });\n        });\n\n      }\n      return () => sub.unsubscribe();\n    },\n    [product, products.query.locale, products.query.currency]\n  );\n\n  return (\n    <Layout>\n      <Container>\n        {\n          product ? (\n            <Row>\n              <Col md={12} lg={12}>\n                <ProductCard product={product}/>\n              </Col>\n              {related && <>\n                {related.products.length > 0 && <Col md={12}>\n                  <h2 className=\"page-title page-title--not-last\">Related Products</h2>\n                  <div className=\"catalog-items__wrap\">\n                    <div className=\"catalog-items\">\n                      {\n                        related.products.map(product =>\n                          <Product key={product.id} product={product}/>\n                        )\n                      }\n                    </div>\n                  </div>\n                </Col>}\n                {related.posts.length > 0 && <Col md={12}>\n                  <h2 className=\"page-title page-title--not-last\">Related Posts</h2>\n                  <Row>\n                    {\n                      related.posts.map((post) =>\n                        <Col key={post.slug_s} md={4}>\n                          <BlogPostCard {...post} hideSummary/>\n                        </Col>\n                      )\n                    }\n                  </Row>\n                </Col>}\n              </>}\n            </Row>\n          ) : <Spinner/>\n        }\n      </Container>\n    </Layout>\n  );\n\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Anchor from '../shared/Anchor';\nimport { getLoginFormDefaults } from '../../util/component';\n\nimport EyeIcon from 'mdi-react/EyeIcon';\nimport KeyVariantIcon from 'mdi-react/KeyVariantIcon';\nimport AccountOutlineIcon from 'mdi-react/AccountOutlineIcon';\nimport { Link, useHistory } from 'react-router-dom';\nimport renderCheckBoxField from '../shared/form/CheckBox';\nimport Alert from '../shared/Alert';\nimport { ajax } from 'rxjs/ajax';\nimport { catchError } from 'rxjs/operators';\nimport { loginComplete } from '../../redux/actions/usersActions';\nimport { useHeader } from '../shared/hooks';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\nimport { Form, Field } from 'react-final-form';\n\nfunction LogInFormComponent(props) {\n\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n  const state = useAppSelector(state => state);\n\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState();\n\n  const onSubmit = (data) => {\n    if (data) {\n      if (data.rememberMe) {\n        localStorage.setItem(`${process.env.REACT_APP_STORE_KEY}.email`, data.email);\n      } else {\n        localStorage.removeItem(`${process.env.REACT_APP_STORE_KEY}.email`);\n      }\n      ajax.post(\n        `/api/1/security/login.json`,\n        data,\n        {\n          'Content-Type': 'application/json; charset=UTF-8'\n        }\n      ).pipe(\n        catchError((error) => [error])\n      ).subscribe((response) => {\n        if (response.name === 'AjaxError') {\n          setError(response.response.message);\n        } else {\n          dispatch(loginComplete(response.response));\n          history.push(state.users.loginRedirect);\n        }\n      });\n    }\n  };\n\n  useEffect(\n    () => {\n      const meRemembered = !!localStorage.getItem(`${process.env.REACT_APP_STORE_KEY}.email`);\n      document.querySelectorAll('.form input')[meRemembered ? 1 : 0].focus();\n    },\n    []\n  );\n\n  return (\n    <Form\n      initialValues={getLoginFormDefaults()}\n      onSubmit={onSubmit}\n    >\n      {({ handleSubmit } ) => (\n        <form className=\"form\" onSubmit={handleSubmit}>\n          {\n            error &&\n            <Alert color=\"danger\" className=\"alert--bordered\">\n              <p>{error}</p>\n            </Alert>\n          }\n          <div className=\"form__form-group\">\n            <div className=\"form__form-group-field\">\n              <div className=\"form__form-group-icon\">\n                <AccountOutlineIcon/>\n              </div>\n              <Field\n                name=\"email\"\n                type=\"text\"\n                component=\"input\"\n                placeholder=\"Name\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <div className=\"form__form-group-field\">\n              <div className=\"form__form-group-icon\">\n                <KeyVariantIcon/>\n              </div>\n              <Field\n                name=\"password\"\n                component=\"input\"\n                type={showPassword ? 'text' : 'password'}\n                placeholder=\"Password\"\n              />\n              <button\n                type=\"button\"\n                className={`form__form-group-button${showPassword ? ' active' : ''}`}\n                onClick={() => setShowPassword(!showPassword)}\n              ><EyeIcon/>\n              </button>\n            </div>\n            <div className=\"account__forgot-password\">\n              <a href=\"/\">Forgot a password?</a>\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <div className=\"form__form-group-field\">\n              <Field\n                type=\"checkbox\"\n                name=\"rememberMe\"\n                label=\"Remember me\"\n                component={renderCheckBoxField}\n              />\n            </div>\n          </div>\n          <div className=\"account__btns\">\n            <button className=\"btn btn-primary account__btn account__sign-in-btn\" type=\"submit\">Sign In</button>\n            <Link className=\"btn btn-outline-primary account__btn account__register-btn\" to=\"/register\">\n              Create Account\n            </Link>\n          </div>\n        </form>\n      )}\n    </Form>\n  );\n\n}\n\nexport const LogInForm = LogInFormComponent;\n\nfunction LogIn() {\n  const header = useHeader();\n\n  return (\n    <div className=\"account\">\n      <div className=\"account__wrapper\">\n        <div className=\"account__card\">\n          <div className=\"login-view__logo\">\n            {\n              header &&\n              <Anchor href={header.logo_url_s} className=\"login-view__logo\">\n                <img src={header.logo_s} alt={header.logo_alt_t} className=\"login-view__logo-img\"/>\n              </Anchor>\n            }\n          </div>\n          <div className=\"account__head\">\n            <h3 className=\"account__title\">Welcome</h3>\n            <h4 className=\"account__subhead subhead\">Please log in</h4>\n          </div>\n          <LogInForm/>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LogIn;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { memo, useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Anchor from '../shared/Anchor';\nimport { registrationComplete } from '../../redux/actions/usersActions';\nimport { Button, ButtonToolbar } from 'reactstrap';\nimport CheckboxMarkedCircleIcon from 'mdi-react/CheckboxMarkedCircleIcon';\nimport EmailIcon from 'mdi-react/EmailIcon';\nimport EyeIcon from 'mdi-react/EyeIcon';\nimport KeyVariantIcon from 'mdi-react/KeyVariantIcon';\nimport AccountOutlineIcon from 'mdi-react/AccountOutlineIcon';\nimport MailRuIcon from 'mdi-react/MailRuIcon';\nimport Alert from '../shared/Alert';\nimport { catchError } from 'rxjs/operators';\nimport { ajax } from 'rxjs/ajax';\nimport { useHeader } from '../shared/hooks';\nimport { Form, Field } from 'react-final-form';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\n\nexport const RegisterFormComponent = memo(function ({ onSuccess }) {\n\n  const [error, setError] = useState();\n  const [showPassword, setShowPassword] = useState(false);\n\n  const submit = (values) => {\n    ajax.post(\n      `/api/1/customer/signup.json`,\n      values,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(\n      catchError((error) => [error])\n    ).subscribe((response) => {\n      if (response.name === 'AjaxError') {\n        setError(response.response.message);\n      } else {\n        onSuccess && onSuccess(response.response, values);\n      }\n    })\n  };\n\n  return (\n    <Form\n      onSubmit={submit}\n    >\n      {({ handleSubmit }) => (\n        <form className=\"form\" onSubmit={handleSubmit}>\n          {\n            error &&\n            <Alert color=\"danger\" className=\"alert--bordered\">\n              <p>{error}</p>\n            </Alert>\n          }\n          <div className=\"form__form-group\">\n            <div className=\"form__form-group-field\">\n              <div className=\"form__form-group-icon\">\n                <AccountOutlineIcon/>\n              </div>\n              <Field\n                name=\"firstName\"\n                component=\"input\"\n                type=\"text\"\n                placeholder=\"First Name\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <div className=\"form__form-group-field\">\n              <div className=\"form__form-group-icon\">\n                <AccountOutlineIcon/>\n              </div>\n              <Field\n                name=\"lastName\"\n                component=\"input\"\n                type=\"text\"\n                placeholder=\"Last Name\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <div className=\"form__form-group-field\">\n              <div className=\"form__form-group-icon\">\n                <MailRuIcon/>\n              </div>\n              <Field\n                name=\"email\"\n                component=\"input\"\n                type=\"email\"\n                placeholder=\"E-mail (username)\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group form__form-group--forgot\">\n            <div className=\"form__form-group-field\">\n              <div className=\"form__form-group-icon\">\n                <KeyVariantIcon/>\n              </div>\n              <Field\n                name=\"password\"\n                component=\"input\"\n                type={showPassword ? 'text' : 'password'}\n                placeholder=\"Password\"\n              />\n              <button\n                type=\"button\"\n                className={`form__form-group-button${showPassword ? ' active' : ''}`}\n                onClick={() => setShowPassword(!showPassword)}\n              ><EyeIcon/>\n              </button>\n            </div>\n          </div>\n          <div className=\"account__btns\">\n            <button\n              type=\"submit\"\n              className=\"btn btn-primary account__btn\"\n            >\n              Sign Up\n            </button>\n          </div>\n        </form>\n      )}\n    </Form>\n  );\n});\n\nexport const RegisterForm = RegisterFormComponent;\n\nconst RegistrationConfirmation = () => (\n  <div className=\"email-confirmation\">\n    <div className=\"email-confirmation__icon\">\n      <EmailIcon className=\"email-confirmation__mail\"/>\n      <CheckboxMarkedCircleIcon className=\"email-confirmation__check\"/>\n    </div>\n    <h3 className=\"email-confirmation__title\">Your account was created successfully.</h3>\n    <p className=\"email-confirmation__sub\">Please check your email to confirm your account.</p>\n    <ButtonToolbar className=\"email-confirmation__buttons\">\n      <Button color=\"primary\">Resend E-mail</Button>\n    </ButtonToolbar>\n  </div>\n);\nconst Register = () => {\n  const dispatch = useAppDispatch();\n  const success = useAppSelector(state => state.users.registerConfirmPending);\n  const header = useHeader();\n\n  return (\n    <div className=\"account\">\n      <div className=\"account__wrapper\">\n        <div className=\"account__card\">\n          <div className=\"login-view__logo\">\n            {\n              header &&\n              <Anchor href={header.logo_url_s} className=\"login-view__logo\">\n                <img src={header.logo_s} alt={header.logo_alt_t} className=\"login-view__logo-img\"/>\n              </Anchor>\n            }\n          </div>\n          {\n            success\n              ? <RegistrationConfirmation/>\n              : <>\n                <div className=\"account__head\">\n                  <h3 className=\"account__title\">\n                    Create an account\n                  </h3>\n                </div>\n                <RegisterForm onSuccess={() => dispatch(registrationComplete())}/>\n                <div className=\"account__have-account\">\n                  <p>Already have an account? <Link to=\"/login\">Login</Link></p>\n                </div>\n              </>\n          }\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { withTranslation } from 'react-i18next';\n\nconst NotFound404 = (props) => (\n  <div className=\"not-found\">\n    <div className=\"not-found__content\">\n      <h3 className=\"not-found__info\">The page you are looking for was not be found.</h3>\n      <Link className=\"btn btn-primary\" to={props.href || '/'}>{props.t('back_home')}</Link>\n    </div>\n  </div>\n);\n\nexport default withTranslation('common')(NotFound404);\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Button, ButtonGroup, ButtonToolbar, Table } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport { removeFromCart, updateCartItemQuantity } from '../../redux/actions/productsActions';\nimport { money } from '../../util/string';\nimport AddCircleOutlineIcon from 'mdi-react/AddCircleOutlineIcon';\nimport DeleteForeverIcon from 'mdi-react/DeleteForeverIcon';\nimport RemoveCircleOutlineIcon from 'mdi-react/RemoveCircleOutlineIcon';\nimport { Empty } from '../shared/Empty';\nimport { useCartUpdateInFlight } from '../../util/component';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\n\nexport function CartSummary() {\n  const { cart } = useAppSelector(state => state.products);\n  return (\n    (cart.items.length === 0) ? (\n      <h2 className=\"text-center\">Your cart is empty</h2>\n    ) : (\n      <Table className=\"table--bordered cart__table cart__summary-table\" responsive>\n        <thead>\n        <tr>\n          <th>Product</th>\n          <th/>\n        </tr>\n        </thead>\n        <tbody>\n        {\n          cart && cart.items.map((item) => (\n            <tr key={item.id}>\n              <td>\n                <span className=\"cart__preview-img\">\n                  <img src={item.images[0].url} alt=\"product_preview\"/>\n                </span>\n                <span className=\"cart__product-name--sm\">\n                  {item.productName}\n                </span>\n              </td>\n              <td>\n                <div className=\"cart__quantity-wrapper\">\n                  <span className=\"cart__quantity-display\">x{item.quantity}</span>\n                </div>\n              </td>\n            </tr>\n          ))\n        }\n        </tbody>\n      </Table>\n    )\n  );\n}\n\nfunction CartBody(props) {\n  const dispatch = useAppDispatch();\n  const { cart } = useAppSelector(state => state.products);\n  const options = {\n    ...props.displayOptions\n      ? { ...CartBody.defaultProps.displayOptions, ...props.displayOptions }\n      : CartBody.defaultProps.displayOptions\n  };\n  const updatesInFlight = useCartUpdateInFlight();\n  return (\n    (cart.items.length === 0) ? (\n      <Empty description={\n        <>\n          <span>Your cart is empty.</span><br/>\n          <span>If you had left items in your cart, simply <Link to=\"/login\">log in</Link> to recover them.</span>\n        </>\n      } />\n    ) : (\n      <Table className=\"table--bordered cart__table\" responsive>\n        <thead>\n        <tr>\n          <th>Product</th>\n          <th>Quantity</th>\n          {options.showPrice && <th>Price</th>}\n          {options.showTax && <th>Tax</th>}\n          {options.showTotal && <th>Total</th>}\n          {options.showRemove && <th/>}\n        </tr>\n        </thead>\n        <tbody>\n        {\n          cart && cart.items.map((item) => (\n            <tr key={item.id}>\n              <td>\n                <span className=\"cart__preview-img\">\n                  <img src={item.images[0].url} alt=\"product_preview\"/>\n                </span>\n                <Link\n                  className=\"cart__product-name\"\n                  to={`/catalog/${item.productId}`}\n                >\n                  {item.productName}\n                </Link>\n              </td>\n              <td>\n                <div className=\"cart__quantity-wrapper\">\n                  <span className=\"cart__quantity-display\">{item.quantity}</span>\n                  {\n                    options.showQuantityModifiers &&\n                    <ButtonToolbar>\n                      <ButtonGroup className=\"btn-group--icons\">\n                        <Button\n                          type=\"button\"\n                          className=\"cart__remove-one-button sm\"\n                          outline\n                          onClick={() =>\n                            dispatch(updateCartItemQuantity({\n                              ...item,\n                              quantity: item.quantity - 1\n                            }))\n                          }\n                          disabled={updatesInFlight}\n                        >\n                          <RemoveCircleOutlineIcon/>\n                        </Button>\n                        <Button\n                          type=\"button\"\n                          className=\"cart__add-one-button sm\"\n                          outline\n                          onClick={() =>\n                            dispatch(\n                              updateCartItemQuantity({\n                                ...item,\n                                quantity: item.quantity + 1\n                              })\n                            )\n                          }\n                          disabled={updatesInFlight}\n                        >\n                          <AddCircleOutlineIcon/>\n                        </Button>\n                      </ButtonGroup>\n                    </ButtonToolbar>\n                  }\n                </div>\n              </td>\n              {options.showPrice && <td>{money(item.unitPrice, cart.currency)}</td>}\n              {options.showTax && <td>{money(item.taxedPrice, cart.currency)}</td>}\n              {options.showTotal && <td>{money(item.totalPrice, cart.currency)}</td>}\n              {options.showRemove && <td>\n                <button\n                  className=\"cart__table-btn\" type=\"button\"\n                  onClick={() => dispatch(removeFromCart(item))}\n                >\n                  <DeleteForeverIcon/> Remove\n                </button>\n              </td>}\n            </tr>\n          ))\n        }\n        </tbody>\n      </Table>\n    )\n  );\n}\n\nexport function OrderTotals(props) {\n  const { cart } = useAppSelector(state => state.products);\n  return (\n    <>\n      <h3 className=\"order-details__title\">Order Details</h3>\n      <div className=\"order-details__body\">\n        <table className=\"order-details__table\">\n          <tbody>\n          <tr>\n            <th className=\"order-details__th\">Products</th>\n            <td className=\"order-details__td\">{money(cart.items.reduce((sum, item) => (sum + item.totalPrice), 0), cart.currency)}</td>\n          </tr>\n          <tr>\n            <th className=\"order-details__th\">Shipping</th>\n            <td className=\"order-details__td\">{money(cart.shippingPrice, cart.currency)}</td>\n          </tr>\n          <tr>\n            <th className=\"order-details__th\">Sub Total</th>\n            <td className=\"order-details__td\">{money(cart.totalPrice, cart.currency)}</td>\n          </tr>\n          {\n            cart.taxedPrice &&\n            <tr>\n              <th className=\"order-details__th\">Tax</th>\n              <td className=\"order-details__td\">{money(cart.taxedPrice - cart.totalPrice, cart.currency)}</td>\n            </tr>\n          }\n          <tr>\n            <th className=\"order-details__th\">Total</th>\n            <td className=\"order-details__td\">{money(cart.taxedPrice, cart.currency)}</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </>\n  );\n}\n\nCartBody.defaultProps = {\n  displayOptions: {\n    showTax: true,\n    showPrice: true,\n    showTotal: true,\n    showRemove: true,\n    showQuantityModifiers: true\n  }\n};\n\nexport default CartBody;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport Layout from './Layout';\nimport { ButtonToolbar, Card, CardBody, Col, Container, Row } from 'reactstrap';\n\nimport { Link } from 'react-router-dom';\nimport { money } from '../../util/string';\nimport Spinner from '../shared/Spinner';\nimport CartBody from './CartBody';\nimport { useCart } from '../../util/component';\n\nfunction CartView() {\n  const cart = useCart();\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          <Col md={12} lg={12}>\n            {\n              (cart == null)\n                ? <Spinner contained/>\n                : <Card className=\"cart\">\n                  <CardBody>\n                    <div className=\"card__title\">\n                      <h1 className=\"page-title bold-text\">Cart</h1>\n                    </div>\n                    <CartBody/>\n                    {\n                      (cart.items.length > 0) &&\n                      <div className=\"cart__total-wrapper\">\n                        <h4 className=\"cart__total\">Sub-total: {money(cart.totalPrice, cart.currency)}</h4>\n                        <ButtonToolbar className=\"form__button-toolbar\">\n                          <Link className=\"btn btn-primary\" to=\"/checkout\">Checkout</Link>\n                        </ButtonToolbar>\n                      </div>\n                    }\n                  </CardBody>\n                </Card>\n            }\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nexport default CartView;\n\n\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable react/no-children-prop */\nimport React, { useState } from 'react';\nimport { Button, ButtonToolbar } from 'reactstrap';\nimport TextField from '@material-ui/core/TextField';\nimport PropTypes from 'prop-types';\nimport renderCheckBoxField from '../shared/form/CheckBox';\nimport Alert from '../shared/Alert';\nimport { loginComplete } from '../../redux/actions/usersActions';\nimport { Form, Field } from 'react-final-form';\nimport { FORM_ERROR } from 'final-form';\nimport { useAppDispatch } from '../../redux/store';\n\nconst renderTextField = ({ input, label, meta: { touched, error }, children }) => (\n  <TextField\n    className=\"material-form__field\"\n    label={label}\n    error={touched && error}\n    children={children}\n    value={input.value}\n    onChange={(e) => {\n      e.preventDefault();\n      input.onChange(e.target.value);\n    }}\n  />\n);\n\nrenderTextField.propTypes = {\n  input: PropTypes.shape().isRequired,\n  label: PropTypes.string,\n  meta: PropTypes.shape({\n    touched: PropTypes.bool,\n    error: PropTypes.string,\n  }),\n  children: PropTypes.arrayOf(PropTypes.element),\n};\n\nrenderTextField.defaultProps = {\n  meta: null,\n  label: '',\n  children: [],\n};\n\nfunction ProfileSettings(props) {\n\n  const dispatch = useAppDispatch();\n\n  const { initialValues } = props;\n  const [success, setSuccess] = useState();\n\n  function submit(values) {\n    success && setSuccess();\n    return fetch('/api/1/customer/update.json', {\n      body: JSON.stringify(values),\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n      }\n    }).then(async (response) => {\n      if (response.status !== 200) {\n        const data = await response.json();\n        return { [FORM_ERROR]: data.message };\n      }\n      setSuccess('Update successful.');\n      return response.json();\n    }).then((user) => {\n      dispatch(loginComplete(user))\n    });\n  }\n\n  return (\n    <Form\n      initialValues={initialValues}\n      onSubmit={submit}\n    >\n      {({ handleSubmit, form, submitError }) => (\n        <form className=\"form\" onSubmit={handleSubmit}>\n          {\n            success &&\n            <Alert color=\"success\" className=\"alert--bordered\" onDismiss={() => setSuccess()}>\n              <p>{success}</p>\n            </Alert>\n          }\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">Name</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                type=\"text\"\n                name=\"firstName\"\n                component=\"input\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">Middle Name</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                type=\"text\"\n                name=\"middleName\"\n                component=\"input\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">Last Name</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                type=\"text\"\n                name=\"lastName\"\n                component=\"input\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">Phone Number</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                type=\"text\"\n                name=\"phone\"\n                component=\"input\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">E-mail</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                type=\"text\"\n                name=\"email\"\n                component=\"input\"\n              />\n            </div>\n          </div>\n          {submitError && <div className=\"error\">{submitError}</div>}\n          <ButtonToolbar className=\"form__button-toolbar\">\n            <Button color=\"primary\" type=\"submit\">Update profile</Button>\n            <Button type=\"button\" onClick={form.reset}>\n              Cancel\n            </Button>\n          </ButtonToolbar>\n        </form>\n      )}\n    </Form>\n  );\n\n}\n\nfunction ChangePasswordFormComponent(props) {\n  const [type, setType] = useState('password');\n  const [success, setSuccess] = useState();\n\n  function submit(values) {\n    success && setSuccess();\n    return fetch('/api/1/customer/change-password.json', {\n      body: JSON.stringify(values),\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8'\n      }\n    }).then(async (response) => {\n      if (response.status !== 200) {\n        const data = await response.json();\n        return { [FORM_ERROR]: data.message };\n      }\n      setSuccess('Update successful.');\n      return response.json();\n    });\n  }\n\n  return (\n    <Form\n      onSubmit={submit}\n    >\n      {({ handleSubmit, form, submitError }) => (\n        <form className=\"form\" onSubmit={values => handleSubmit(values).then(form.reset)}>\n          {\n            success &&\n            <Alert color=\"success\" className=\"alert--bordered\" onDismiss={() => setSuccess()}>\n              <p>{success}</p>\n            </Alert>\n          }\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">Current Password</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                name=\"currentPassword\"\n                component=\"input\"\n                type={type}\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">New Password</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                name=\"newPassword\"\n                component=\"input\"\n                type={type}\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <div className=\"form__form-group-field\">\n              <Field\n                name=\"showPassword\"\n                onChange={(value, checked) => setType(checked ? 'text' : 'password')}\n                component={renderCheckBoxField}\n                label=\"Show passwords\"\n              />\n            </div>\n          </div>\n          {submitError && <div className=\"error\">{submitError}</div>}\n          <ButtonToolbar className=\"form__button-toolbar\">\n            <Button color=\"primary\" type=\"submit\">Submit</Button>\n            <Button type=\"button\" onClick={form.reset}>\n              Cancel\n            </Button>\n          </ButtonToolbar>\n        </form>\n      )}\n    </Form>\n  );\n}\n\nexport const ChangePasswordForm = ChangePasswordFormComponent;\n\nexport default ProfileSettings;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { Badge, Table } from 'reactstrap';\nimport React, { useEffect } from 'react';\nimport { FETCH_ORDERS, fetchOrders } from '../../redux/actions/usersActions';\nimport Spinner from '../shared/Spinner';\nimport { capitalize, money } from '../../util/string';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Empty } from '../shared/Empty';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\n\nfunction OrderList() {\n  const history = useHistory();\n\n  const dispatch = useAppDispatch();\n  const { orders: ordersTable, loading } = useAppSelector(state => state.users);\n  const orders = Object.values(ordersTable);\n  useEffect(\n    () => {\n      if (loading[FETCH_ORDERS] == null)\n        dispatch(fetchOrders());\n    },\n    [dispatch, loading]\n  );\n  if (loading[FETCH_ORDERS]) {\n    return <Spinner contained/>;\n  }\n  return (\n    (orders.length === 0) ? (\n      <Empty description={\n        <>You haven't placed any orders yet. Visit <Link to=\"/catalog\">the catalog</Link> to place your first order!</>\n      } />\n    ) : (\n      <Table responsive hover>\n        <thead>\n        <tr>\n          <th>Order ID</th>\n          <th>Created</th>\n          <th>Total</th>\n          <th>Shipping Status</th>\n          <th>Order Status</th>\n        </tr>\n        </thead>\n        <tbody>\n        {orders.map(({ id, created, modified, currency, totalPrice, taxedPrice, shippingStatus, paymentStatus, orderStatus }) =>\n          <tr key={id} onClick={() => history.push(`/account/orders/${id}`)}>\n            <td>{id.substr(0, id.indexOf('-'))}</td>\n            <td>{created}</td>\n            <td>{money(totalPrice + taxedPrice, currency)}</td>\n            <td>{shippingStatus}</td>\n            <td>\n              <Badge color={orderStatus === 'COMPLETE' ? 'success' : 'warning'}>{capitalize(orderStatus)}</Badge>\n            </td>\n          </tr>\n        )}\n        </tbody>\n      </Table>\n    )\n  );\n}\n\nexport default OrderList;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useMemo, useState } from 'react';\nimport Layout from './Layout';\nimport { Button, ButtonToolbar, Card, CardBody, Col, Container, Row } from 'reactstrap';\nimport Alert from '../shared/Alert';\nimport Spinner from '../shared/Spinner';\nimport { addAddressComplete, editAddressComplete } from '../../redux/actions/usersActions';\nimport { RadioButton } from '../shared/form/RadioButton';\nimport { Link } from 'react-router-dom';\nimport { Empty } from '../shared/Empty';\nimport { useUser } from '../../util/component';\nimport * as qs from 'query-string';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\nimport { Form, Field } from 'react-final-form';\nimport { FORM_ERROR } from 'final-form';\n\nexport function AddressCard({ address, user, showName }) {\n  return (\n    <address className=\"profile__contact\">\n      {\n        ((showName === undefined) || (showName)) &&\n        <p className=\"profile__name\">\n          {\n            address.addressName\n              ? address.addressName\n              : `${address.firstName || user.firstName} ${address.lastName || user.lastName}`\n          }\n        </p>\n      }\n      <div className=\"profile__work\">\n        {address.phone ? <div>{address.phone}</div> : null}\n        {address.mobile ? <div>{address.mobile}</div> : null}\n        {address.fax ? <div>{address.fax}</div> : null}\n      </div>\n      {address.streetAddressLineOne ? <div>{address.streetAddressLineOne}</div> : null}\n      {address.streetAddressLineTwo ? <div>{address.streetAddressLineTwo}</div> : null}\n      {\n        (address.city || address.postalCode) && (\n          <div>\n            {\n              (address.city && address.postalCode)\n                ? `${address.city}, ${address.postalCode}`\n                : address.city || address.postalCode\n            }\n          </div>\n        )\n      }\n      {address.state ? <div>{address.state}</div> : null}\n      <div>{address.country}</div>\n    </address>\n  );\n}\n\nexport const AddressForm = function (props) {\n\n  const {\n    error,\n    onSuccess,\n    onCancel,\n    isEditMode,\n    initialValues\n  } = props;\n\n  const [success, setSuccess] = useState();\n\n  const dispatch = useAppDispatch();\n\n  const submit = (values) => {\n    success && setSuccess();\n    return fetch('/api/1/customer/update.json', {\n      body: JSON.stringify({ [isEditMode ? 'changeAddress' : 'addAddress']: [values] }),\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json; charset=UTF-8' }\n    }).then(async (response) => {\n      const data = await response.json();\n      if (response.status !== 200) {\n        return { [FORM_ERROR]: data.message };\n      }\n      dispatch(isEditMode ? editAddressComplete(data) : addAddressComplete(data));\n      setSuccess('Update successful.');\n      onSuccess(data);\n    });\n  };\n\n  return (\n    <Form\n      initialValues={initialValues}\n      onSubmit={submit}\n    >\n      {({ handleSubmit, submitError }) => (\n        <form className=\"form address-form\" onSubmit={handleSubmit}>\n          {\n            success &&\n            <Alert color=\"success\" className=\"alert--bordered\" onDismiss={() => setSuccess()}>\n              <p>{success}</p>\n            </Alert>\n          }\n          {\n            error &&\n            <Alert color=\"danger\" className=\"alert--bordered\">\n              <p>{error}</p>\n            </Alert>\n          }\n          <Field\n            name=\"id\"\n            component=\"input\"\n            type=\"hidden\"\n          />\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">Address Name</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                name=\"addressName\"\n                component=\"input\"\n                type=\"text\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group-columns\">\n            <div className=\"form__form-group form__form-group-col-left\">\n              <span className=\"form__form-group-label\">First Name</span>\n              <div className=\"form__form-group-field\">\n                <Field\n                  name=\"firstName\"\n                  component=\"input\"\n                  type=\"text\"\n                />\n              </div>\n            </div>\n            <div className=\"form__form-group form__form-group-col-right\">\n              <span className=\"form__form-group-label\">Last Name</span>\n              <div className=\"form__form-group-field\">\n                <Field\n                  name=\"lastName\"\n                  component=\"input\"\n                  type=\"text\"\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">Street Address</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                name=\"streetAddressLineOne\"\n                component=\"input\"\n                type=\"text\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <div className=\"form__form-group-field\">\n              <Field\n                name=\"streetAddressLineTwo\"\n                component=\"input\"\n                type=\"text\"\n              />\n            </div>\n          </div>\n          <div className=\"form__form-group-columns\">\n            <div className=\"form__form-group form__form-group-col-left\">\n              <span className=\"form__form-group-label\">Country</span>\n              <div className=\"form__form-group-field\">\n                <Field\n                  name=\"country\"\n                  component=\"input\"\n                  type=\"text\"\n                />\n              </div>\n            </div>\n            <div className=\"form__form-group form__form-group-col-right\">\n              <span className=\"form__form-group-label\">State</span>\n              <div className=\"form__form-group-field\">\n                <Field\n                  name=\"state\"\n                  component=\"input\"\n                  type=\"text\"\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"form__form-group-columns\">\n            <div className=\"form__form-group form__form-group-col-left\">\n              <span className=\"form__form-group-label\">City</span>\n              <div className=\"form__form-group-field\">\n                <Field\n                  name=\"city\"\n                  component=\"input\"\n                  type=\"text\"\n                />\n              </div>\n            </div>\n            <div className=\"form__form-group form__form-group-col-right\">\n              <span className=\"form__form-group-label\">Postcode</span>\n              <div className=\"form__form-group-field\">\n                <Field\n                  name=\"postalCode\"\n                  component=\"input\"\n                  type=\"text\"\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"form__form-group\">\n            <span className=\"form__form-group-label\">Phone</span>\n            <div className=\"form__form-group-field\">\n              <Field\n                name=\"phone\"\n                component=\"input\"\n                type=\"text\"\n              />\n            </div>\n          </div>\n          {submitError && <div className=\"error\">{submitError}</div>}\n          <ButtonToolbar className=\"form__button-toolbar\">\n            <Button color=\"primary\" type=\"submit\">Submit</Button>\n            <Button type=\"button\" onClick={onCancel}>\n              Cancel\n            </Button>\n          </ButtonToolbar>\n        </form>\n      )}\n    </Form>\n  );\n};\n\nexport function AddressEntry(props) {\n\n  const user = useAppSelector(state => state.users.user);\n  const addressId = props.match.params.id;\n  const queryString = qs.parse(props.location.search);\n  const backUrl = queryString.origin || '/account/address-book';\n\n  const isEditMode = useMemo(\n    () => props.match.params.id != null,\n    [props.match.params.id]\n  );\n\n  if (user == null) {\n    return <Spinner/>;\n  }\n\n  return (\n    <Layout>\n      <Container>\n        <Card>\n          <CardBody>\n            <h1 className=\"page-title\">\n              {`${isEditMode ? 'Edit' : 'Add'} Address`}\n            </h1>\n            <AddressForm\n              user={user}\n              isEditMode={isEditMode}\n              onSuccess={() => props.history.push(backUrl)}\n              onCancel={() => props.history.push(backUrl)}\n              initialValues={\n                (isEditMode && user.addresses.find(\n                  (address) => address.id === addressId\n                )) || {\n                  firstName: user.firstName,\n                  lastName: user.lastName,\n                  email: user.email\n                }\n              }\n            />\n          </CardBody>\n        </Card>\n      </Container>\n    </Layout>\n  );\n}\n\nexport function AddressSelection({ name, onChange, currentValue, returnUrl }) {\n\n  const user = useUser();\n  const { addresses } = user;\n\n  let newAddressUrl = '/account/address-book/new';\n  if (returnUrl) {\n    newAddressUrl = `${newAddressUrl}?origin=${returnUrl}`;\n  }\n\n  return (\n    <Row>\n      {\n        (addresses && addresses.length > 0) ? <>\n\n          {addresses.map((address) =>\n            <Col md={4} sm={6} key={address.id}>\n              <RadioButton\n                label={`${address.firstName || user.firstName} ${address.lastName || user.lastName}`}\n                name={name}\n                value={address.id}\n                currentValue={currentValue}\n                onChange={(e) => onChange(e.target.value)}\n              />\n              <div className=\"cart__delivery-time\">\n                <AddressCard address={address} user={user} showName={false}/>\n              </div>\n            </Col>\n          )}\n          <Col md={12}>\n            <hr/>\n            <Link to={newAddressUrl}>\n              Add new address\n            </Link>\n          </Col>\n\n        </> : <Col md={12}>\n          <Empty\n            description={\n              <span>\n                Please <Link to={newAddressUrl}>add an address</Link> to your address book.\n              </span>\n            }\n          />\n        </Col>\n      }\n    </Row>\n  );\n}\n\nexport default AddressCard;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useMemo } from 'react';\nimport Layout from './Layout';\nimport {\n  Badge,\n  Button,\n  Card,\n  CardBody,\n  Col,\n  Container,\n  DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  Nav,\n  NavItem,\n  NavLink,\n  Row,\n  TabContent,\n  TabPane,\n  UncontrolledDropdown\n} from 'reactstrap';\n\nimport classnames from 'classnames';\nimport ProfileSettings, { ChangePasswordForm } from './ProfileSettings';\nimport OrdersList from './OrderList';\nimport { logout, removeAddress, setAddressDefaults } from '../../redux/actions/usersActions';\nimport AddressCard from './AddressCard';\nimport ChevronDownIcon from 'mdi-react/ChevronDownIcon';\n\nimport authorized from '../shared/authorized';\nimport { Empty } from '../shared/Empty';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\n\nfunction Account({ history, match, user }) {\n\n  const dispatch = useAppDispatch();\n  const { orders } = useAppSelector(state => state.users);\n\n  const activeTab = useMemo(\n    () => (\n      [\n        'profile',\n        'orders',\n        'address-book',\n        'password'\n      ].includes(match.params.tab)\n        ? match.params.tab\n        : 'profile'\n    ),\n    [match.params.tab]\n  );\n\n  const setActiveTab = (tab) => {\n    history.push(`/account/${tab}`);\n  };\n\n  return (\n    <Layout>\n      <Container>\n        <div className=\"profile\">\n          <Row>\n            <Col md={12} lg={12} xl={4}>\n              <Card style={{ height: 'auto' }}>\n                <CardBody className=\"profile__card\">\n                  <div className=\"profile__information\">\n                    <div className=\"\">\n                      <p className=\"profile__name\">\n                        {`${user.firstName} ${user.middleName || ''} ${user.lastName}`}\n                      </p>\n                      <p className=\"profile__work\">{user.phone}</p>\n                      <p className=\"profile__contact\">{user.email}</p>\n                      <Button\n                        color=\"primary\"\n                        className=\"icon profile__btn\"\n                        onClick={() => dispatch(logout(history.push))}\n                      >\n                        Sign Out\n                      </Button>\n                    </div>\n                  </div>\n                  {\n                    orders &&\n                    <div className=\"profile__stats\">\n                      <div className=\"profile__stat\">\n                        <p className=\"profile__stat-number\">{Object.values(orders).length}</p>\n                        <p className=\"profile__stat-title\">Orders</p>\n                      </div>\n                    </div>\n                  }\n                </CardBody>\n              </Card>\n            </Col>\n            <Col md={12} lg={12} xl={8}>\n              <Card>\n                <div className=\"profile__card tabs tabs--bordered-bottom\">\n                  <div className=\"tabs__wrap\">\n                    <Nav tabs>\n                      <NavItem>\n                        <NavLink\n                          className={classnames({ active: activeTab === 'profile' })}\n                          onClick={() => setActiveTab('profile')}\n                        >\n                          Profile\n                        </NavLink>\n                      </NavItem>\n                      <NavItem>\n                        <NavLink\n                          className={classnames({ active: activeTab === 'address-book' })}\n                          onClick={() => setActiveTab('address-book')}\n                        >\n                          Address Book\n                        </NavLink>\n                      </NavItem>\n                      <NavItem>\n                        <NavLink\n                          className={classnames({ active: activeTab === 'orders' })}\n                          onClick={() => setActiveTab('orders')}\n                        >\n                          Orders\n                        </NavLink>\n                      </NavItem>\n                      <NavItem>\n                        <NavLink\n                          className={classnames({ active: activeTab === 'password' })}\n                          onClick={() => setActiveTab('password')}\n                        >\n                          Password\n                        </NavLink>\n                      </NavItem>\n                    </Nav>\n                    <TabContent activeTab={activeTab}>\n                      <TabPane tabId=\"profile\">\n                        <ProfileSettings initialValues={user}/>\n                      </TabPane>\n                      <TabPane tabId=\"address-book\">\n                        <Row>\n                          <Col md={12}>\n                            <Button color=\"primary\" onClick={() => history.push('/account/address-book/new')}>\n                              Add Address\n                            </Button>\n                            {\n                              (user.addresses == null || user.addresses.length === 0) &&\n                              <Empty description=\"You haven't registered any addresses yet.\"/>\n                            }\n                          </Col>\n                          {\n                            user.addresses && user.addresses.map((address) =>\n                              <Col md={4} sm={6} key={address.id}>\n                                <Card>\n                                  <CardBody>\n                                    <AddressCard address={address} user={user}/>\n                                    {\n                                      (user.addresses.length === 1 || address.isShippingDefault) &&\n                                      <div className=\"address-display__default\">\n                                        <Badge color=\"info\">Shipping Default</Badge>\n                                      </div>\n                                    }\n                                    {\n                                      (user.addresses.length === 1 || address.isBillingDefault) &&\n                                      <div className=\"address-display__default\">\n                                        <Badge color=\"success\">Billing Default</Badge>\n                                      </div>\n                                    }\n                                    <UncontrolledDropdown>\n                                      <DropdownToggle className=\"icon icon--right btn-sm address-options-btn\" outline>\n                                        <p>Options <ChevronDownIcon/></p>\n                                      </DropdownToggle>\n                                      <DropdownMenu className=\"dropdown__menu\">\n                                        <DropdownItem\n                                          onClick={() => history.push(`/account/address-book/edit/${address.id}`)}>\n                                          Edit\n                                        </DropdownItem>\n                                        <DropdownItem onClick={() => onSetDefaultBilling(address)}>\n                                          Set as billing default\n                                        </DropdownItem>\n                                        <DropdownItem onClick={() => onSetDefaultShipping(address)}>\n                                          Set as shipping default\n                                        </DropdownItem>\n                                        <DropdownItem divider/>\n                                        <DropdownItem onClick={() => onRemoveAddress(address.id)}>\n                                          Remove\n                                        </DropdownItem>\n                                      </DropdownMenu>\n                                    </UncontrolledDropdown>\n                                  </CardBody>\n                                </Card>\n                              </Col>\n                            )\n                          }\n                        </Row>\n                      </TabPane>\n                      <TabPane tabId='orders'>\n                        <OrdersList/>\n                      </TabPane>\n                      <TabPane tabId=\"password\">\n                        <ChangePasswordForm/>\n                      </TabPane>\n                    </TabContent>\n                  </div>\n                </div>\n              </Card>\n            </Col>\n          </Row>\n        </div>\n      </Container>\n    </Layout>\n  );\n\n  function onRemoveAddress(addressId) {\n    dispatch(removeAddress(addressId));\n  }\n\n  function onSetDefaultBilling(address) {\n    const nextAddress = { ...address, isBillingDefault: true };\n    onUpdateAddressDefaults(nextAddress);\n  }\n\n  function onSetDefaultShipping(address) {\n    const nextAddress = { ...address, isShippingDefault: true };\n    onUpdateAddressDefaults(nextAddress);\n  }\n\n  function onUpdateAddressDefaults(address) {\n    dispatch(setAddressDefaults(address));\n  }\n\n}\n\nexport default authorized(Account);\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\n\n// import invariant from 'tiny-invariant';\nimport hoistStatics from 'hoist-non-react-statics';\n\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useUser } from '../../util/component';\nimport Spinner from './Spinner';\n\nexport default function authorized(Component) {\n\n  const displayName = `authorized(${Component.displayName || Component.name})`;\n  const C = props => {\n\n    const history = useHistory();\n    const location = useLocation;\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    const user = useUser({\n      redirect: location.pathname,\n      onMissing: () => setTimeout(() => history.push('/login'))\n    });\n\n    if (user)\n      return (\n        <Component\n          {...remainingProps}\n          ref={wrappedComponentRef}\n          user={user}\n        />\n      );\n    else\n      return null;\n\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n\n  return hoistStatics(C, Component);\n\n}\n\nexport function awaitRequirements(Component, { requirements, onMissing }) {\n\n  const displayName = `awaitRequirements(${Component.displayName || Component.name})`;\n  const C = props => {\n\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    const reqs = {};\n    const missing = [];\n    Object.entries(requirements).forEach(([key, getter]) => {\n      reqs[key] = getter();\n      if (reqs[key] == null) {\n        missing.push(key);\n      }\n    });\n\n    onMissing && onMissing(missing);\n\n    if (missing.length > 0) {\n      return <Spinner/>;\n    } else {\n      return (\n        <Component\n          ref={wrappedComponentRef}\n          {...remainingProps}\n          {...reqs}\n        />\n      );\n    }\n\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n\n  return hoistStatics(C, Component);\n\n}\n\n// Example\n// export default awaitRequirements(LogIn, {\n//   ['onMissing']: (reqs) => {\n//     const dispatch = useDispatch();\n//     useEffect(\n//       () => {\n//         if (reqs.length)\n//           dispatch(fetchGraph(['header']));\n//       },\n//       []\n//     );\n//   },\n//   requirements: {\n//     ['header']: () => useHeader()\n//   }\n// });\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport Layout from './Layout';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Button, ButtonToolbar, Card, CardBody, Col, Container, Row } from 'reactstrap';\nimport { LogInForm } from './LogIn';\nimport { getLoginFormDefaults, useCart, useProductsBranch, useUser } from '../../util/component';\nimport { CartSummary, OrderTotals } from './CartBody';\nimport CreditCardIcon from 'mdi-react/CreditCardIcon';\nimport { RadioButton } from '../shared/form/RadioButton';\nimport { AddressSelection } from './AddressCard';\nimport Spinner from '../shared/Spinner';\nimport { money } from '../../util/string';\nimport { Empty } from '../shared/Empty';\nimport {\n  checkout, UPDATE_CART,\n  updateCart\n} from '../../redux/actions/productsActions';\nimport { useAppDispatch } from '../../redux/store';\n\nfunction address(cart, user, type) {\n  if (cart == null || user == null) {\n    return;\n  }\n  const cartAddress = cart[type === 'shipping' ? 'shippingAddress' : 'billingAddress'];\n  if (cartAddress == null || user.addresses == null) {\n    return;\n  }\n  const address = user.addresses.find((_address_) =>\n    _address_.streetAddressLineOne === cartAddress.streetAddressLineOne\n  );\n  return address ? address.id : undefined;\n}\n\nfunction ShippingSelection({ onChange, selectedValue, items }) {\n  return (\n    <div className=\"form__form-group shipping-method-selection\">\n      <div className=\"form__form-group-field cart__delivery-field\">\n        {items ? items.map((item) =>\n          <div className=\"cart__delivery\" key={item.id}>\n            <RadioButton\n              label={item.name}\n              name=\"shippingMethod\"\n              value={item.id}\n              currentValue={selectedValue}\n              onChange={() => onChange(item.id)}\n            />\n            <p className=\"cart__delivery-time\">{item.description}</p>\n            <p className=\"cart__delivery-price\">{money(item.price, item.currency)}</p>\n          </div>\n        ) : (\n          <Empty description=\"Shipping is not available for your location. :(\"/>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction CreditCardForm({ cardNumber, cvc, expirationDate, nameOnCard, onChange }) {\n  return (\n    <form className=\"form payment__credit-cards\">\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Card number</span>\n        <div className=\"form__form-group-field\">\n          <div className=\"form__form-group-icon\">\n            <CreditCardIcon/>\n          </div>\n          <input\n            type=\"text\"\n            name=\"cardNumber\"\n            value={cardNumber}\n            onChange={onChange}\n            placeholder=\"xxxx-xxxx-xxxx-xxxx\"\n          />\n        </div>\n      </div>\n      <div className=\"form__form-group-date-cvc\">\n        <div className=\"form__form-group form__form-group-date\">\n          <span className=\"form__form-group-label\">Expiration Date</span>\n          <div className=\"form__form-group-field\">\n            <input\n              type=\"month\"\n              name=\"expirationDate\"\n              placeholder=\"MM/YY\"\n              min=\"2019-07\"\n              value={expirationDate}\n              onChange={onChange}\n            />\n          </div>\n        </div>\n        <div className=\"form__form-group form__form-group-cvc\">\n          <span className=\"form__form-group-label\">CVC</span>\n          <div className=\"form__form-group-field\">\n            <input\n              type=\"number\"\n              name=\"cvc\"\n              minLength={3}\n              maxLength={4}\n              value={cvc}\n              onChange={onChange}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"form__form-group\">\n        <span className=\"form__form-group-label\">Cardholder name</span>\n        <div className=\"form__form-group-field\">\n          <input\n            type=\"text\"\n            name=\"nameOnCard\"\n            placeholder=\"Name and Surname\"\n            value={nameOnCard}\n            onChange={onChange}\n          />\n        </div>\n      </div>\n    </form>\n  );\n}\n\nfunction CheckoutView({ history }) {\n\n  const dispatch = useAppDispatch();\n  const { loading } = useProductsBranch();\n  const user = useUser({ redirect: '/checkout' });\n  const cart = useCart({ onEmpty: () => history.push('/cart') });\n  const [card, setState] = useState({\n    cvc: '',\n    nameOnCard: '',\n    cardNumber: '',\n    expirationDate: '',\n  });\n\n  const [shippingAddress, setShippingAddress] = useState();\n  const [billingAddress, setBillingAddress] = useState();\n  const [shippingMethod, setShippingMethod] = useState();\n\n  const onCardDataEntry = (e) => {\n    const { value, name } = e.target;\n    setState({ ...card, [name]: value });\n  };\n\n  const onAddressSelection = (value, type) => {\n    (type === 'shipping' ? setShippingAddress : setBillingAddress)(value);\n  };\n\n  useEffect(\n    () => {\n\n      const shipping = address(cart, user, 'shipping');\n      const billing = address(cart, user, 'billing');\n      const method = (cart || {}).shippingMethod;\n\n      shipping && (shipping !== shippingAddress) && setShippingAddress(shipping);\n      billing && (billing !== billingAddress) && setBillingAddress(billing);\n      method && (method !== shippingMethod) && setShippingMethod(method);\n\n    },\n    [user, cart, shippingAddress, billingAddress, shippingMethod]\n  );\n\n  useEffect(\n    () => {\n      if (cart) {\n\n        const\n          shippingCondition = (!!shippingAddress && shippingAddress !== address(cart, user, 'shipping')),\n          billingCondition = (!!billingAddress && billingAddress !== address(cart, user, 'billing')),\n          methodCondition = (!!shippingMethod && cart.shippingMethod !== shippingMethod);\n\n        if (\n          shippingCondition ||\n          billingCondition ||\n          methodCondition\n        ) {\n          dispatch(updateCart({\n            ...shippingCondition ? { shippingAddress } : {},\n            ...billingCondition ? { billingAddress } : {},\n            ...methodCondition ? { shippingMethod } : {}\n          }));\n        }\n\n      }\n\n    },\n    [dispatch, user, cart, shippingAddress, billingAddress, shippingMethod]\n  );\n\n  const checkoutDisabled = useMemo(\n    () => !(\n      shippingAddress &&\n      billingAddress &&\n      shippingMethod &&\n      card.cvc &&\n      card.nameOnCard &&\n      card.cardNumber &&\n      card.expirationDate\n    ),\n    [shippingAddress, billingAddress, shippingMethod, card]\n  );\n\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          {(cart == null) ? <Col md={12}><Spinner contained/></Col> : (user == null) ? <>\n\n            <Col md={12} lg={12}>\n              <Card>\n                <CardBody>\n                  <div className=\"text-center\">\n                    <h1 className=\"page-title\">Checkout</h1>\n                    <p className=\"page-subhead subhead\">\n                      In order to checkout please sign in or create an account if you don't have one.\n                    </p>\n                    <div className=\"payment-view__login\">\n                      <LogInForm initialValues={getLoginFormDefaults()}/>\n                    </div>\n                  </div>\n                </CardBody>\n              </Card>\n            </Col>\n\n          </> : <>\n\n            <Col md={9}>\n              <Card>\n                <CardBody>\n\n                  <div className=\"card__title\">\n                    <h1 className=\"bold-text\">Checkout</h1>\n                  </div>\n                  <div className=\"payment\">\n                    <fieldset className=\"payment__checkout-section\">\n                      <legend>Shipping Address</legend>\n                      <AddressSelection\n                        returnUrl=\"/checkout\"\n                        name=\"shippingAddress\"\n                        currentValue={shippingAddress}\n                        onChange={(value) => onAddressSelection(value, 'shipping')}\n                      />\n                    </fieldset>\n                    <fieldset className=\"payment__checkout-section\">\n                      <legend>Billing Address</legend>\n                      <AddressSelection\n                        returnUrl=\"/checkout\"\n                        name=\"billingAddress\"\n                        currentValue={billingAddress}\n                        onChange={(value) => onAddressSelection(value, 'billing')}\n                      />\n                    </fieldset>\n                    <fieldset className=\"payment__checkout-section\">\n                      <legend>Shipping Method</legend>\n                      {\n                        loading[UPDATE_CART] ? <Spinner small/> : cart.shippingMethods ? (\n                          <ShippingSelection\n                            items={cart.shippingMethods}\n                            selectedValue={shippingMethod}\n                            onChange={(value) => setShippingMethod(value)}\n                          />\n                        ) : <Empty description=\"Select shipping address to view available shipping methods\"/>\n                      }\n                    </fieldset>\n                    <fieldset className=\"payment__checkout-section\">\n                      <legend>Payment Method</legend>\n                      <CreditCardForm {...card} onChange={onCardDataEntry}/>\n                    </fieldset>\n                  </div>\n\n                </CardBody>\n              </Card>\n            </Col>\n\n            <Col md={3}>\n              <CartSummary/>\n              <OrderTotals/>\n              <ButtonToolbar className=\"form__button-toolbar\">\n                <Button\n                  type=\"button\"\n                  color=\"primary\"\n                  onClick={onCheckout}\n                  disabled={checkoutDisabled}\n                  className=\"payment__complete-purchase-btn\"\n                >\n                  Complete Purchase\n                </Button>\n              </ButtonToolbar>\n            </Col>\n\n          </>}\n        </Row>\n      </Container>\n    </Layout>\n  );\n\n  function onCheckout() {\n    dispatch(checkout({ card, shippingMethod, shippingAddress, billingAddress }, history.push));\n  }\n\n}\n\nexport default CheckoutView;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Badge, Card, CardBody, Col, Container, Row, Table } from 'reactstrap';\n\nimport Layout from './Layout';\nimport { useOrder } from '../../util/component';\nimport Spinner from '../shared/Spinner';\nimport { Link } from 'react-router-dom';\nimport { capitalize, money } from '../../util/string';\n\n\nfunction OrderDetails(props) {\n\n  const id = props.match.params.id;\n  const order = useOrder(id);\n\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          <Col md={9}>\n\n            <Card>\n              <CardBody>\n                <h1 className=\"page-title\">\n                  {`Order # ${id} - Details`}\n                </h1>\n\n                {order == null ? <Spinner contained/> : <>\n\n                  <Table className=\"table--bordered cart__table\" responsive>\n                    <thead>\n                    <tr>\n                      <th>Product</th>\n                      <th>Quantity</th>\n                      <th>Price</th>\n                      <th>Total</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {\n                      order.items && order.items.map((item) => (\n                        <tr key={item.id}>\n                          <td>\n                            <span className=\"cart__preview-img\">\n                              <img src={item.images[0].url} alt=\"product_preview\"/>\n                            </span>\n                            <Link\n                              className=\"cart__product-name\"\n                              to={`/catalog/${item.productId}`}\n                            >\n                              {item.productName}\n                            </Link>\n                          </td>\n                          <td>{item.quantity}</td>\n                          <td>{money(item.unitPrice, order.currency)}</td>\n                          <td>{money(item.totalPrice, order.currency)}</td>\n                        </tr>\n                      ))\n                    }\n                    </tbody>\n                  </Table>\n\n                </>}\n\n              </CardBody>\n            </Card>\n          </Col>\n          <Col md={3}>\n            {\n              order && order.items && <>\n\n                <table className=\"table\">\n                  <tbody>\n                  <tr>\n                    <th>Order Status</th>\n                    <td>\n                      <Badge color={['OPEN', 'CONFIRMED', 'COMPLETE'].includes(order.orderStatus) ? 'success' : 'warning'}>\n                        {capitalize(order.orderStatus)}\n                      </Badge>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>Payment Status</th>\n                    <td>\n                      <Badge color={order.paymentStatus === 'COMPLETE' ? 'success' : 'warning'}>\n                        {capitalize(order.paymentStatus || 'Pending')}\n                      </Badge>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>Shipping Status</th>\n                    <td>\n                      <Badge color={order.shippingStatus === 'COMPLETE' ? 'success' : 'warning'}>\n                        {capitalize(order.shippingStatus || 'Pending')}\n                      </Badge>\n                    </td>\n                  </tr>\n                  </tbody>\n                </table>\n\n                <div className=\"order-details__body\">\n                  <table className=\"order-details__table\">\n                    <tbody>\n                    <tr>\n                      <th className=\"order-details__th\">Products</th>\n                      <td className=\"order-details__td\">{money(order.items.reduce((sum, item) => (sum + item.totalPrice), 0), order.currency)}</td>\n                    </tr>\n                    <tr>\n                      <th className=\"order-details__th\">Shipping</th>\n                      <td className=\"order-details__td\">{money(order.shippingPrice, order.currency)}</td>\n                    </tr>\n                    <tr>\n                      <th className=\"order-details__th\">Sub Total</th>\n                      <td className=\"order-details__td\">{money(order.totalPrice, order.currency)}</td>\n                    </tr>\n                    <tr>\n                      <th className=\"order-details__th\">Tax</th>\n                      <td className=\"order-details__td\">{money(order.taxedPrice - order.totalPrice, order.currency)}</td>\n                    </tr>\n                    <tr>\n                      <th className=\"order-details__th\">Total</th>\n                      <td className=\"order-details__td\">{money(order.taxedPrice, order.currency)}</td>\n                    </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </>\n            }\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nexport default OrderDetails;\n\n// Payment:\n// BALANCE_DUE\n// PENDING\n// PAID\n// CREDIT_OWED\n// FAILED\n//\n// Shipping:\n// READY\n// PENDING\n// PARTIAL\n// DELAYED\n// SHIPPED\n// BACK_ORDER\n//\n// Order:\n// OPEN\n// CONFIRMED\n// COMPLETE\n// CANCELLED\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Layout from './Layout';\nimport { Container, Row, Col, Card, CardBody } from 'reactstrap';\nimport { CategoryListing } from './BlogRoll';\nimport { Link } from 'react-router-dom';\nimport { ajax } from 'rxjs/ajax';\nimport { catchError, map } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport { getProducts, useProductsQuery } from '../../util/products';\nimport { useCategories, usePosts } from '../shared/hooks';\nimport { Field } from '@craftercms/studio-guest';\n\nexport default function BlogEntry(props) {\n  const slug = props.match.params.slug;\n\n  const categories = useCategories();\n\n  const [paginationData] = useState({\n    itemsPerPage: 1,\n    currentPage: 0\n  });\n  const post = usePosts(paginationData, slug);\n\n  return <Layout>\n    <Container>\n      <Row>\n        {\n          post &&\n          <Col md={9}>\n            <Card>\n              <CardBody>\n                <Post post={post.items[0]}/>\n              </CardBody>\n            </Card>\n          </Col>\n        }\n        <Col md={3}>\n\n          <CategoryListing categories={categories}/>\n          {\n            post &&\n            <>\n              <RelatedPosts categories={post.items[0].categories_o} slug={slug}/>\n              <RelatedProducts categories={post.items[0].categories_o}/>\n            </>\n          }\n        </Col>\n      </Row>\n    </Container>\n  </Layout>;\n}\n\nfunction Post({ post }) {\n  const { title_s, image_s, author_s, subtitle_s, content_html_raw, categories_o } = post;\n  return (\n    <>\n      <Field component=\"section\" className=\"post__head\" model={post}>\n        <h1 className=\"post__title\">{title_s}</h1>\n        {subtitle_s && <p className=\"post__subtitle\">{subtitle_s}</p>}\n        {author_s && <p className=\"post__author\">By {author_s}</p>}\n      </Field>\n      {image_s && <img className=\"post__image\" src={image_s} alt=\"\"/>}\n      <div className=\"post__body\" dangerouslySetInnerHTML={{ __html: content_html_raw }}/>\n      <div className=\"post__categories\">{categories_o.map((item) => item.value_smv).join(', ')}</div>\n    </>\n  );\n}\n\nfunction RelatedPosts({ categories, slug }) {\n  const [relatedPosts, setRelatedPosts] = useState();\n  useEffect(\n    () => {\n      ajax.post(\n        process.env.REACT_APP_GRAPHQL_SERVER,\n        {\n          query: `query {\n            posts: component_post (limit: 3, sortOrder: ASC, sortBy: \"title_s\") {\n              items {\n                title_s\n                image_s\n                slug_s(filter: { not: [{ equals: \"${slug}\" }]})\n                categories_o @skip(if: true) {\n                  item {\n                    key(filter: {matches: \"${categories[0].key}\"})\n                  }\n                }\n              }\n            }\n          }`\n        },\n        { 'Content-Type': 'application/json; charset=UTF-8' }\n      ).pipe(\n        map(({ response }) => (response.data.posts.items)),\n        catchError((response) => of(response)),\n      ).subscribe(posts => setRelatedPosts(posts));\n    },\n    [slug, categories]\n  );\n  return (\n    relatedPosts ? <div className=\"blog__sidebar-bar-block\">\n      <h2 className=\"blog__side-bar-title\">Related Posts</h2>\n      <nav className=\"blog__side-bar-list\">\n        {\n          relatedPosts.map(({ title_s, image_s, slug_s }) =>\n            <Link key={slug_s} className=\"blog__side-bar-item\" to={`/blog/${slug_s}`}>\n              <img src={image_s} alt=\"\"/>\n              <h3 className=\"blog__related-post-title\">{title_s}</h3>\n            </Link>\n          )\n        }\n      </nav>\n    </div> : <></>\n  );\n}\n\nfunction RelatedProducts({ categories }) {\n  const [items, setItems] = useState();\n  const params = useProductsQuery();\n  useEffect(\n    () => {\n      getProducts({ limit: 3, offset: Math.floor(Math.random() * 11), ...params })\n        .subscribe(({ response }) => setItems(response.items));\n    },\n    // TODO: adding params is creating a loop\n    // eslint-disable-next-line\n    [categories, params.locale, params.currency]\n  );\n  return (\n    items ? <div className=\"blog__sidebar-bar-block\">\n      <h2 className=\"blog__side-bar-title\">Related Products</h2>\n      <nav className=\"blog__side-bar-list\">\n        {\n          items.map(({ id, variants, name }) =>\n            <Link key={id} className=\"blog__side-bar-item blog__side-bar-item--horizontal\" to={`/catalog/${id}`}>\n              <img className=\"blog__side-bar-item-image\" src={variants[0].images[0].url} alt=\"\"/>\n              <h3 className=\"blog__related-post-title\">{name}</h3>\n            </Link>\n          )\n        }\n      </nav>\n    </div> : <></>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState, Suspense } from 'react';\nimport Layout from './Layout';\nimport { Badge, Card, CardBody, Col, Container, Row } from 'reactstrap';\nimport * as qs from 'query-string';\n\nimport MagnifyIcon from 'mdi-react/MagnifyIcon';\nimport { Empty } from '../shared/Empty';\nimport { Link } from 'react-router-dom';\nimport { capitalize } from '../../util/string';\nimport { getProducts, useProductsQuery } from '../../util/products';\nimport { useUrlSearchQueryFetchResource } from '../shared/hooks';\n\nconst\n  ARTICLE = 'ARTICLE',\n  PRODUCT = 'PRODUCT';\n\nexport default function Search(props) {\n  const { q: query } = { q: '', ...qs.parse(props.location.search) };\n  const [value, setValue] = useState(query);\n\n  const [productResults, setProductResults] = useState();\n  const productsQueryParams = useProductsQuery({ q: query, limit: 10, offset: 0 });\n\n  const [paginationData] = useState({\n    itemsPerPage: 10,\n    currentPage: 0\n  });\n  let resource = useUrlSearchQueryFetchResource(paginationData.itemsPerPage);\n\n  useEffect(\n    () => {\n      if (query) {\n        getProducts(productsQueryParams).subscribe(({ response: catalog }) => {\n          setProductResults({\n            total: catalog.total,\n            products: catalog.items\n          });\n        });\n\n        setValue(query);\n      }\n    },\n    // TODO: adding productsQueryParams is creating a loop\n    // eslint-disable-next-line\n    [query, productsQueryParams.locale, productsQueryParams.currency]\n  );\n\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          <Col md={9}>\n            <Card>\n              <CardBody>\n                <div className=\"card__title\">\n                  <h1 className=\"bold-text\">Search</h1>\n                </div>\n                <form\n                  className=\"form\"\n                  onSubmit={(e) => {\n                    e.preventDefault();\n                    props.history.push(`/search?q=${value}`);\n                  }}\n                >\n                  <div className=\"form__form-group\">\n                    <div className=\"form__form-group-field\">\n                      <input name=\"q\" type=\"text\" placeholder=\"Search...\" value={value}\n                             onChange={(e) => setValue(e.target.value)}/>\n                      <button className=\"form__form-group-icon\">\n                        <MagnifyIcon/>\n                      </button>\n                    </div>\n                  </div>\n                </form>\n                {\n                  !query &&\n                  <Empty description=\"Please enter your search query to perform a search.\"/>\n                }\n                <Suspense fallback={<Empty description=\"No results where found for your query.\"/>}>\n                  <SearchResults\n                    resource={resource}\n                  />\n                </Suspense>\n              </CardBody>\n            </Card>\n          </Col>\n          <Col md={3}>\n            {\n              productResults ?\n                productResults.total === 0\n                  ? 'No products matched your search'\n                  : <>\n                    <p className=\"subhead\">Products related to your search.</p>\n                    <div>\n                      {\n                        productResults.products.map((item) => <SearchResult\n                          key={item.id}\n                          type={PRODUCT}\n                          item={item}\n                        />)\n                      }\n                    </div>\n                  </>\n                : null\n            }\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nexport function SearchResult(props) {\n  const { type, item } = props;\n  const\n    title = item[type === ARTICLE ? 'title_s' : 'name'],\n    link = type === ARTICLE ? `/blog/${item.slug_s}` : `/catalog/${item.id}`,\n    preview = type === PRODUCT ? item.description : item.content_html.substr(0, 100),\n    img = type === PRODUCT ? item.variants[0].images[0].url : item.image_s;\n  return (\n    <div className=\"search-result\">\n      <Link to={link}>\n        <img className=\"search-result__img\" src={img} alt=\"\"/>\n      </Link>\n      <div className=\"search-result__content\">\n        <Link className=\"search-result__title\" to={link}>{title}</Link>\n        {type === PRODUCT ? null : <p className=\"search-result__preview\">{preview}</p>}\n        <Badge color=\"info\">{capitalize(type.toLowerCase())}</Badge>\n      </div>\n    </div>\n  );\n}\n\nexport function SearchResults(props) {\n  const { resource } = props;\n  const { hits } = resource.read();\n\n  return (\n    <>\n      {\n        hits.map((item) =>\n          <SearchResult\n            key={item.craftercms.id}\n            type={ARTICLE}\n            item={item}\n          />\n        )\n      }\n    </>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { lazy } from 'react';\n\nconst map = {\n  '/page/landing': lazy(() => import('../app/Home')),\n  '/page/blog_roll': lazy(() => import('../app/BlogRoll')),\n  '/page/catalog': lazy(() => import('../app/ProductsListing'))\n};\n\nexport default map;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { fetchQuery } from '../../util/content';\nimport byUrlQuery from './queries.graphql';\nimport { parseDescriptor } from '@craftercms/content';\nimport { reportNavigation } from '@craftercms/ice';\nimport { Guest, ContentType } from '@craftercms/studio-guest';\nimport { isAuthoring } from './utils';\nimport contentTypeMap from './contentTypeMap';\nimport Spinner from '../shared/Spinner';\n\nexport default function DynamicRoute(props) {\n  const { match, location } = props;\n  const [ state, setState ] = useState(null);\n  let url = match.url;\n\n  useEffect(() => {\n    let destroyed = false;\n    reportNavigation(url);\n    fetchQuery(\n      { text: byUrlQuery },\n      {\n        url: `.*${url === '/' ? 'website/index' : url}.*`\n      }\n    ).then(({data}) => {\n      if (!destroyed) {\n        const model = parseDescriptor(data.content.items?.[0]);\n\n        setState({\n          model,\n          meta: {}\n        });\n      }\n    });\n    return () => {\n      destroyed = true;\n    };\n  }, [url, location.search]);\n\n  useEffect(() => {\n    window.scroll(0, 0);\n  }, [url]);\n\n\n  if (state === null) {\n    return <Spinner />;\n  } else {\n    return <Guest\n      isAuthoring={isAuthoring()}\n      path={state.model?.craftercms.path}\n    >\n      <ContentType\n        {...state}\n        {...props}\n        contentTypeMap={contentTypeMap}\n      />\n    </Guest>\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport ProductDetails from './app/ProductDetails';\n\nimport LogIn from './app/LogIn';\nimport Register from './app/Register';\nimport NotFound404 from './app/NotFoundView';\nimport CartView from './app/CartView';\nimport Account from './app/Account';\nimport CheckoutView from './app/CheckoutView';\nimport { AddressEntry } from './app/AddressCard';\nimport OrderDetails from './app/OrderDetails';\nimport BlogEntry from './app/BlogEntry';\nimport Search from './app/Search';\nimport DynamicRoute from './shared/DynamicRoute';\n\nconst Routes = () => {\n  return (\n    <Switch>\n      <Route exact path=\"/\" component={DynamicRoute} />\n      <Route exact path=\"/catalog\" component={DynamicRoute}/>\n      <Route path=\"/catalog/:product\" component={ProductDetails}/>\n      <Route path=\"/cart\" component={CartView}/>\n      <Route path=\"/checkout\" component={CheckoutView}/>\n      <Route exact path=\"/account/address-book/new\" component={AddressEntry}/>\n      <Route exact path=\"/account/address-book/edit/:id?\" component={AddressEntry}/>\n      <Route exact path=\"/account/orders/:id\" component={OrderDetails}/>\n      <Route path=\"/account/:tab?\" component={Account}/>\n      <Route exact path=\"/blog\" component={DynamicRoute}/>\n      <Route path=\"/blog/:slug\" component={BlogEntry}/>\n      <Route path=\"/login\" component={LogIn}/>\n      <Route path=\"/register\" component={Register}/>\n      <Route path=\"/search\" component={Search}/>\n      <Route path=\"/\" component={NotFound404}/>\n    </Switch>\n  );\n};\n\nexport default Routes;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { memo, useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nfunction ScrollReset(props) {\n  useEffect(\n    () => {\n      window.scrollTo(0, 0);\n    },\n    [props.location.pathname]\n  );\n  return props.children;\n}\n\nexport default memo(withRouter(ScrollReset));\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport resources from './resources';\n\nexport const config = {\n  interpolation: { escapeValue: false }, // React already does escaping\n  lng: 'en',\n  resources,\n};\n\nexport { resources };\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable camelcase */\nimport es from './es/main.json';\nimport en from './en/main.json';\n\nconst resources = {\n  en: { ...en },\n  es: { ...es  }\n};\n\nexport default resources;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { useAppSelector } from '../redux/store';\n\nfunction MainWrapper(props) {\n  const { children } = props;\n  const theme = useAppSelector(state => state.theme);\n\n  const wrapperClass = classNames({\n    'wrapper': true,\n    'squared-corner-theme': theme.squaredCorners,\n    'blocks-with-shadow-theme': theme.withBoxShadow,\n    'top-navigation': theme.topNavigation,\n  });\n\n  return (\n    <div className={theme.className}>\n      <div className={wrapperClass}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default MainWrapper;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport { I18nextProvider } from 'react-i18next';\nimport i18next from 'i18next';\nimport Routes from './Routes';\nimport store, { AppStoreContextProvider } from '../redux/store';\nimport ScrollReset from './ScrollReset';\nimport { config as i18nextConfig } from '../translations/i18n';\nimport MainWrapper from './MainWrapper';\nimport { GlobalContextProvider } from './shared/context';\n\ni18next.init(i18nextConfig);\n\nexport default function App(props) {\n\n  useEffect(\n    () => {\n\n      // True if the site is being view via authoring (studio). False if it's the live site\n      const { isAuthoring } = store.getState().theme;\n\n      if (isAuthoring) {\n        const script = document.createElement('script');\n\n        script.src = `/studio/static-assets/libs/requirejs/require.js`;\n\n        script.setAttribute(\n          'data-main',\n          `/studio/overlayhook?site=NOTUSED&page=NOTUSED&cs.js`\n        );\n\n        document.head.appendChild(script);\n      }\n\n    },\n    []\n  );\n\n  return (\n    <GlobalContextProvider jQuery={props.jQuery}>\n      <AppStoreContextProvider store={store}>\n        <I18nextProvider i18n={i18next}>\n          <BrowserRouter>\n            <ScrollReset>\n              <MainWrapper>\n                <main>\n                  <Routes/>\n                </main>\n              </MainWrapper>\n            </ScrollReset>\n          </BrowserRouter>\n        </I18nextProvider>\n      </AppStoreContextProvider>\n    </GlobalContextProvider>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport Cookies from 'js-cookie';\n\nexport const siteName =\n  document.getElementById('2fb5164e').innerHTML ||\n  process.env.REACT_APP_SITE_ID ||\n  Cookies.get('crafterSite');\nif (!siteName) {\n  throw new Error('Site not set.');\n}\n\nlet graphqlServer = process.env.REACT_APP_GRAPHQL_SERVER;\nif (!graphqlServer.includes(siteName)) {\n  graphqlServer += `?crafterSite=${siteName}`;\n}\n\nexport function fetchQuery(\n  operation,\n  variables\n) {\n  return fetch(graphqlServer, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      query: operation.text,\n      variables\n    })\n  }).then(response => response.json());\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n// language=GraphQL\nconst commonFragments = `\n  fragment byUrlQueryContentItemFields on ContentItem {\n    guid: objectId\n    path: localId(filter: {not: [{equals: $exclude}]})\n    contentTypeId: content__type\n    dateCreated: createdDate_dt\n    dateModified: lastModifiedDate_dt\n    label: internal__name\n  }\n`\n\n// language=GraphQL\nconst main = `\n  ${commonFragments}\n\n  fragment byUrlQueryBlogTeaser on component_blog_teaser {\n    ...byUrlQueryContentItemFields\n    title_s\n  }\n\n  fragment byUrlQueryFeatureList on component_feature__list {\n    ...byUrlQueryContentItemFields\n    closingContent_html\n    closingContent_html_raw\n    features_o {\n      item {\n        description_t\n        title_s\n        icon_s\n      }\n    }\n    openingContent_html\n    openingContent_html_raw\n    title_s\n  }\n\n  fragment byUrlQueryFooter on component_footer {\n    ...byUrlQueryContentItemFields\n    logo_s\n    logo_alt_t\n    logo_url_s\n  }\n\n  fragment byUrlQueryHeader on component_header {\n    ...byUrlQueryContentItemFields\n    logo_s\n    logo_alt_t\n    logo_url_s\n    buttons_o {\n      item {\n        label_s\n        link_s\n      }\n    }\n  }\n\n  fragment byUrlQueryHero on component_hero {\n    ...byUrlQueryContentItemFields\n    title_t\n    content_html\n    content_html_raw\n    buttons_o {\n      item {\n        label_s\n        link_s\n      }\n    }\n    image_s\n    section_background_image_s\n  }\n\n  fragment byUrlQueryPost on component_post {\n    ...byUrlQueryContentItemFields\n  }\n\n  fragment byUrlQueryProductTeaser on component_product__teaser {\n    ...byUrlQueryContentItemFields\n    title_s\n    numOfProducts_i\n  }\n\n  fragment byUrlQueryTestimonials on component_testimonials {\n    ...byUrlQueryContentItemFields\n    title_s\n    testimonials_o {\n      item {\n        customer_s\n        description_html\n        description_html_raw\n        link_s\n        stars_i\n      }\n    }\n  }\n\n  fragment byUrlQueryTwoColumn on component_two__column {\n    ...byUrlQueryContentItemFields\n    image_s\n    title_s\n    content_html\n    content_html_raw\n    contentAlignment_s\n    section_background_image_s\n  }\n\n  fragment byUrlQueryHomepage on page_landing {\n    internal__name\n    sections_o {\n      item {\n        component {\n          internal__name\n          ...on component_blog_teaser {\n            ...byUrlQueryBlogTeaser\n          }\n          ...on component_feature__list {\n            ...byUrlQueryFeatureList\n          }\n          ...on component_footer {\n            ...byUrlQueryFooter\n          }\n          ...on component_header {\n            ...byUrlQueryHeader\n          }\n          ...on component_hero {\n            ...byUrlQueryHero\n          }\n          ...on component_post {\n            ...byUrlQueryPost\n          }\n          ...on component_product__teaser {\n            ...byUrlQueryProductTeaser\n          }\n          ...on component_testimonials {\n            ...byUrlQueryTestimonials\n          }\n          ...on component_two__column {\n            ...byUrlQueryTwoColumn\n          }\n        }\n      }\n    }\n  }\n  \n  query byUrlQuery(\n    $url: String\n    $skipContentType: Boolean = false\n    $exclude: String = \"\"\n  ) {\n    content: contentItems {\n      total\n      items {\n        ...byUrlQueryContentItemFields\n        url: localId(\n          transform: \"storeUrlToRenderUrl\",\n          filter:{ regex: $url }\n        )\n        content__type(\n          filter:{\n            regex: \".*(landing|post|blog_roll|catalog).*\"   # TODO: types!\n          }\n        ) @skip (if: $skipContentType)\n        ...on page_landing {\n          ...byUrlQueryHomepage\n        }\n      }\n    }\n  }\n`\n\n//language=GraphQL\nexport const postsQuery = `\n  ${commonFragments}\n  \n  query postsQuery(\n    $postsLimit: Int = 3\n    $postsOffset: Int = 0\n    $exclude: String = \"\"\n    $slug: String = \".*.*\"\n  ) {\n    post: component_post(\n      limit: $postsLimit\n      offset: $postsOffset\n    ) {\n      total\n      items {\n        ...byUrlQueryContentItemFields\n        slug_s(filter: { regex: $slug })\n        localId\n        title_s\n        image_s\n        author_s\n        subtitle_s\n        content_html_raw\n        summary_html_raw\n        categories_o {\n          item {\n            key\n            value_smv\n          }\n        }\n      }\n    }\n  }\n`\n\n//language=GraphQL\nexport const navQuery = `\n  query Nav {\n    pages(sortBy: \"orderDefault_f\") {\n      items {\n        placeInNav(filter: { equals:true }) @skip(if: true)\n        url: localId(transform: \"storeUrlToRenderUrl\")\n        label: internal__name\n        localId: localId\n      }\n    }\n  }\n`\n\n//language=GraphQL\nexport const footerQuery = `\n  query Footer {\n    component_footer {\n      items {\n        localId\n        objectId\n        logo_s\n        logo_url_s\n        logo_alt_t\n      }\n    }\n  }\n`\n\n//language=GraphQL\nexport const headerQuery = `  \n  query Header {\n    component_header {\n      items {\n        localId\n        objectId\n        logo_s\n        logo_url_s\n        logo_alt_t\n        buttons_o {\n          item {\n            label_s\n            link_s\n          }\n        }\n      }\n    }\n  }\n`\n\n//language=GraphQL\nexport const storeSettingsQuery = `\n  query StoreSettings {\n    store {\n      settings {\n        name\n        locales\n        currencies\n      }\n    }\n  }\n`\n\nexport default main;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { createContext, useContext, useMemo } from 'react';\nimport { isAuthoring } from './utils';\nimport { useSpreadState } from './hooks';\n\nexport const GlobalContext = createContext();\n\nfunction useGlobalContext() {\n  const context = useContext(GlobalContext);\n  if (!context) {\n    throw new Error(`useGlobalContext must be used within a GlobalContextProvider`);\n  }\n  return context;\n}\n\nfunction GlobalContextProvider(props) {\n  const [state, setState] = useSpreadState({\n    isAuthoring: isAuthoring(),\n    locale: 'en',\n    pages: null,\n    pagesLoading: false,\n    theme: 'light',\n    $: props.jQuery\n  });\n  const value = useMemo(() => [state, setState], [state, setState]);\n  return <GlobalContext.Provider value={value} {...props} />;\n}\n\nexport { GlobalContextProvider, useGlobalContext };\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const CHANGE_THEME_TO_DARK = 'CHANGE_THEME_TO_DARK';\nexport const CHANGE_THEME_TO_LIGHT = 'CHANGE_THEME_TO_LIGHT';\nexport const SET_IS_AUTHORING = 'SET_IS_AUTHORING';\nexport const CHANGE_BORDER_RADIUS = 'CHANGE_BORDER_RADIUS';\nexport const TOGGLE_BOX_SHADOW = 'TOGGLE_BOX_SHADOW';\nexport const TOGGLE_TOP_NAVIGATION = 'TOGGLE_TOP_NAVIGATION';\n\nexport function changeThemeToDark() {\n  return {\n    type: CHANGE_THEME_TO_DARK,\n  };\n}\n\nexport function changeThemeToLight() {\n  return {\n    type: CHANGE_THEME_TO_LIGHT,\n  };\n}\n\nexport function setIsAuthoring(isAuthoring) {\n  return {\n    type: SET_IS_AUTHORING,\n    payload: { isAuthoring }\n  };\n}\n\nexport function changeBorderRadius() {\n  return {\n    type: CHANGE_BORDER_RADIUS,\n  };\n}\n\nexport function toggleBoxShadow() {\n  return {\n    type: TOGGLE_BOX_SHADOW,\n  };\n}\n\nexport function toggleTopNavigation() {\n  return {\n    type: TOGGLE_TOP_NAVIGATION,\n  };\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport {\n  CHANGE_THEME_TO_DARK,\n  CHANGE_THEME_TO_LIGHT,\n  SET_IS_AUTHORING,\n  CHANGE_BORDER_RADIUS,\n  TOGGLE_BOX_SHADOW,\n  TOGGLE_TOP_NAVIGATION\n} from '../actions/themeActions';\n\nconst initialState = {\n  isAuthoring: false,\n  className: 'theme-light',\n  squaredCorners: false,\n  withBoxShadow: false,\n  topNavigation: false,\n};\n\nfunction themeReducer(state = initialState, action) {\n  switch (action.type) {\n    case CHANGE_THEME_TO_DARK:\n      return { ...state, className: 'theme-dark' };\n    case CHANGE_THEME_TO_LIGHT:\n      return { ...state, className: 'theme-light' };\n    case SET_IS_AUTHORING:\n      return { ...state, isAuthoring: action.payload.isAuthoring };\n    case CHANGE_BORDER_RADIUS:\n      return { ...state, squaredCorners: !state.squaredCorners };\n    case TOGGLE_BOX_SHADOW:\n      return { ...state, withBoxShadow: !state.withBoxShadow };\n    case TOGGLE_TOP_NAVIGATION:\n      return { ...state, topNavigation: !state.topNavigation };\n    default:\n      return state;\n  }\n}\n\nexport default themeReducer;\n\n","\n/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const FETCH_GRAPH = 'FETCH_GRAPH';\nexport const FETCH_GRAPH_COMPLETE = 'FETCH_GRAPH_COMPLETE';\nexport const FETCH_GRAPH_FAILED = 'FETCH_GRAPH_FAILED';\n\nexport function fetchGraph(requirements, variables) {\n  return {\n    type: FETCH_GRAPH,\n    payload: { requirements, variables }\n  };\n}\n\nexport function fetchGraphComplete(data, rootPayload) {\n  return {\n    type: FETCH_GRAPH_COMPLETE,\n    payload: data,\n    rootPayload\n  };\n}\n\nexport function fetchGraphFailed(response, rootPayload) {\n  return {\n    type: FETCH_GRAPH_FAILED,\n    payload: response,\n    rootPayload\n  };\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { catchError, map } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\nexport function removeProp(branch, ...keys) {\n  const next = { ...branch };\n  keys.forEach((key) => {\n    delete next[key];\n  });\n  return next;\n}\n\nexport const errorOp = catchError((response) => of(response));\n\nexport const mapOp = (success, fail) => map(\n  ({ response, name }) =>\n    (name !== 'AjaxError')\n      ? success(response)\n      : fail(response)\n);\n\nexport function getRootType(type) {\n  return type.replace(/_FAILED|_COMPLETE/g, '');\n}\n\nexport function byIdLoadingKey(root, id) {\n  return `${root}[${id}]`;\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport function toLookupTable(array, prop = 'id') {\n  return array.reduce(\n    (table, item) => {\n      table[item[prop]] = item;\n      return table;\n    },\n    {}\n  )\n}\n\nexport function shuffle(source) {\n  let\n    array = [...source],\n    currentIndex = array.length,\n    temporaryValue,\n    randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { FETCH_GRAPH, FETCH_GRAPH_COMPLETE, FETCH_GRAPH_FAILED } from '../actions/contentActions';\nimport { byIdLoadingKey, removeProp } from '../../util/redux';\nimport { toLookupTable } from '../../util/array';\nimport { LOGIN_COMPLETE } from '../actions/usersActions';\n\nconst initialState = {\n  nav: null,\n  header: null,\n  home: null,\n  footer: null,\n  store: null,\n  post: null,\n  categories: null,\n  loading: {},\n  errors: {}\n};\n\nexport default function contentReducer(state = initialState, action) {\n  const { payload, type } = action;\n  switch (type) {\n    case LOGIN_COMPLETE: {\n      return {\n        ...state,\n        home: null,\n        loading: removeProp(state.loading, byIdLoadingKey(FETCH_GRAPH, 'home'))\n      }\n    }\n    case FETCH_GRAPH: {\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [FETCH_GRAPH]: true,\n          ...payload.requirements.reduce(\n            (table, req) => {\n              const key = byIdLoadingKey(FETCH_GRAPH, req);\n              table[key] = true;\n              return table;\n            },\n            {}\n          )\n        }\n      };\n    }\n    case FETCH_GRAPH_COMPLETE: {\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [FETCH_GRAPH]: false,\n          ...action.rootPayload.requirements.reduce(\n            (table, req) => {\n              const key = byIdLoadingKey(FETCH_GRAPH, req);\n              table[key] = false;\n              return table;\n            },\n            {}\n          )\n        },\n        nav: getNav(payload) || state.nav,\n        header: getHeader(payload) || state.header,\n        home: getHome(payload) || state.home,\n        footer: getFooter(payload) || state.footer,\n        post: getPosts(state.post, payload),\n        categories: getCategories(state.categories, payload),\n        errors: removeProp(state.errors, FETCH_GRAPH),\n        store: getStore(state.store, payload)\n      };\n    }\n    case FETCH_GRAPH_FAILED: {\n      return {\n        ...state,\n        loading: removeProp(\n          state.loading,\n          FETCH_GRAPH,\n          ...action.rootPayload.requirements.map(req => byIdLoadingKey(FETCH_GRAPH, req))\n        ),\n        errors: {\n          ...state.errors,\n          [FETCH_GRAPH]: payload.errors\n        }\n      }\n    }\n    default:\n      return state;\n  }\n}\n\nfunction getHeader(data) {\n  return data && data.header ? data.header.items[0] : null;\n}\n\nfunction getFooter(data) {\n  return data && data.footer ? data.footer.items[0] : null;\n}\n\nfunction getNav(data) {\n  return data && data.nav ? data.nav.items : null;\n}\n\nfunction getHome(data) {\n  if (!data || !data.home)\n    return null;\n\n  const posts = data.post && data.post.items.length > 0 ? data.post.items : [];\n  const sections = data.home.items[0].sections_o.item;\n\n  return sections\n    .map(({ component, key, value }) => ({\n      localId: key,\n      label: value,\n      ...component,\n      ...component.contentType === '/component/blog_teaser' ? { posts_o: posts } : {}\n    }))\n    .filter(\n      (component) => ![\n        '/component/header',\n        '/component/footer'\n      ].includes(component.contentType)\n    );\n\n}\n\nfunction getPosts(state, payload) {\n  const data = payload && payload.post ? payload.post : null;\n  if (!data || (!data && !state)) {\n    return state;\n  }\n  return {\n    bySlug: {\n      ...state ? state.bySlug : {},\n      ...toLookupTable(data.items, 'slug_s')\n    }\n  };\n}\n\nfunction getStore(state, payload) {\n  const data = payload && payload.store ? payload.store : null;\n  if (!data || (!data && !state)) {\n    return state;\n  }\n  return {\n    ...payload.store.settings\n  };\n}\n\nfunction getCategories(state, payload) {\n  const data = payload && payload.categories ? payload.categories : null;\n  if (!data || (!data && !state))\n    return state;\n  return {\n    byId: toLookupTable(payload.categories.items[0].items.item, 'key')\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport {\n  ADD_USER_ADDRESS,\n  ADD_USER_ADDRESS_COMPLETE,\n  ADD_USER_ADDRESS_FAILED,\n  EDIT_USER_ADDRESS,\n  EDIT_USER_ADDRESS_COMPLETE,\n  EDIT_USER_ADDRESS_FAILED, FETCH_ORDER, FETCH_ORDER_COMPLETE, FETCH_ORDER_FAILED,\n  FETCH_ORDERS,\n  FETCH_ORDERS_COMPLETE,\n  FETCH_ORDERS_FAILED, LOGIN,\n  LOGIN_COMPLETE,\n  LOGIN_FAILED,\n  LOGOUT_COMPLETE, REGISTRATION_COMPLETE,\n  REMOVE_USER_ADDRESS,\n  REMOVE_USER_ADDRESS_COMPLETE,\n  REMOVE_USER_ADDRESS_FAILED,\n  RESET_LOGIN_REDIRECT,\n  SET_LOGIN_REDIRECT, SET_PERSONA,\n  SET_USER_ADDRESS_DEFAULTS,\n  SET_USER_ADDRESS_DEFAULTS_COMPLETE,\n  SET_USER_ADDRESS_DEFAULTS_FAILED,\n  SUBMIT_REGISTRATION_FAILED\n} from '../actions/usersActions';\nimport { getRootType, removeProp } from '../../util/redux';\nimport { CHECKOUT_COMPLETE } from '../actions/productsActions';\nimport { toLookupTable } from '../../util/array';\n\nconst initialState = {\n  loading: {},\n  errors: {},\n  user: null,\n  orders: {},\n  persona: null,\n  loginRedirect: '/account',\n  registerConfirmPending: false\n};\n\nexport default function usersReducer(state = initialState, action) {\n  let { root, type, payload } = action;\n  if (!root) root = getRootType(type);\n  switch (type) {\n\n    case SET_PERSONA:\n      return {\n        ...state,\n        persona: payload.persona\n      };\n\n    case LOGIN:\n    case FETCH_ORDER:\n    case FETCH_ORDERS:\n    case ADD_USER_ADDRESS:\n    case EDIT_USER_ADDRESS:\n    case REMOVE_USER_ADDRESS:\n    case SET_USER_ADDRESS_DEFAULTS:\n      return {\n        ...state,\n        errors: removeProp(state.errors, type),\n        loading: {\n          ...state.loading,\n          [type]: true\n        }\n      };\n\n    case CHECKOUT_COMPLETE:\n    case FETCH_ORDER_COMPLETE:\n      return {\n        ...state,\n        orders: {\n          ...state.orders,\n          [payload.id]: payload\n        }\n      };\n\n    case LOGIN_COMPLETE:\n    case ADD_USER_ADDRESS_COMPLETE:\n    case EDIT_USER_ADDRESS_COMPLETE:\n    case REMOVE_USER_ADDRESS_COMPLETE:\n    case SET_USER_ADDRESS_DEFAULTS_COMPLETE:\n      return {\n        ...state,\n        persona: payload.attributes,\n        user: payload,\n        loading: {\n          ...state.loading,\n          [root]: false\n        }\n      };\n\n    case FETCH_ORDERS_COMPLETE:\n      return {\n        ...state,\n        errors: removeProp(state.errors, FETCH_ORDERS),\n        loading: {\n          ...state.loading,\n          [FETCH_ORDERS]: false\n        },\n        orders: toLookupTable(payload.items)\n      };\n\n    case LOGOUT_COMPLETE:\n      return {\n        ...state,\n        user: null\n      };\n\n    case LOGIN_FAILED:\n    case FETCH_ORDER_FAILED:\n    case ADD_USER_ADDRESS_FAILED:\n    case EDIT_USER_ADDRESS_FAILED:\n    case REMOVE_USER_ADDRESS_FAILED:\n    case SET_USER_ADDRESS_DEFAULTS_FAILED:\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [root]: false\n        },\n        errors: {\n          [root]: payload.message\n        }\n      };\n\n    case SUBMIT_REGISTRATION_FAILED:\n      return {\n        ...state,\n        errors: {\n          registration: payload.response.message\n        }\n      };\n    case FETCH_ORDERS_FAILED:\n      return payload.status === 403 ? {\n        ...state,\n        user: null\n      } : state;\n\n    case SET_LOGIN_REDIRECT:\n      return {\n        ...state,\n        loginRedirect: payload.url\n      };\n    case RESET_LOGIN_REDIRECT:\n      return {\n        ...state,\n        loginRedirect: initialState.loginRedirect\n      };\n\n    case REGISTRATION_COMPLETE:\n      return {\n        ...state,\n        registerConfirmPending: true\n      };\n\n    default:\n      return state;\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { LOGIN_COMPLETE } from '../actions/usersActions';\nimport {\n  ADD_TO_CART,\n  ADD_TO_CART_COMPLETE,\n  ADD_TO_CART_FAILED,\n  CHANGE_CURRENCY,\n  CHANGE_LOCALE,\n  CHECKOUT_COMPLETE,\n  FACETS_CHANGED,\n  FETCH_CART_COMPLETE,\n  FETCH_PRODUCT,\n  FETCH_PRODUCT_COMPLETE,\n  FETCH_PRODUCT_FAILED,\n  FETCH_PRODUCTS,\n  FETCH_PRODUCTS_COMPLETE,\n  FETCH_PRODUCTS_FAILED,\n  FETCH_SHIPPING_METHODS,\n  FETCH_SHIPPING_METHODS_COMPLETE,\n  FETCH_SHIPPING_METHODS_FAILED,\n  KEYWORDS_CHANGED, REMOVE_FROM_CART,\n  REMOVE_FROM_CART_COMPLETE, SET_STORE_SETTINGS,\n  UPDATE_CART,\n  UPDATE_CART_COMPLETE, UPDATE_CART_FAILED, UPDATE_CART_ITEM_QUANTITY,\n  UPDATE_CART_ITEM_QUANTITY_COMPLETE, UPDATE_CART_ITEM_QUANTITY_FAILED\n} from '../actions/productsActions';\nimport { toLookupTable } from '../../util/array';\nimport { byIdLoadingKey, getRootType, removeProp } from '../../util/redux';\nimport { FETCH_GRAPH_COMPLETE } from '../actions/contentActions';\nimport Cookies from 'js-cookie'\n\nconst initialState = {\n  byId: null,\n  cart: null,\n  facets: [],\n  loading: {},\n  errors: {},\n  query: {\n    offset: 0,\n    limit: 10,\n    locale: 'en',\n    currency: 'USD'\n  }\n};\n\nexport default function productReducer(state = initialState, action) {\n  let { root, type, payload } = action;\n  if (root == null) root = getRootType(type);\n  switch (type) {\n\n    case ADD_TO_CART:\n    case UPDATE_CART:\n    case REMOVE_FROM_CART:\n    case UPDATE_CART_ITEM_QUANTITY:\n      return {\n        ...state,\n        errors: removeProp(state.errors, type),\n        loading: {\n          ...state.loading,\n          [type]: true\n        }\n      };\n\n    case CHECKOUT_COMPLETE:\n      return {\n        ...state,\n        cart: null\n      };\n\n    case FETCH_PRODUCTS:\n      return {\n        ...state,\n        errors: removeProp(state.errors, FETCH_PRODUCTS),\n        loading: {\n          ...state.loading,\n          [FETCH_PRODUCTS]: true\n        },\n        query: payload.query\n          ? {\n            ...state.query,\n            ...payload.query\n          }\n          : state.query\n      };\n\n    case FETCH_PRODUCTS_COMPLETE:\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [FETCH_PRODUCTS]: false\n        },\n        query: {\n          ...state.query,\n          total: payload.total\n        },\n        byId: toLookupTable(payload.items),\n        facets: payload.facets\n      };\n\n    case CHANGE_LOCALE:\n    case CHANGE_CURRENCY: {\n      Cookies.set(type === CHANGE_LOCALE ? 'locale' : 'currency', payload.value);\n      return {\n        ...state,\n        query: {\n          ...state.query,\n          [type === CHANGE_LOCALE ? 'locale' : 'currency']: payload.value\n        }\n      }\n    }\n\n    case SET_STORE_SETTINGS: {\n      return {\n        ...state,\n        query: {\n          ...state.query,\n          ...payload\n        }\n      }\n    }\n\n    case FETCH_GRAPH_COMPLETE: {\n      // TODO: Enable optional chaining operator\n      if (payload && payload.store && payload.store.settings) {\n        return {\n          ...state,\n          query: {\n            ...state.query,\n            currency: Cookies.get('currency') || payload.store.settings.currencies[0],\n            locale: Cookies.get('locale') || payload.store.settings.locales[0]\n          }\n        };\n      } else {\n        return state;\n      }\n    }\n\n    case FETCH_PRODUCT:\n      return {\n        ...state,\n        errors: removeProp(state.errors, FETCH_PRODUCT),\n        loading: {\n          ...state.loading,\n          [byIdLoadingKey(root, payload.id)]: true\n        }\n      };\n\n    case FETCH_PRODUCT_COMPLETE:\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [byIdLoadingKey(root, payload.item.id)]: false\n        },\n        byId: {\n          ...state.byId,\n          [payload.item.id]: payload.item\n        }\n      };\n\n    case LOGIN_COMPLETE:\n      return payload.cart ? {\n        ...state,\n        cart: payload.cart\n      } : state;\n\n    case FETCH_CART_COMPLETE:\n    case UPDATE_CART_COMPLETE:\n    case ADD_TO_CART_COMPLETE:\n    case REMOVE_FROM_CART_COMPLETE:\n    case UPDATE_CART_ITEM_QUANTITY_COMPLETE:\n      return {\n        ...state,\n        cart: payload,\n        loading: {\n          ...state.loading,\n          [root]: false\n        }\n      };\n\n    case FACETS_CHANGED:\n      return {\n        ...state,\n        query: {\n          ...state.query,\n          ...payload.query\n        }\n      };\n\n    case KEYWORDS_CHANGED:\n      return {\n        ...state,\n        query: {\n          ...state.query,\n          keywords: payload.keywords\n        }\n      };\n\n    case FETCH_SHIPPING_METHODS:\n      return {\n        ...state,\n        errors: removeProp(state.errors, FETCH_SHIPPING_METHODS),\n        loading: {\n          ...state.loading,\n          [FETCH_SHIPPING_METHODS]: true\n        }\n      };\n\n    case FETCH_SHIPPING_METHODS_COMPLETE:\n      return {\n        ...state,\n        shippingMethods: payload,\n        loading: {\n          ...state.loading,\n          [FETCH_SHIPPING_METHODS]: false\n        }\n      };\n\n\n    case ADD_TO_CART_FAILED:\n    case UPDATE_CART_FAILED:\n    case FETCH_PRODUCT_FAILED:\n    case FETCH_PRODUCTS_FAILED:\n    case FETCH_SHIPPING_METHODS_FAILED:\n    case UPDATE_CART_ITEM_QUANTITY_FAILED:\n      return {\n        ...state,\n        errors: {\n          ...state.errors,\n          [root]: payload.message || payload.response.message\n        },\n        loading: {\n          ...state.loading,\n          [root]: false\n        }\n      };\n\n    default:\n      return state;\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { ofType } from 'redux-observable';\nimport {\n  LOGIN,\n  LOGOUT,\n  FETCH_ORDERS,\n  UNAUTHORIZED,\n  SUBMIT_REGISTRATION,\n  fetchOrdersComplete,\n  fetchOrdersFailed,\n  loginComplete,\n  loginFailed,\n  logoutComplete,\n  logoutFailed,\n  submitRegistrationComplete,\n  submitRegistrationFailed,\n  ADD_USER_ADDRESS,\n  addAddressComplete,\n  addAddressFailed,\n  EDIT_USER_ADDRESS,\n  editAddressComplete,\n  editAddressFailed,\n  REMOVE_USER_ADDRESS,\n  removeAddressFailed,\n  removeAddressComplete,\n  SET_USER_ADDRESS_DEFAULTS,\n  setAddressDefaultsComplete,\n  setAddressDefaultsFailed,\n  FETCH_ORDER,\n  fetchOrderFailed,\n  fetchOrderComplete\n} from '../actions/usersActions';\nimport { catchError, ignoreElements, map, switchMap, tap, withLatestFrom } from 'rxjs/operators';\nimport { ajax } from 'rxjs/ajax';\nimport { errorOp, mapOp } from '../../util/redux';\n\nexport function submitRegistrationEpic(action$, state$) {\n  return action$.pipe(\n    ofType(SUBMIT_REGISTRATION),\n    switchMap(() => {\n      const data = state$.value.form.registration.values;\n      return ajax.post(\n        `/api/1/customer/signup.json`,\n        data,\n        {\n          'Content-Type': 'application/json; charset=UTF-8'\n        }\n      ).pipe(\n        catchError((error) => [error])\n      );\n    }),\n    map((response) => {\n      if (response.name === 'AjaxError') {\n        return submitRegistrationFailed(response);\n      } else {\n        return submitRegistrationComplete(response.response);\n      }\n    })\n  );\n}\n\nexport const loginEpic = (action$, state$) => action$.pipe(\n  ofType(LOGIN),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/security/login.json`,\n      payload.data,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(\n      tap(() => setTimeout(() =>\n        payload.redirect &&\n        payload.redirect(state$.value.users.loginRedirect)\n      )),\n      errorOp\n    )\n  ),\n  mapOp(loginComplete, loginFailed)\n);\n\nexport const logoutEpic = (action$) => action$.pipe(\n  ofType(LOGOUT),\n  switchMap(({ payload }) =>\n    ajax\n      .post(`/api/1/security/logout.json`)\n      .pipe(\n        withLatestFrom([payload.redirect]),\n        errorOp\n      )\n  ),\n  map(([response, redirect]) => {\n    if (response.name === 'AjaxError') {\n      return logoutFailed(response);\n    } else {\n      redirect('/');\n      return logoutComplete(response.response);\n    }\n  })\n);\n\nexport const unauthorizedEpic = (action$) => action$.pipe(\n  ofType(UNAUTHORIZED),\n  tap(({ payload }) => payload.redirect('/login')),\n  ignoreElements()\n);\n\nexport const fetchOrdersEpic = (action$) => action$.pipe(\n  ofType(FETCH_ORDERS),\n  switchMap(() => ajax\n    .get(`/api/1/customer/orders.json`)\n    .pipe(errorOp)\n  ),\n  map((response) =>\n    (response.name === 'AjaxError')\n      ? fetchOrdersFailed(response)\n      : fetchOrdersComplete(response.response)\n  )\n);\n\nexport const fetchOrderEpic = (action$) => action$.pipe(\n  ofType(FETCH_ORDER),\n  switchMap(({ payload }) => ajax\n    .get(`/api/1/customer/orders/${payload.id}.json`)\n    .pipe(errorOp)\n  ),\n  mapOp(fetchOrderComplete, fetchOrderFailed)\n);\n\nexport const addUserAddressEpic = (action$) => action$.pipe(\n  ofType(ADD_USER_ADDRESS),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/customer/update.json`,\n      { addAddress: [payload.address] },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(addAddressComplete, addAddressFailed)\n);\n\nexport const editUserAddressEpic = (action$) => action$.pipe(\n  ofType(EDIT_USER_ADDRESS),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/customer/update.json`,\n      { changeAddress: [payload.address] },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(editAddressComplete, editAddressFailed)\n);\n\nexport const removeUserAddressEpic = (action$) => action$.pipe(\n  ofType(REMOVE_USER_ADDRESS),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/customer/update.json`,\n      { removeAddress: [{ id: payload.id }] },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(removeAddressComplete, removeAddressFailed)\n);\n\nexport const setAsDefaultAddressEpic = (action$) => action$.pipe(\n  ofType(SET_USER_ADDRESS_DEFAULTS),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/customer/update.json`,\n      {\n        ...payload.address.isBillingDefault ? { defaultBillingAddress: payload.address.id } : {},\n        ...payload.address.isShippingDefault ? { defaultShippingAddress: payload.address.id } : {}\n      },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    )\n  ),\n  mapOp(setAddressDefaultsComplete, setAddressDefaultsFailed)\n);\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { loader } from 'graphql.macro';\nimport { ofType } from 'redux-observable';\nimport {\n  FETCH_GRAPH,\n  FETCH_GRAPH_COMPLETE,\n  fetchGraphComplete,\n  fetchGraphFailed\n} from '../actions/contentActions';\nimport { catchError, filter, map, switchMap } from 'rxjs/operators';\nimport { capitalize } from '../../util/string';\nimport { ajax } from 'rxjs/ajax';\nimport { of } from 'rxjs';\nimport { setStoreSettings } from '../actions/productsActions';\n\nconst FragmentMap = {\n  home: loader('../../queries/Home.fragment.graphql').loc.source.body,\n  nav: loader('../../queries/Nav.fragment.graphql').loc.source.body,\n  header: loader('../../queries/Header.fragment.graphql').loc.source.body,\n  footer: loader('../../queries/Footer.fragment.graphql').loc.source.body,\n  post: loader('../../queries/Post.fragment.graphql').loc.source.body,\n  categories: loader('../../queries/Categories.fragment.graphql').loc.source.body,\n  blog: loader('../../queries/Blog.graphql').loc.source.body,\n  Hero: loader('../../queries/Hero.fragment.graphql').loc.source.body,\n  ContentSideImage: loader('../../queries/ContentSideImage.fragment.graphql').loc.source.body,\n  FeatureList: loader('../../queries/FeatureList.fragment.graphql').loc.source.body,\n  Testimonials: loader('../../queries/Testimonials.fragment.graphql').loc.source.body,\n  store: loader('../../queries/Store.fragment.graphql').loc.source.body\n};\n\nexport function fetchGraphEpic(action$) {\n  return action$.pipe(\n    ofType(FETCH_GRAPH),\n    switchMap(({ payload }) => {\n      const { requirements, variables } = payload;\n\n      const fragments = [];\n      const queryPieces = ['\\n'];\n      const vars = {};\n      let varSignature = '';\n\n      if (variables && variables.length) {\n        const signaturePieces = [];\n        variables.forEach((variable) => {\n          if (variable.value != null) {\n            vars[variable.name] = variable.value;\n          }\n          signaturePieces.push(`$${variable.name}: ${variable.type}`);\n        });\n        varSignature = `(${signaturePieces.join(', ')})`;\n      }\n\n      requirements.forEach((req) => {\n        queryPieces.push(`...${capitalize(req)}\\n`);\n        fragments.push(FragmentMap[req]);\n      });\n\n      const query = `query CustomGraph${varSignature} {${queryPieces.join('')}}\\n${fragments.join('\\n')}`;\n\n      return ajax.post(\n        process.env.REACT_APP_GRAPHQL_SERVER,\n        {\n          query,\n          variables: vars\n        },\n        { 'Content-Type': 'application/json; charset=UTF-8' }\n      ).pipe(\n        catchError((response) => of(response)),\n        map(({ response, name }) => (\n          (name !== 'AjaxError' && !response.errors)\n            ? fetchGraphComplete(response.data, payload)\n            : fetchGraphFailed(response, payload)\n        ))\n      );\n\n    })\n  );\n}\n\nexport function fetchGraphCompleteEpic(action$) {\n  return action$.pipe(\n    ofType(FETCH_GRAPH_COMPLETE),\n    filter(({ payload }) => (\n      payload &&\n      payload.store &&\n      payload.store.settings\n    )),\n    map(({ payload: { store: { settings } } }) => setStoreSettings(settings))\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { combineEpics } from 'redux-observable';\nimport {\n  addToCartEpic,\n  checkoutEpic,\n  facetsChangedEpic,\n  fetchCartEpic,\n  fetchProductEpic,\n  fetchProductsEpic,\n  removeFromCartEpic,\n  updateCartEpic,\n  updateCartItemEpic\n} from './products';\nimport {\n  addUserAddressEpic,\n  editUserAddressEpic,\n  fetchOrderEpic,\n  fetchOrdersEpic,\n  loginEpic,\n  logoutEpic,\n  removeUserAddressEpic,\n  setAsDefaultAddressEpic,\n  unauthorizedEpic\n} from './users';\nimport { fetchGraphEpic } from './content';\n\n// (action$: Observable<Action>, state$: StateObservable<State>): Observable<Action>;\n\nexport default combineEpics(\n  fetchProductEpic,\n  fetchProductsEpic,\n  fetchGraphEpic,\n  fetchCartEpic,\n  addToCartEpic,\n  removeFromCartEpic,\n  updateCartItemEpic,\n  fetchOrdersEpic,\n  loginEpic,\n  logoutEpic,\n  unauthorizedEpic,\n  facetsChangedEpic,\n  addUserAddressEpic,\n  editUserAddressEpic,\n  removeUserAddressEpic,\n  setAsDefaultAddressEpic,\n  updateCartEpic,\n  checkoutEpic,\n  fetchOrderEpic\n);\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { ofType } from 'redux-observable';\nimport { mapTo, pluck, switchMap, tap, withLatestFrom } from 'rxjs/operators';\nimport { ajax } from 'rxjs/ajax';\n\nimport {\n  ADD_TO_CART,\n  addToCartComplete,\n  addToCartFailed,\n  CHECKOUT,\n  checkoutComplete,\n  checkoutFailed,\n  FACETS_CHANGED,\n  FETCH_CART,\n  FETCH_PRODUCT,\n  FETCH_PRODUCTS,\n  FETCH_SHIPPING_METHODS,\n  fetchCartComplete,\n  fetchCartFailed,\n  fetchProductComplete,\n  fetchProductFailed,\n  fetchProducts,\n  fetchProductsComplete,\n  fetchProductsFailed,\n  fetchShippingMethodsComplete,\n  fetchShippingMethodsFailed,\n  REMOVE_FROM_CART,\n  removeFromCartComplete,\n  removeFromCartFailed,\n  UPDATE_CART,\n  UPDATE_CART_COMPLETE,\n  UPDATE_CART_ITEM_QUANTITY,\n  updateCartComplete,\n  updateCartFailed,\n  updateCartItemQuantityComplete,\n  updateCartItemQuantityFailed\n} from '../actions/productsActions';\nimport { errorOp, mapOp } from '../../util/redux';\n\nexport const fetchProductEpic = (action$, state$) => action$.pipe(\n  ofType(FETCH_PRODUCT),\n  withLatestFrom(state$.pipe(pluck('products'))),\n  switchMap(([{ payload }, state]) =>\n    ajax\n      .get(`/api/1/product/${payload.id}.json?locale=${state.query.locale}&currency=${state.query.currency}`)\n      .pipe(errorOp)\n  ),\n  mapOp(fetchProductComplete, fetchProductFailed)\n);\n\nexport const fetchProductsEpic = (action$, state$) => action$.pipe(\n  ofType(FETCH_PRODUCTS),\n  withLatestFrom(state$.pipe(pluck('products'))),\n  switchMap(([action, state]) => {\n    const { query } = state;\n    const qs = [];\n\n    Object.entries(query).forEach(([key, value]) => {\n      if (key !== 'total' && value != null && value !== '') {\n        if (Array.isArray(value)) {\n          (value.length > 0) && qs.push(`filter=${key}:${value.join(',')}`)\n        } else if (typeof value === 'object') {\n          qs.push(`filter=${key}:${value.min};${value.max}`);\n        } else {\n          qs.push(`${key}=${value}`);\n        }\n      }\n    });\n\n    return ajax\n      .get(`/api/1/product/all.json?${qs.join('&')}`)\n      .pipe(errorOp);\n  }),\n  mapOp(fetchProductsComplete, fetchProductsFailed)\n);\n\nexport const fetchCartEpic = (action$) => action$.pipe(\n  ofType(FETCH_CART),\n  switchMap(() => ajax.get('/api/1/cart/current.json').pipe(errorOp)),\n  mapOp(fetchCartComplete, fetchCartFailed)\n);\n\nexport const addToCartEpic = (action$) => action$.pipe(\n  ofType(ADD_TO_CART),\n  switchMap(\n    ({ payload }) => ajax.post(\n      '/api/1/cart/item/add.json',\n      payload,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(addToCartComplete, addToCartFailed)\n);\n\nexport const updateCartItemEpic = (action$) => action$.pipe(\n  ofType(UPDATE_CART_ITEM_QUANTITY),\n  switchMap(\n    ({ payload }) => ajax.post(\n      '/api/1/cart/item/change.json',\n      { itemId: payload.id, quantity: payload.quantity },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(updateCartItemQuantityComplete, updateCartItemQuantityFailed)\n);\n\nexport const updateCartEpic = (action$) => action$.pipe(\n  ofType(UPDATE_CART),\n  switchMap(({ payload }) =>\n    ajax.post(\n      '/api/1/cart/update.json',\n      payload,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(updateCartComplete, updateCartFailed)\n);\n\nexport const fetchShippingMethodsEpic = (action$) => action$.pipe(\n  ofType(UPDATE_CART_COMPLETE, FETCH_SHIPPING_METHODS),\n  switchMap(() =>\n    ajax\n      .get('/api/1/cart/shipping-methods.json')\n      .pipe(errorOp)\n  ),\n  mapOp(fetchShippingMethodsComplete, fetchShippingMethodsFailed)\n);\n\nexport const removeFromCartEpic = (action$) => action$.pipe(\n  ofType(REMOVE_FROM_CART),\n  switchMap(({ payload }) =>\n    ajax.post(\n      '/api/1/cart/item/change.json',\n      { itemId: payload.id, quantity: 0 },\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    ).pipe(errorOp)\n  ),\n  mapOp(removeFromCartComplete, removeFromCartFailed)\n);\n\nexport const facetsChangedEpic = (action$) => action$.pipe(\n  ofType(FACETS_CHANGED),\n  mapTo(fetchProducts())\n);\n\nexport const checkoutEpic = (action$) => action$.pipe(\n  ofType(CHECKOUT),\n  switchMap(({ payload }) => ajax\n    .post(\n      `/api/1/cart/checkout.json`,\n      payload.data.card,\n      { 'Content-Type': 'application/json; charset=UTF-8' }\n    )\n    .pipe(\n      tap(({ response }) => payload.redirect(`/account/orders/${response.id}`)),\n      errorOp\n    )\n  ),\n  mapOp(checkoutComplete, checkoutFailed)\n);\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { combineReducers, createStore, applyMiddleware, compose } from 'redux';\nimport { createEpicMiddleware } from 'redux-observable';\nimport {\n  themeReducer,\n  contentReducer,\n  usersReducer,\n  productsReducer\n} from './reducers';\n\nimport rootEpic from './epics/epics';\nimport { loginComplete, setPersona } from './actions/usersActions';\nimport { setIsAuthoring } from './actions/themeActions';\nimport { setStoreSettings } from './actions/productsActions';\nimport React, { createContext, useContext, useMemo } from 'react';\nimport { createDispatchHook, createSelectorHook, createStoreHook } from 'react-redux';\nimport Subscription from 'react-redux/lib/utils/Subscription';\n\nconst reducer = combineReducers({\n  theme: themeReducer,\n  content: contentReducer,\n  users: usersReducer,\n  products: productsReducer\n});\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst epicMiddleware = createEpicMiddleware();\n\nconst store = createStore(\n  reducer,\n  composeEnhancers(\n    applyMiddleware(epicMiddleware)\n  )\n);\n\nconst json = document.getElementById('userJSON').innerHTML;\ntry {\n  const user = JSON.parse(json);\n  user && store.dispatch(loginComplete(user));\n} catch (e) {\n  (process.env.NODE_ENV === 'development') && console.error('Invalid syntax for user JSON.', e.message);\n}\n\nlet persona = null;\ntry {\n  const json = document.getElementById('personaJSON').innerHTML;\n  persona = JSON.parse(json);\n  persona && store.dispatch(setPersona(persona))\n} catch (e) {\n  (process.env.NODE_ENV === 'development') && console.error('Invalid syntax for persona JSON.', e.message);\n}\n\nlet storeSettings = null;\ntry {\n  const json = document.getElementById('storeSettingsJSON').innerHTML;\n  storeSettings = JSON.parse(json);\n  storeSettings && store.dispatch(setStoreSettings(storeSettings));\n} catch (e) {\n  (process.env.NODE_ENV === 'development') && console.error('Invalid syntax for store settings JSON.', e.message);\n}\n\n// True if the site is being view via authoring (studio).\n// False if it's the live site.\nconst isAuthoring = ['true']\n  .includes(\n    document\n      .querySelector('html')\n      .getAttribute('data-craftercms-preview')\n  );\n\nif (isAuthoring) {\n  store.dispatch(setIsAuthoring(isAuthoring));\n}\n\nepicMiddleware.run(rootEpic);\n\nexport const AppStoreContext = createContext();\n\nexport function useAppStoreContext() {\n  const context = useContext(AppStoreContext);\n  if (!context) {\n    throw new Error(`useGlobalContext must be used within a GlobalContextProvider`);\n  }\n  return context;\n}\n\nexport function AppStoreContextProvider(props) {\n  const value = useMemo(function () {\n    var subscription = new Subscription(store);\n    subscription.onStateChange = subscription.notifyNestedSubs;\n    return {\n      store: store,\n      subscription: subscription\n    };\n    // eslint-disable-next-line\n  }, [store]);\n\n  return <AppStoreContext.Provider value={value} {...props} />;\n}\n\nexport const useAppStore = createStoreHook(AppStoreContext);\nexport const useAppSelector = createSelectorHook(AppStoreContext);\nexport const useAppDispatch = createDispatchHook(AppStoreContext);\n\nexport default store;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const FETCH_PRODUCTS = 'FETCH_PRODUCTS';\nexport const FETCH_PRODUCTS_COMPLETE = 'FETCH_PRODUCTS_COMPLETE';\nexport const FETCH_PRODUCTS_FAILED = 'FETCH_PRODUCTS_FAILED';\n\nexport const FETCH_PRODUCT = 'FETCH_PRODUCT';\nexport const FETCH_PRODUCT_COMPLETE = 'FETCH_PRODUCT_COMPLETE';\nexport const FETCH_PRODUCT_FAILED = 'FETCH_PRODUCT_FAILED';\n\nexport const FETCH_CART = 'FETCH_CART';\nexport const FETCH_CART_COMPLETE = 'FETCH_CART_COMPLETE';\nexport const FETCH_CART_FAILED = 'FETCH_CART_FAILED';\n\nexport const ADD_TO_CART = 'ADD_TO_CART';\nexport const ADD_TO_CART_COMPLETE = 'ADD_TO_CART_COMPLETE';\nexport const ADD_TO_CART_FAILED = 'ADD_TO_CART_FAILED';\n\nexport const UPDATE_CART = 'UPDATE_CART';\nexport const UPDATE_CART_COMPLETE = 'UPDATE_CART_COMPLETE';\nexport const UPDATE_CART_FAILED = 'UPDATE_CART_FAILED';\n\nexport const UPDATE_CART_ITEM_QUANTITY = 'UPDATE_CART_ITEM_QUANTITY';\nexport const UPDATE_CART_ITEM_QUANTITY_COMPLETE = 'UPDATE_CART_ITEM_QUANTITY_COMPLETE';\nexport const UPDATE_CART_ITEM_QUANTITY_FAILED = 'UPDATE_CART_ITEM_QUANTITY_FAILED';\n\nexport const REMOVE_FROM_CART = 'REMOVE_FROM_CART';\nexport const REMOVE_FROM_CART_COMPLETE = 'REMOVE_FROM_CART_COMPLETE';\nexport const REMOVE_FROM_CART_FAILED = 'REMOVE_FROM_CART_FAILED';\n\nexport const FACETS_CHANGED = 'FACETS_CHANGED';\nexport const KEYWORDS_CHANGED = 'KEYWORDS_CHANGED';\n\nexport const FETCH_SHIPPING_METHODS = '';\nexport const FETCH_SHIPPING_METHODS_COMPLETE = 'FETCH_SHIPPING_METHODS_COMPLETE';\nexport const FETCH_SHIPPING_METHODS_FAILED = 'FETCH_SHIPPING_METHODS_FAILED';\n\nexport const CHECKOUT = 'CHECKOUT';\nexport const CHECKOUT_COMPLETE = 'CHECKOUT_COMPLETE';\nexport const CHECKOUT_FAILED = 'CHECKOUT_FAILED';\n\nexport const CHANGE_LOCALE = 'CHANGE_LOCALE';\nexport const CHANGE_CURRENCY = 'CHANGE_CURRENCY';\nexport const SET_STORE_SETTINGS = 'SET_STORE_SETTINGS';\n\nexport function fetchProduct(id) {\n  return {\n    type: FETCH_PRODUCT,\n    payload: { id }\n  };\n}\n\nexport function fetchProductComplete(response) {\n  return {\n    root: FETCH_PRODUCT,\n    type: FETCH_PRODUCT_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchProductFailed(response) {\n  return {\n    root: FETCH_PRODUCT,\n    type: FETCH_PRODUCT_FAILED,\n    payload: response\n  };\n}\n\nexport function fetchProducts(query) {\n  return {\n    type: FETCH_PRODUCTS,\n    payload: { query }\n  };\n}\n\nexport function fetchProductsComplete(response) {\n  return {\n    root: FETCH_PRODUCTS,\n    type: FETCH_PRODUCTS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchProductsFailed(response) {\n  return {\n    root: FETCH_PRODUCTS,\n    type: FETCH_PRODUCTS_FAILED,\n    payload: response\n  };\n}\n\nexport function fetchCart() {\n  return {\n    type: FETCH_CART\n  };\n}\n\nexport function fetchCartComplete(response) {\n  return {\n    root: FETCH_CART,\n    type: FETCH_CART_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchCartFailed(response) {\n  return {\n    root: FETCH_CART,\n    type: FETCH_CART_FAILED,\n    payload: response\n  };\n}\n\nexport function addToCart(cartItem) {\n  return {\n    type: ADD_TO_CART,\n    payload: cartItem\n  };\n}\n\nexport function addToCartComplete(response) {\n  return {\n    root: ADD_TO_CART,\n    type: ADD_TO_CART_COMPLETE,\n    payload: response\n  };\n}\n\nexport function addToCartFailed(response) {\n  return {\n    root: ADD_TO_CART,\n    type: ADD_TO_CART_FAILED,\n    payload: response\n  };\n}\n\nexport function removeFromCart(data) {\n  return {\n    type: REMOVE_FROM_CART,\n    payload: data\n  };\n}\n\nexport function removeFromCartComplete(data) {\n  return {\n    root: REMOVE_FROM_CART,\n    type: REMOVE_FROM_CART_COMPLETE,\n    payload: data\n  };\n}\n\nexport function removeFromCartFailed(data) {\n  return {\n    root: REMOVE_FROM_CART,\n    type: REMOVE_FROM_CART_FAILED,\n    payload: data\n  };\n}\n\nexport function updateCartItemQuantity(data) {\n  return {\n    type: UPDATE_CART_ITEM_QUANTITY,\n    payload: data\n  };\n}\n\nexport function updateCartItemQuantityComplete(data) {\n  return {\n    root: UPDATE_CART_ITEM_QUANTITY,\n    type: UPDATE_CART_ITEM_QUANTITY_COMPLETE,\n    payload: data\n  };\n}\n\nexport function updateCartItemQuantityFailed(data) {\n  return {\n    root: UPDATE_CART_ITEM_QUANTITY,\n    type: UPDATE_CART_ITEM_QUANTITY_FAILED,\n    payload: data\n  };\n}\n\nexport function updateCart(data) {\n  return {\n    type: UPDATE_CART,\n    payload: data\n  };\n}\n\nexport function updateCartComplete(data) {\n  return {\n    root: UPDATE_CART,\n    type: UPDATE_CART_COMPLETE,\n    payload: data\n  };\n}\n\nexport function updateCartFailed(data) {\n  return {\n    root: UPDATE_CART,\n    type: UPDATE_CART_FAILED,\n    payload: data\n  };\n}\n\nexport function facetsChanged(query) {\n  return {\n    type: FACETS_CHANGED,\n    payload: { query }\n  };\n}\n\nexport function keywordsChanged(keywords) {\n  return {\n    type: KEYWORDS_CHANGED,\n    payload: { keywords }\n  };\n}\n\nexport function fetchShippingMethods() {\n  return {\n    type: FETCH_SHIPPING_METHODS\n  };\n}\n\nexport function fetchShippingMethodsComplete(data) {\n  return {\n    root: FETCH_SHIPPING_METHODS,\n    type: FETCH_SHIPPING_METHODS_COMPLETE,\n    payload: data\n  };\n}\n\nexport function fetchShippingMethodsFailed(data) {\n  return {\n    root: FETCH_SHIPPING_METHODS,\n    type: FETCH_SHIPPING_METHODS_FAILED,\n    payload: data\n  };\n}\n\nexport function checkout(data, redirect) {\n  return {\n    type: CHECKOUT,\n    payload: { data, redirect }\n  };\n}\n\nexport function checkoutComplete(data) {\n  return {\n    root: CHECKOUT,\n    type: CHECKOUT_COMPLETE,\n    payload: data\n  };\n}\n\nexport function checkoutFailed(data) {\n  return {\n    root: CHECKOUT,\n    type: CHECKOUT_FAILED,\n    payload: data\n  };\n}\n\nexport function changeLocale(value) {\n  return {\n    type: CHANGE_LOCALE,\n    payload: { value }\n  };\n}\n\nexport function changeCurrency(value) {\n  return {\n    type: CHANGE_CURRENCY,\n    payload: { value }\n  };\n}\n\nexport function setStoreSettings(settings) {\n  return {\n    type: SET_STORE_SETTINGS,\n    payload: { currency: settings.currencies[0], locale: settings.locales[0] }\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Layout from './Layout';\nimport { Container, Row, Col, Card } from 'reactstrap';\nimport { BlogPostCard } from './BlogTeaser';\nimport Spinner from '../shared/Spinner';\nimport { Empty } from '../shared/Empty';\nimport * as qs from 'query-string';\nimport KeyboardArrowLeftIcon from 'mdi-react/KeyboardArrowLeftIcon';\nimport { Link } from 'react-router-dom';\nimport { useCategories, usePosts } from '../shared/hooks';\n\nexport default function BlogRoll(props) {\n  const {\n    model\n  } = props;\n\n  const selectedCategory = qs.parse(props.location.search).category;\n  const [postsFiltered, setPostsFiltered] = useState();\n  const [paginationData] = useState({\n    itemsPerPage: 500,\n    currentPage: 0\n  });\n  const posts = usePosts(paginationData);\n  const categories = useCategories();\n\n  useEffect(() => {\n    if (posts) {\n      setPostsFiltered(\n        selectedCategory\n          ? posts.items.filter(\n          ({categories_o}) => categories_o.some(i => i.key === selectedCategory)\n          )\n          : posts.items\n      );\n    }\n  }, [posts, selectedCategory]);\n\n  if (!model) {\n    return (\n      <Layout>\n        <Container>\n          <Row>\n            <Col md={12}>\n              <Spinner contained/>\n            </Col>\n          </Row>\n        </Container>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <Container>\n        <Row>\n          <Col md={12}>\n            <h1 className=\"page-title\">{ model && model.craftercms.label}</h1>\n          </Col>\n          <Col md={9}>\n            <Row>\n              {\n                postsFiltered && postsFiltered.length === 0 && <Col sm={12}>\n                  <Card style={{ background: '#fff' }}>\n                    <Empty description=\"There are no posts at this time. Please check back often :)\"/>\n                  </Card>\n                </Col>\n              }\n              {\n                postsFiltered && postsFiltered.map((post) =>\n                  <Col key={post.craftercms.id} xl={4} lg={6}>\n                    <BlogPostCard {...post} hideSummary/>\n                  </Col>\n                )\n              }\n            </Row>\n          </Col>\n          <Col md={3}>\n            <CategoryListing\n              categories={categories}\n              selected={selectedCategory}\n            />\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n}\n\nexport function CategoryListing(props) {\n  const { categories, selected } = props;\n  return (\n    categories && categories.length > 0 ? <div className=\"blog__sidebar-bar-block\">\n      <h2 className=\"blog__side-bar-title\">Categories</h2>\n      <nav className=\"blog__side-bar-list\">\n        {\n          selected\n            ? <>\n              <div>Viewing `{categories.find(({key}) => key === selected).value}`</div>\n              <Link to={`/blog`}>\n                <KeyboardArrowLeftIcon/> clear\n              </Link>\n            </>\n            : categories.map(({ key, value }) =>\n              <Link\n                key={key}\n                to={`/blog?category=${key}`}\n                className=\"blog__side-bar-item\"\n              >\n                {value}\n              </Link>\n            )\n        }\n      </nav>\n    </div> : <></>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const LOGIN = 'LOGIN';\nexport const LOGIN_COMPLETE = 'LOGIN_COMPLETE';\nexport const LOGIN_FAILED = 'LOGIN_FAILED';\n\nexport const SET_PERSONA = 'SET_PERSONA';\n\nexport const LOGOUT = 'LOGOUT';\nexport const LOGOUT_COMPLETE = 'LOGOUT_COMPLETE';\nexport const LOGOUT_FAILED = 'LOGOUT_FAILED';\n\nexport const REGISTRATION_COMPLETE = 'REGISTRATION_COMPLETE';\nexport const SUBMIT_REGISTRATION = 'SUBMIT_REGISTRATION';\nexport const SUBMIT_REGISTRATION_COMPLETE = 'SUBMIT_REGISTRATION_COMPLETE';\nexport const SUBMIT_REGISTRATION_FAILED = 'SUBMIT_REGISTRATION_FAILED';\n\nexport const FETCH_ORDERS = 'FETCH_ORDERS';\nexport const FETCH_ORDERS_COMPLETE = 'FETCH_ORDERS_COMPLETE';\nexport const FETCH_ORDERS_FAILED = 'FETCH_ORDERS_FAILED';\n\nexport const FETCH_ORDER = 'FETCH_ORDER';\nexport const FETCH_ORDER_COMPLETE = 'FETCH_ORDER_COMPLETE';\nexport const FETCH_ORDER_FAILED = 'FETCH_ORDER_FAILED';\n\nexport const UNAUTHORIZED = 'UNAUTHORIZED';\n\nexport const SET_LOGIN_REDIRECT = 'SET_LOGIN_REDIRECT';\nexport const RESET_LOGIN_REDIRECT = 'RESET_LOGIN_REDIRECT';\n\nexport const ADD_USER_ADDRESS = 'ADD_USER_ADDRESS';\nexport const ADD_USER_ADDRESS_COMPLETE = 'ADD_USER_ADDRESS_COMPLETE';\nexport const ADD_USER_ADDRESS_FAILED = 'ADD_USER_ADDRESS_FAILED';\n\nexport const EDIT_USER_ADDRESS = 'EDIT_USER_ADDRESS';\nexport const EDIT_USER_ADDRESS_COMPLETE = 'EDIT_USER_ADDRESS_COMPLETE';\nexport const EDIT_USER_ADDRESS_FAILED = 'EDIT_USER_ADDRESS_FAILED';\n\nexport const REMOVE_USER_ADDRESS = 'REMOVE_USER_ADDRESS';\nexport const REMOVE_USER_ADDRESS_COMPLETE = 'REMOVE_USER_ADDRESS_COMPLETE';\nexport const REMOVE_USER_ADDRESS_FAILED = 'REMOVE_USER_ADDRESS_FAILED';\n\nexport const SET_USER_ADDRESS_DEFAULTS = 'SET_USER_ADDRESS_DEFAULTS';\nexport const SET_USER_ADDRESS_DEFAULTS_COMPLETE = 'SET_USER_ADDRESS_DEFAULTS_COMPLETE';\nexport const SET_USER_ADDRESS_DEFAULTS_FAILED = 'SET_USER_ADDRESS_DEFAULTS_FAILED';\n\nexport function submitRegistration() {\n  return {\n    type: SUBMIT_REGISTRATION\n  };\n}\n\nexport function submitRegistrationComplete() {\n  return {\n    root: SUBMIT_REGISTRATION,\n    type: SUBMIT_REGISTRATION_COMPLETE\n  };\n}\n\nexport function submitRegistrationFailed(message) {\n  return {\n    root: SUBMIT_REGISTRATION,\n    type: SUBMIT_REGISTRATION_FAILED,\n    payload: message\n  };\n}\n\nexport function registrationComplete() {\n  return {\n    type: REGISTRATION_COMPLETE\n  };\n}\n\nexport function login(data, redirect) {\n  return {\n    type: LOGIN,\n    payload: { data, redirect }\n  };\n}\n\nexport function loginComplete(user) {\n  return {\n    root: LOGIN,\n    type: LOGIN_COMPLETE,\n    payload: user\n  };\n}\n\nexport const setPersona = (persona) => ({\n  type: SET_PERSONA,\n  payload: { persona }\n});\n\nexport function loginFailed(response) {\n  return {\n    root: LOGIN,\n    type: LOGIN_FAILED,\n    payload: response\n  };\n}\n\nexport function logout(redirect) {\n  return {\n    type: LOGOUT,\n    payload: { redirect }\n  };\n}\n\nexport function logoutComplete() {\n  return {\n    root: LOGOUT,\n    type: LOGOUT_COMPLETE\n  };\n}\n\nexport function logoutFailed() {\n  return {\n    root: LOGOUT,\n    type: LOGOUT_FAILED\n  };\n}\n\nexport function fetchOrders() {\n  return {\n    type: FETCH_ORDERS,\n    payload: null\n  };\n}\n\nexport function fetchOrdersComplete(response) {\n  return {\n    root: FETCH_ORDERS,\n    type: FETCH_ORDERS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchOrdersFailed(response) {\n  return {\n    root: FETCH_ORDERS,\n    type: FETCH_ORDERS_FAILED,\n    payload: response\n  };\n}\n\nexport function fetchOrder(id) {\n  return {\n    type: FETCH_ORDER,\n    payload: { id }\n  };\n}\n\nexport function fetchOrderComplete(response) {\n  return {\n    root: FETCH_ORDER,\n    type: FETCH_ORDER_COMPLETE,\n    payload: response\n  };\n}\n\nexport function fetchOrderFailed(response) {\n  return {\n    root: FETCH_ORDER,\n    type: FETCH_ORDER_FAILED,\n    payload: response\n  };\n}\n\nexport function setLoginRedirect(url) {\n  return {\n    type: SET_LOGIN_REDIRECT,\n    payload: { url }\n  };\n}\n\nexport function resetLoginRedirect() {\n  return {\n    type: RESET_LOGIN_REDIRECT\n  };\n}\n\nexport function addAddress(address) {\n  return {\n    type: ADD_USER_ADDRESS,\n    payload: { address }\n  };\n}\n\nexport function addAddressComplete(response) {\n  return {\n    root: ADD_USER_ADDRESS,\n    type: ADD_USER_ADDRESS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function addAddressFailed(response) {\n  return {\n    root: ADD_USER_ADDRESS,\n    type: ADD_USER_ADDRESS_FAILED,\n    payload: response\n  };\n}\n\nexport function editAddress(address) {\n  return {\n    type: EDIT_USER_ADDRESS,\n    payload: { address }\n  };\n}\n\nexport function editAddressComplete(response) {\n  return {\n    root: EDIT_USER_ADDRESS,\n    type: EDIT_USER_ADDRESS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function editAddressFailed(response) {\n  return {\n    root: EDIT_USER_ADDRESS,\n    type: EDIT_USER_ADDRESS_FAILED,\n    payload: response\n  };\n}\n\nexport function removeAddress(id) {\n  return {\n    type: REMOVE_USER_ADDRESS,\n    payload: { id }\n  };\n}\n\nexport function removeAddressComplete(response) {\n  return {\n    root: REMOVE_USER_ADDRESS,\n    type: REMOVE_USER_ADDRESS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function removeAddressFailed(response) {\n  return {\n    root: REMOVE_USER_ADDRESS,\n    type: REMOVE_USER_ADDRESS_FAILED,\n    payload: response\n  };\n}\n\nexport function setAddressDefaults(address) {\n  return {\n    type: SET_USER_ADDRESS_DEFAULTS,\n    payload: { address }\n  };\n}\n\nexport function setAddressDefaultsComplete(response) {\n  return {\n    root: SET_USER_ADDRESS_DEFAULTS,\n    type: SET_USER_ADDRESS_DEFAULTS_COMPLETE,\n    payload: response\n  };\n}\n\nexport function setAddressDefaultsFailed(response) {\n  return {\n    root: SET_USER_ADDRESS_DEFAULTS,\n    type: SET_USER_ADDRESS_DEFAULTS_FAILED,\n    payload: response\n  };\n}\n","export default __webpack_public_path__ + \"static/media/burger.db67016f.svg\";","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useState } from 'react';\nimport {\n  Col,\n  Container,\n  Popover,\n  PopoverBody,\n  Row,\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem\n} from 'reactstrap';\nimport Anchor from '../shared/Anchor';\nimport { Link, useHistory } from 'react-router-dom';\nimport SearchIcon from 'mdi-react/SearchIcon';\nimport PersonCircleOutlineIcon from 'mdi-react/PersonCircleOutlineIcon';\nimport ShoppingCartIcon from 'mdi-react/ShoppingCartIcon';\nimport hamburger  from '../../img/burger.svg';\nimport Flag from 'react-world-flags';\nimport { changeCurrency, changeLocale } from '../../redux/actions/productsActions';\nimport { useHeader, useNavigation, useStoreSettings } from '../shared/hooks';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\n\nconst FlagCodeMap = {\n  de: 'de',\n  en: 'us',\n  en_us: 'us'\n};\n\nexport default function Header() {\n\n  const dispatch = useAppDispatch();\n  const {\n    query: { locale, currency }\n  } = useAppSelector(state =>  state.products);\n\n  const [localesOpen, setLocalesOpen] = useState(false);\n  const [currenciesOpen, setCurrenciesOpen] = useState(false);\n\n  const history = useHistory();\n  const { users, products } = useAppSelector(state => state);\n  const { query } = products;\n  const [searchOpen, setSearchOpen] = useState(false);\n  const [keywords, setKeywords] = useState(query.keywords || '');\n\n  const { user } = users;\n\n  const header = useHeader();\n  const nav = useNavigation();\n  const storeSettings = useStoreSettings();\n\n  return (\n    <div className=\"landing__menu\">\n      <Container>\n        <Row>\n          <Col md={12}>\n            <div className=\"landing__menu-wrap\">\n              {\n                header &&\n                <Anchor className=\"landing__menu-logo\" href={header.logo_url_s}>\n                  <img src={header.logo_s} alt={header.logo_alt_t}/> <span className=\"landing__store-name\">{storeSettings && storeSettings.name}</span>\n                </Anchor>\n              }\n\n              <button\n                type=\"button\"\n                className=\"landing__menu-deployer\"\n                onClick={() => {\n                  const nav = document.querySelector('.landing__menu-nav');\n                  if (nav.classList.contains('open')) {\n                    nav.classList.remove('open');\n                  } else {\n                    nav.classList.add('open');\n                  }\n                }}\n              >\n                <img src={hamburger} alt=\"Open Menu\"/>\n              </button>\n              <nav className=\"landing__menu-nav\">\n                {\n                  nav && nav.map((item, index) =>\n                    <Anchor\n                      key={index}\n                      className=\"landing__menu-nav__item\"\n                      href={item.url}\n                    >\n                      {item.label}\n                    </Anchor>\n                  )\n                }\n                <Link\n                  to=\"/cart\"\n                  className=\"landing__menu-nav__item\"\n                  onClick={() => void null}\n                >\n                  <ShoppingCartIcon/>\n                </Link>\n                <button\n                  id=\"headerSearchButton\"\n                  className=\"landing__menu-nav__item\"\n                  onClick={() => {\n                    setSearchOpen(true);\n                    setTimeout(() => {\n                      try {\n                        document.getElementById('globalSearchInput').focus()\n                      } catch(e) {\n\n                      }\n                    })\n                  }}\n                >\n                  <SearchIcon/>\n                </button>\n                {\n                  (user == null)\n                    ? (\n                      <Link className=\"landing__btn\" to=\"/login\">\n                        Sign In\n                      </Link>\n                    ) : (\n                      <Link className=\"landing__menu-nav__item\" to=\"/account\">\n                        <PersonCircleOutlineIcon/>\n                      </Link>\n                    )\n                }\n                <Dropdown className=\"landing__header-locale-dropdown\" isOpen={localesOpen} toggle={() => setLocalesOpen(!localesOpen)}>\n                  <DropdownToggle caret>\n                    {FlagCodeMap[locale] ? <Flag code={FlagCodeMap[locale]}/> : locale}\n                  </DropdownToggle>\n                  {\n                    storeSettings &&\n                    <DropdownMenu>\n                      {\n                        (storeSettings.locales || []).map((code) => (\n                          <DropdownItem key={code} onClick={() => dispatch(changeLocale(code))}>\n                            {FlagCodeMap[code] ? <Flag code={FlagCodeMap[code]}/> : code}\n                          </DropdownItem>\n                        ))\n                      }\n                    </DropdownMenu>\n                  }\n                </Dropdown>\n                <Dropdown className=\"landing__header-currency-dropdown\" isOpen={currenciesOpen} toggle={() => setCurrenciesOpen(!currenciesOpen)}>\n                  <DropdownToggle caret>\n                    {currency}\n                  </DropdownToggle>\n                  {\n                    storeSettings &&\n                    <DropdownMenu>\n                      {\n                        (storeSettings.currencies || []).map((code) => (\n                          <DropdownItem key={code} onClick={() => dispatch(changeCurrency(code))}>{code}</DropdownItem>\n                        ))\n                      }\n                    </DropdownMenu>\n                  }\n                </Dropdown>\n              </nav>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n      <Popover\n        placement=\"bottom\"\n        target=\"headerSearchButton\"\n        isOpen={searchOpen}\n        toggle={() => setSearchOpen(false)}\n      >\n        <PopoverBody className=\"theme-light\">\n          <div className=\"form\">\n            <div className=\"form__form-group-field\">\n              <div className=\"form__form-group-icon\">\n                <SearchIcon/>\n              </div>\n              <input\n                id=\"globalSearchInput\"\n                type=\"text\"\n                name=\"keywords\"\n                value={keywords}\n                onChange={(e) => setKeywords(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && history.push(`/search?q=${e.target.value}`)}\n                placeholder=\"Search...\"\n              />\n            </div>\n          </div>\n        </PopoverBody>\n      </Popover>\n    </div>\n  );\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useState } from 'react';\nimport { Col, Row, Container, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport Anchor from \"../shared/Anchor\";\nimport Flag from 'react-world-flags';\nimport { changeCurrency, changeLocale } from '../../redux/actions/productsActions';\nimport { useFooter, useStoreSettings } from '../shared/hooks';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\n\nconst FlagCodeMap = {\n  de: 'de',\n  en: 'us',\n  en_us: 'us'\n};\n\nfunction Footer(props){\n  const dispatch = useAppDispatch();\n  const footer = useFooter();\n  const storeSettings = useStoreSettings();\n  const {\n    query: { locale, currency }\n  } = useAppSelector(state => state.products);\n\n  const [localesOpen, setLocalesOpen] = useState(false);\n\n  const [currenciesOpen, setCurrenciesOpen] = useState(false);\n\n  return (\n    <footer className=\"landing__footer\">\n      {\n        footer &&\n        footer.section_background_image_s &&\n        <img className=\"landing__footer-background\" src={footer.section_background_image_s} alt=\"\" />\n      }\n      <Container>\n        <Row>\n          <Col md={12}>\n            <Dropdown className=\"landing__footer-locale-dropdown\" direction=\"up\" isOpen={localesOpen} toggle={() => setLocalesOpen(!localesOpen)}>\n              <DropdownToggle caret>\n                {FlagCodeMap[locale] ? <Flag code={FlagCodeMap[locale]}/> : locale}\n              </DropdownToggle>\n              {\n                storeSettings &&\n                <DropdownMenu>\n                  {\n                    (storeSettings.locales || []).map((code) => (\n                      <DropdownItem key={code} onClick={() => dispatch(changeLocale(code))}>\n                        {FlagCodeMap[code] ? <Flag code={FlagCodeMap[code]}/> : code}\n                      </DropdownItem>\n                    ))\n                  }\n                </DropdownMenu>\n              }\n            </Dropdown>\n            <Dropdown className=\"landing__footer-currency-dropdown\" direction=\"up\" isOpen={currenciesOpen} toggle={() => setCurrenciesOpen(!currenciesOpen)}>\n              <DropdownToggle caret>\n                {currency}\n              </DropdownToggle>\n              {\n                storeSettings &&\n                <DropdownMenu>\n                  {\n                    (storeSettings.currencies || []).map((code) => (\n                      <DropdownItem key={code} onClick={() => dispatch(changeCurrency(code))}>{code}</DropdownItem>\n                    ))\n                  }\n                </DropdownMenu>\n              }\n            </Dropdown>\n          </Col>\n          <Col md={12}>\n            <p>Powered By</p>\n            {\n              footer &&\n              <Anchor href={footer.logo_url_s}>\n                <img className=\"landing__footer-logo\" src={footer.logo_s} alt={footer.logo_alt_t}/>\n              </Anchor>\n            }\n          </Col>\n          <Col md={12}>\n             {storeSettings && storeSettings.name} {new Date().getFullYear()}\n          </Col>\n        </Row>\n      </Container>\n    </footer>\n  );\n\n\n\n}\n\nexport default Footer;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React  from 'react';\nimport Header from './Header';\nimport Footer from './Footer';\n\nexport function Layout({ children, className = [] }) {\n  return (\n    <div className={`landing ${className}`}>\n      <Header/>\n      <div className=\"landing__content-wrapper\">\n        {\n          React.Children.map(children, (child) => {\n              return React.cloneElement(child)\n            })\n        }\n      </div>\n      <Footer/>\n    </div>\n  );\n}\n\nLayout.defaultProps = {\n  className: ''\n};\n\nexport default Layout;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { useCallback, useEffect, useReducer, useRef, useState } from 'react';\nimport { fetchQuery } from '../../util/content';\nimport {\n  footerQuery,\n  headerQuery,\n  navQuery,\n  postsQuery,\n  storeSettingsQuery\n} from './queries.graphql';\nimport { parseDescriptor, preParseSearchResults } from '@craftercms/content';\nimport { useGlobalContext } from './context';\nimport { useLocation } from 'react-router-dom';\nimport { parse } from 'query-string';\nimport { crafterConfig, createResource } from './utils';\nimport { createQuery, search } from '@craftercms/search';\nimport { map } from 'rxjs/operators';\n\nconst defaultPaginationData = {\n  itemsPerPage: 3,\n  currentPage: 0\n};\n\nexport const neverResource = createResource(() => new Promise(() => void 0));\n\nconst reducer = (state, nextState) => {\n  return { ...state, ...nextState };\n};\n\nexport function useSpreadState(initializerArg, initializer) {\n  return useReducer(reducer, initializerArg, initializer);\n}\n\nexport function usePosts(paginationData = defaultPaginationData, slug) {\n  const [posts, setPosts] = useState();\n\n  useEffect(() => {\n    fetchQuery(\n      { text: postsQuery },\n      {\n        postsLimit: paginationData.itemsPerPage,\n        postsOffset: (paginationData.currentPage * paginationData.itemsPerPage),\n        slug\n      }\n    ).then(({ data }) => {\n      setPosts({\n        items: parseDescriptor(data.post.items),\n        total: data.post.total,\n        pageCount: Math.ceil(data.post.total/paginationData.itemsPerPage)\n      });\n    });\n  }, [paginationData, slug]);\n\n  return posts;\n}\n\nexport function useCategories() {\n  const [{ categories, categoriesLoading }, update] = useGlobalContext();\n  const destroyedRef = useRef(false);\n\n  useEffect(() => {\n    return () => {\n      destroyedRef.current = true;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!categories && !categoriesLoading) {\n      update({ categoriesLoading: true });\n      fetchQuery({\n        text: `\n          query Blog {\n            categories: taxonomy {\n              items {\n                file__name(filter:{matches:\"category.xml\"})\n                items {\n                  item {\n                    key\n                    value\n                  }\n                }\n              }\n            }\n          }\n        `\n      }).then(({ data }) => {\n        (!destroyedRef.current) && update({ categories: parseDescriptor(data.categories.items)[0].items.item });\n      });\n    }\n  }, [update, categories, categoriesLoading]);\n\n  return categories;\n}\n\nexport function useSearchQuery() {\n  const { search } = useLocation();\n  const [query, setQuery] = useState(() => parse(search).q ?? '');\n  const [page, setPage] = useState(() => parse(search).p ?? 0);\n  const onChange = useCallback((e) => setQuery(e.target.value), []);\n  useEffect(() => {\n    setQuery(parse(search).q ?? '');\n    setPage(parse(search).p ?? 0);\n  }, [search]);\n\n  return [query, onChange, setQuery, page];\n}\n\nconst contentTypes = ['/component/post'];\nexport function useUrlSearchQueryFetchResource(size = 1) {\n  const [query, , , page] = useSearchQuery();\n  const [resource, setResource] = useState(neverResource);\n\n  useEffect(() => {\n    setResource(createResource(\n      () => search(\n        createQuery('elasticsearch', {\n          query: {\n            'bool': {\n              'filter': [\n                { 'bool': { 'should': contentTypes.map(id => ({ 'match': { 'content-type': id } })) } },\n                {\n                  'multi_match': {\n                    'query': query,\n                    'type': 'phrase_prefix'\n                  }\n                },\n              ]\n            }\n          },\n          size,\n          from: page\n        }),\n        crafterConfig\n      ).pipe(\n        map(({ hits, ...rest }) => {\n          const counted = {};\n          const parsedHits = hits.map(({ _source }) => parseDescriptor(\n            preParseSearchResults(_source)\n          )).filter((content) => {\n            if (content.craftercms.id in counted) {\n              return false;\n            } else {\n              counted[content.craftercms.id] = true;\n              return true;\n            }\n          });\n          return { ...rest, hits: parsedHits };\n        })\n      ).toPromise()\n    ))\n  }, [query, page, size]);\n  return resource;\n}\n\nexport function useNavigation() {\n  const [{ pages, pagesLoading }, update] = useGlobalContext();\n  const destroyedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      destroyedRef.current = true;\n    }\n  }, []);\n  useEffect(() => {\n    if (!pages && !pagesLoading) {\n      update({ pagesLoading: true });\n      fetchQuery({\n        text: navQuery\n      }).then(({ data }) => {\n        (!destroyedRef.current) && update({ pages: data.pages.items });\n      })\n    }\n  }, [update, pages, pagesLoading]);\n  return pages;\n}\n\nexport function useHeader() {\n  const [{ header, headerLoading}, update] = useGlobalContext();\n  const destroyedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      destroyedRef.current = true;\n    }\n  }, []);\n  useEffect(() => {\n    if (!header && !headerLoading) {\n      update({ headerLoading: true });\n      fetchQuery({\n        text: headerQuery\n      }).then(({ data }) => {\n        (!destroyedRef.current) && update({ header: data.component_header.items[0]});\n      })\n    }\n  }, [update, header, headerLoading]);\n  return header;\n}\n\nexport function useFooter() {\n  const [{ footer, footerLoading }, update] = useGlobalContext();\n  const destroyedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      destroyedRef.current = true;\n    }\n  }, []);\n  useEffect(() => {\n    if (!footer && !footerLoading) {\n      update({ footerLoading: true });\n      fetchQuery({\n        text: footerQuery\n      }).then(({ data }) => {\n        (!destroyedRef.current) && update({ footer: data.component_footer.items[0] });\n      })\n    }\n  }, [update, footer, footerLoading]);\n  return footer;\n}\n\nexport function useStoreSettings() {\n  const [{ storeSettings, storeSettingsLoading }, update] = useGlobalContext();\n  const destroyedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      destroyedRef.current = true;\n    }\n  }, []);\n  useEffect(() => {\n    if(!storeSettings && !storeSettingsLoading) {\n      update({ storeSettingsLoading: true });\n      fetchQuery({\n        text: storeSettingsQuery\n      }).then(({ data }) => {\n        (!destroyedRef.current) && update({ storeSettings: data.store.settings });\n      });\n    }\n  }, [update, storeSettings, storeSettingsLoading]);\n  return storeSettings;\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nexport const Currencies = {\n  USD: '$',\n  EUR: ''\n};\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { Currencies } from './constants';\n\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.substring(1).toLowerCase();\n}\n\nexport function money(amount, currency) {\n  return amount == null ? '' : `${Currencies[currency] || currency || ''}${parseFloat(amount).toFixed(2)}`;\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { PureComponent } from 'react';\nimport { Alert as AlertReactstrap } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport InformationOutlineIcon from 'mdi-react/InformationOutlineIcon';\nimport ThumbUpOutlineIcon from 'mdi-react/ThumbUpOutlineIcon';\nimport CommentAlertOutlineIcon from 'mdi-react/CommentAlertOutlineIcon';\nimport CloseCircleOutlineIcon from 'mdi-react/CloseCircleOutlineIcon';\n\nclass Alert extends PureComponent {\n  static propTypes = {\n    color: PropTypes.string,\n    icon: PropTypes.bool,\n    className: PropTypes.string,\n    children: PropTypes.element.isRequired,\n  };\n\n  static defaultProps = {\n    color: '',\n    icon: false,\n    className: '',\n    dismiss: true,\n    onDismiss: () => void null\n  };\n\n  constructor() {\n    super();\n\n    this.state = {\n      visible: true,\n    };\n  }\n\n  onShow = () => {\n    this.setState({ visible: true });\n  };\n\n  onDismiss = () => {\n    this.setState({ visible: false });\n    this.props.onDismiss()\n  };\n\n  render() {\n    const { visible } = this.state;\n\n    const {\n      color,\n      className,\n      icon,\n      children,\n      dismiss\n    } = this.props;\n    let Icon;\n\n    switch (color) {\n      case 'info':\n        Icon = <InformationOutlineIcon />;\n        break;\n      case 'success':\n        Icon = <ThumbUpOutlineIcon />;\n        break;\n      case 'warning':\n        Icon = <CommentAlertOutlineIcon />;\n        break;\n      case 'danger':\n        Icon = <CloseCircleOutlineIcon />;\n        break;\n      default:\n        break;\n    }\n\n    if (visible) {\n      return (\n        <AlertReactstrap color={color} className={className} isOpen={visible}>\n          {icon && <div className=\"alert__icon\">{Icon}</div>}\n          {dismiss && <button className=\"close\" type=\"button\" onClick={this.onDismiss}><span className=\"lnr lnr-cross\" /></button>}\n          <div className=\"alert__content\">\n            {children}\n          </div>\n        </AlertReactstrap>\n      );\n    }\n\n    return null;\n\n  }\n}\n\nexport default Alert;\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from 'react';\n\n// var defaultEmptyImg = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTg0IiBoZWlnaHQ9IjE1MiIgdmlld0JveD0iMCAwIDE4NCAxNTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0IDMxLjY3KSI+CiAgICAgIDxlbGxpcHNlIGZpbGwtb3BhY2l0eT0iLjgiIGZpbGw9IiNGNUY1RjciIGN4PSI2Ny43OTciIGN5PSIxMDYuODkiIHJ4PSI2Ny43OTciIHJ5PSIxMi42NjgiLz4KICAgICAgPHBhdGggZD0iTTEyMi4wMzQgNjkuNjc0TDk4LjEwOSA0MC4yMjljLTEuMTQ4LTEuMzg2LTIuODI2LTIuMjI1LTQuNTkzLTIuMjI1aC01MS40NGMtMS43NjYgMC0zLjQ0NC44MzktNC41OTIgMi4yMjVMMTMuNTYgNjkuNjc0djE1LjM4M2gxMDguNDc1VjY5LjY3NHoiIGZpbGw9IiNBRUI4QzIiLz4KICAgICAgPHBhdGggZD0iTTEwMS41MzcgODYuMjE0TDgwLjYzIDYxLjEwMmMtMS4wMDEtMS4yMDctMi41MDctMS44NjctNC4wNDgtMS44NjdIMzEuNzI0Yy0xLjU0IDAtMy4wNDcuNjYtNC4wNDggMS44NjdMNi43NjkgODYuMjE0djEzLjc5Mmg5NC43NjhWODYuMjE0eiIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudC0xKSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMuNTYpIi8+CiAgICAgIDxwYXRoIGQ9Ik0zMy44MyAwaDY3LjkzM2E0IDQgMCAwIDEgNCA0djkzLjM0NGE0IDQgMCAwIDEtNCA0SDMzLjgzYTQgNCAwIDAgMS00LTRWNGE0IDQgMCAwIDEgNC00eiIgZmlsbD0iI0Y1RjVGNyIvPgogICAgICA8cGF0aCBkPSJNNDIuNjc4IDkuOTUzaDUwLjIzN2EyIDIgMCAwIDEgMiAyVjM2LjkxYTIgMiAwIDAgMS0yIDJINDIuNjc4YTIgMiAwIDAgMS0yLTJWMTEuOTUzYTIgMiAwIDAgMSAyLTJ6TTQyLjk0IDQ5Ljc2N2g0OS43MTNhMi4yNjIgMi4yNjIgMCAxIDEgMCA0LjUyNEg0Mi45NGEyLjI2MiAyLjI2MiAwIDAgMSAwLTQuNTI0ek00Mi45NCA2MS41M2g0OS43MTNhMi4yNjIgMi4yNjIgMCAxIDEgMCA0LjUyNUg0Mi45NGEyLjI2MiAyLjI2MiAwIDAgMSAwLTQuNTI1ek0xMjEuODEzIDEwNS4wMzJjLS43NzUgMy4wNzEtMy40OTcgNS4zNi02LjczNSA1LjM2SDIwLjUxNWMtMy4yMzggMC01Ljk2LTIuMjktNi43MzQtNS4zNmE3LjMwOSA3LjMwOSAwIDAgMS0uMjIyLTEuNzlWNjkuNjc1aDI2LjMxOGMyLjkwNyAwIDUuMjUgMi40NDggNS4yNSA1LjQydi4wNGMwIDIuOTcxIDIuMzcgNS4zNyA1LjI3NyA1LjM3aDM0Ljc4NWMyLjkwNyAwIDUuMjc3LTIuNDIxIDUuMjc3LTUuMzkzVjc1LjFjMC0yLjk3MiAyLjM0My01LjQyNiA1LjI1LTUuNDI2aDI2LjMxOHYzMy41NjljMCAuNjE3LS4wNzcgMS4yMTYtLjIyMSAxLjc4OXoiIGZpbGw9IiNEQ0UwRTYiLz4KICAgIDwvZz4KICAgIDxwYXRoIGQ9Ik0xNDkuMTIxIDMzLjI5MmwtNi44MyAyLjY1YTEgMSAwIDAgMS0xLjMxNy0xLjIzbDEuOTM3LTYuMjA3Yy0yLjU4OS0yLjk0NC00LjEwOS02LjUzNC00LjEwOS0xMC40MDhDMTM4LjgwMiA4LjEwMiAxNDguOTIgMCAxNjEuNDAyIDAgMTczLjg4MSAwIDE4NCA4LjEwMiAxODQgMTguMDk3YzAgOS45OTUtMTAuMTE4IDE4LjA5Ny0yMi41OTkgMTguMDk3LTQuNTI4IDAtOC43NDQtMS4wNjYtMTIuMjgtMi45MDJ6IiBmaWxsPSIjRENFMEU2Ii8+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDkuNjUgMTUuMzgzKSIgZmlsbD0iI0ZGRiI+CiAgICAgIDxlbGxpcHNlIGN4PSIyMC42NTQiIGN5PSIzLjE2NyIgcng9IjIuODQ5IiByeT0iMi44MTUiLz4KICAgICAgPHBhdGggZD0iTTUuNjk4IDUuNjNIMEwyLjg5OC43MDR6TTkuMjU5LjcwNGg0Ljk4NVY1LjYzSDkuMjU5eiIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==\";\n// var simpleEmptyImg = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNDEiIHZpZXdCb3g9IjAgMCA2NCA0MSIgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxlbGxpcHNlIGZpbGw9IiNGNUY1RjUiIGN4PSIzMiIgY3k9IjMzIiByeD0iMzIiIHJ5PSI3Ii8+CiAgICA8ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgIDxwYXRoIGQ9Ik01NSAxMi43Nkw0NC44NTQgMS4yNThDNDQuMzY3LjQ3NCA0My42NTYgMCA0Mi45MDcgMEgyMS4wOTNjLS43NDkgMC0xLjQ2LjQ3NC0xLjk0NyAxLjI1N0w5IDEyLjc2MVYyMmg0NnYtOS4yNHoiLz4KICAgICAgPHBhdGggZD0iTTQxLjYxMyAxNS45MzFjMC0xLjYwNS45OTQtMi45MyAyLjIyNy0yLjkzMUg1NXYxOC4xMzdDNTUgMzMuMjYgNTMuNjggMzUgNTIuMDUgMzVoLTQwLjFDMTAuMzIgMzUgOSAzMy4yNTkgOSAzMS4xMzdWMTNoMTEuMTZjMS4yMzMgMCAyLjIyNyAxLjMyMyAyLjIyNyAyLjkyOHYuMDIyYzAgMS42MDUgMS4wMDUgMi45MDEgMi4yMzcgMi45MDFoMTQuNzUyYzEuMjMyIDAgMi4yMzctMS4zMDggMi4yMzctMi45MTN2LS4wMDd6IiBmaWxsPSIjRkFGQUZBIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K\";\n\nconst img = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNDEiIHZpZXdCb3g9IjAgMCA2NCA0MSIgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxlbGxpcHNlIGZpbGw9IiNGNUY1RjUiIGN4PSIzMiIgY3k9IjMzIiByeD0iMzIiIHJ5PSI3Ii8+CiAgICA8ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgIDxwYXRoIGQ9Ik01NSAxMi43Nkw0NC44NTQgMS4yNThDNDQuMzY3LjQ3NCA0My42NTYgMCA0Mi45MDcgMEgyMS4wOTNjLS43NDkgMC0xLjQ2LjQ3NC0xLjk0NyAxLjI1N0w5IDEyLjc2MVYyMmg0NnYtOS4yNHoiLz4KICAgICAgPHBhdGggZD0iTTQxLjYxMyAxNS45MzFjMC0xLjYwNS45OTQtMi45MyAyLjIyNy0yLjkzMUg1NXYxOC4xMzdDNTUgMzMuMjYgNTMuNjggMzUgNTIuMDUgMzVoLTQwLjFDMTAuMzIgMzUgOSAzMy4yNTkgOSAzMS4xMzdWMTNoMTEuMTZjMS4yMzMgMCAyLjIyNyAxLjMyMyAyLjIyNyAyLjkyOHYuMDIyYzAgMS42MDUgMS4wMDUgMi45MDEgMi4yMzcgMi45MDFoMTQuNzUyYzEuMjMyIDAgMi4yMzctMS4zMDggMi4yMzctMi45MTN2LS4wMDd6IiBmaWxsPSIjRkFGQUZBIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K';\n\nexport function Empty(props) {\n  return (\n    <section className=\"empty\">\n      <figure className=\"empty__fig\">\n        <img className=\"empty__img\" src={img} alt=\"\"/>\n      </figure>\n      {\n        props.description &&\n        <p className=\"empty__desc\">\n          {props.description}\n        </p>\n      }\n    </section>\n  )\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Anchor(props) {\n\n  const { href, autoTarget } = props;\n\n  // eslint-disable-next-line\n  const isExternal = !!['http:', 'https:', 'javascript:'].find((protocol) => href.includes(protocol));\n  const Component = isExternal ? 'a' : Link;\n\n  const resultProps = {\n    ...(\n      isExternal\n        ? { href: href }\n        : { to: href }\n    ),\n    ...(\n      autoTarget && isExternal\n        ? { target: \"_blank\" }\n        : {}\n    ),\n    ...props\n  };\n\n  !isExternal && delete resultProps.href;\n  delete resultProps.autoTarget;\n\n  return (\n    <Component {...resultProps}>\n      {props.children}\n    </Component>\n  );\n\n}\n\nAnchor.defaultProps = {\n  // eslint-disable-next-line\n  href: 'javascript:',\n  autoTarget: true\n};\n","import { ajax } from 'rxjs/ajax';\nimport { useAppSelector } from '../redux/store';\n\nexport function getProducts(params = {}) {\n\n  const qs = Object.entries({\n    locale: 'en',\n    currency: 'USD',\n    ...(params || {})\n  }).map(([key, value]) => `${key}=${value}`);\n\n  return ajax.get(`/api/1/product/all.json${qs.length > 0 ? '?' : ''}${qs.join('&')}`);\n\n}\n\nexport function useProductsQuery(params = {}) {\n  const { query: { currency, locale } } = useAppSelector(state => state.products);\n  return { currency, locale, ...params };\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport { crafterConf } from '@craftercms/classes';\nimport Cookies from 'js-cookie';\n\nexport function isAuthoring() {\n  const html = document.documentElement;\n  const attr = html.getAttribute('data-craftercms-preview');\n  return (\n    // eslint-disable-next-line no-template-curly-in-string\n    attr === '${modePreview?c}' || // Otherwise disable/enable if you want to see pencils in dev server.\n    attr === 'true'\n  );\n}\n\nexport function createResource(factory) {\n  let result;\n  let status = \"pending\";\n  let suspender = factory().then(\n    response => {\n      status = \"success\";\n      result = response;\n    },\n    error => {\n      status = \"error\";\n      result = error;\n    }\n  );\n  return {\n    read() {\n      if (status === \"pending\") {\n        throw suspender;\n      } else if (status === \"error\") {\n        throw result;\n      } else if (status === \"success\") {\n        return result;\n      }\n    }\n  };\n}\n\nexport const siteName =\n  document.getElementById('2fb5164e').innerHTML ||\n  process.env.REACT_APP_CRAFTERCMS_SITE_ID ||\n  Cookies.get('crafterSite');\nif (!siteName) {\n  throw new Error('Site not set.');\n}\n\nexport const crafterConfig = {\n  baseUrl: process.env.REACT_APP_CRAFTERCMS_BASE_URL ?? '',\n  site: siteName\n};\n\ncrafterConf.configure(crafterConfig);\n"],"sourceRoot":""}