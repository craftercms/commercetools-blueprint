{"version":3,"sources":["components/shared/range_slider/Range.js","components/app/Facets.js","components/app/ProductsListing.js"],"names":["Range","createSliderWithTooltip","Slider","RangeTheme","this","props","min","max","marks","value","tipFormatter","tipOptions","onChange","onAfterChange","className","defaultValue","tipProps","PureComponent","defaultProps","visible","MultipleSelectionFacet","title","facets","checked","onSelection","map","facet","CheckBox","name","label","includes","e","target","SingleSelectionFacet","renderRadioButtonField","radioValue","input","RangeFacet","HierarchicalFacets","onClick","children","length","cardigans_n_sweaters","ProductListing","dispatch","useAppDispatch","history","useAppSelector","state","products","byId","query","loading","errors","Object","values","inputRef","useRef","queryString","qs","location","search","facetMeta","list","types","forEach","type","push","entries","key","split","reduce","obj","index","parseInt","fetch","fetchProducts","useEffect","locale","currency","current","keywords","Layout","Container","FETCH_PRODUCTS","Alert","color","icon","dismiss","Button","outline","Spinner","contained","Row","Col","md","to","containerClassName","pageClassName","pageLinkClassName","previousClassName","previousLinkClassName","nextClassName","nextLinkClassName","pageRangeDisplayed","marginPagesDisplayed","activeClassName","initialPage","offset","limit","pageCount","Math","ceil","total","onPageChange","nextPage","newQS","nextPageIndex","nextOffset","q","price","rating","categories","colors","join","onOffsetChanged","selected","disableInitialCallback","previousLabel","nextLabel","product","Product","id","style","background","marginBottom","border","ref","placeholder","onKeyPress","onKeywordsChange","Component","facetItem","which","collection","filter","_value","val","onMultipleValueChange","items","_facet_","onRangeChange"],"mappings":"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","file":"static/js/7.9dd812fa.chunk.js","sourcesContent":["/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint-disable prefer-destructuring */\nimport 'rc-slider/assets/index.css';\nimport React, { PureComponent } from 'react';\nimport Slider from 'rc-slider';\nimport PropTypes from 'prop-types';\n\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\nconst Range = createSliderWithTooltip(Slider.Range);\n\nexport default class RangeTheme extends PureComponent {\n  static propTypes = {\n    marks: PropTypes.shape(),\n    value: PropTypes.arrayOf(PropTypes.number).isRequired,\n    min: PropTypes.number.isRequired,\n    max: PropTypes.number.isRequired,\n    tipFormatter: PropTypes.func,\n  };\n\n  static defaultProps = {\n    marks: {},\n    tipFormatter: value => value,\n    tipOptions: {visible: true}\n  };\n\n  render() {\n    const {\n      min,\n      max,\n      marks,\n      value,\n      tipFormatter,\n      tipOptions,\n      onChange,\n      onAfterChange\n    } = this.props;\n\n    return (\n      <div className=\"slider\">\n        <div className=\"slider__min\">\n          <p>{tipFormatter ? tipFormatter(min) : min}</p>\n        </div>\n        <div className=\"slider__max\">\n          <p>{tipFormatter ? tipFormatter(max) : max}</p>\n        </div>\n        <Range\n          min={min}\n          max={max}\n          defaultValue={value}\n          tipFormatter={tipFormatter}\n          marks={marks}\n          tipProps={tipOptions}\n          onAfterChange={onAfterChange}\n          onChange={onChange}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { Fragment } from 'react';\nimport { CheckBox } from '../shared/form/CheckBox';\nimport renderRadioButtonField from '../shared/form/RadioButton';\nimport Range from '../shared/range_slider/Range';\n\nconst SAMPLE = [\n  { label: 'Dresses', value: 'dresses' },\n  {\n    label: 'Cardigans & Sweaters',\n    value: 'cardigans_n_sweaters',\n    children: [\n      { label: 'Sweaters', value: 'sweaters' },\n      { label: 'Cardigans', value: 'cardigans' },\n      { label: 'Sweatshirts', value: 'sweatshirts' }\n    ]\n  },\n  { label: 'Jumpsuits', value: 'jumpsuits' },\n  { label: 'T-shirts', value: 't-shirts' },\n  { label: 'Jackets', value: 'jackets' }\n];\n\nexport function HierarchicalFacets(props) {\n  const {\n    title,\n    facets,\n    checked,\n    onSelection\n  } = props;\n  return (\n    <nav className=\"hierarchical-facets\">\n      {title && <h2 className=\"facet-list-title\">Clothing</h2>}\n      {\n        facets.map((facet) =>\n          <Fragment key={facet.value}>\n            <button\n              className={`hierarchical-facets__item ${checked[facet.value] ? 'hierarchical-facets__item--checked' : ''}`}\n              onClick={() => onSelection(facet)}\n            >{facet.label}</button>\n            {\n              facet.children &&\n              facet.children.length &&\n              checked[facet.value] &&\n              <HierarchicalFacets\n                {...props}\n                title={null}\n                facets={facet.children}\n              />\n            }\n          </Fragment>\n        )\n      }\n    </nav>\n  )\n}\n\nexport function MultipleSelectionFacet(props) {\n  const {\n    title,\n    facets,\n    checked,\n    onSelection\n  } = props;\n  return (\n    <nav className=\"multiple-selection-facets\">\n      {title && <h2 className=\"facet-list-title\">{title}</h2>}\n      <div className=\"form__form-group\">\n        {\n          facets.map((facet) =>\n            <div key={facet.value} className=\"form__form-group-field\">\n              <CheckBox\n                name=\"categories\"\n                label={facet.label}\n                value={facet.value}\n                checked={checked.includes(facet.value)}\n                onChange={(e) => onSelection(e.target.checked, facet)}\n              />\n            </div>\n          )\n        }\n      </div>\n    </nav>\n  );\n}\n\nexport function SingleSelectionFacet(props) {\n  const {\n    title,\n    facets\n  } = props;\n  return (\n    <nav className=\"single-selection-facets\">\n      {title && <h2 className=\"facet-list-title\">{title}</h2>}\n      <div className=\"form__form-group\">\n        {\n          facets.map((facet) =>\n            <div key={facet.value} className=\"form__form-group-field\">\n              {\n                renderRadioButtonField({\n                  label: facet.label,\n                  radioValue: facet.value,\n                  input: {\n                    value: facets[0].value,\n                    name: 'singleGroupName',\n                    onChange: () => void null\n                  }\n                })\n              }\n            </div>\n          )\n        }\n      </div>\n    </nav>\n  );\n}\n\nexport function RangeFacet(props) {\n  const {\n    min,\n    max,\n    value,\n    title,\n    onChange,\n    tipFormatter\n  } = props;\n  return (\n    <nav className=\"range-selection-facet\">\n      <h2 className=\"facet-list-title\">{title}</h2>\n      <Range\n        min={min}\n        max={max}\n        value={value}\n        tipOptions={{ visible: false }}\n        onAfterChange={onChange}\n        tipFormatter={tipFormatter}\n      />\n    </nav>\n  )\n}\n\nSingleSelectionFacet.defaultProps =\n  MultipleSelectionFacet.defaultProps =\n    HierarchicalFacets.defaultProps = {\n      title: 'Clothing',\n      facets: SAMPLE,\n      checked: { cardigans_n_sweaters: true },\n      onSelection: (facet) => void null\n    };\n\n\n","/*\n * MIT License\n *\n * Copyright (c) 2021 Crafter Software Corporation. All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport React, { useEffect, useRef } from 'react';\nimport { Button, Col, Container, Row } from 'reactstrap';\nimport Layout from './Layout';\nimport {\n  MultipleSelectionFacet,\n  RangeFacet, SingleSelectionFacet,\n} from './Facets';\nimport Spinner from '../shared/Spinner';\nimport Product from './Product';\nimport * as qs from 'query-string';\nimport { fetchProducts, FETCH_PRODUCTS } from '../../redux/actions/productsActions';\nimport Alert from '../shared/Alert';\nimport { Link } from 'react-router-dom';\nimport SearchIcon from 'mdi-react/SearchIcon';\nimport ChevronRightIcon from 'mdi-react/ChevronRightIcon';\nimport ChevronLeftIcon from 'mdi-react/ChevronLeftIcon';\nimport ReactPaginate from 'react-paginate';\nimport { useAppDispatch, useAppSelector } from '../../redux/store';\n\nexport default function ProductListing(props) {\n\n  const dispatch = useAppDispatch();\n  const { history } = props;\n  const { byId, facets, query, loading, errors } = useAppSelector(state => state.products);\n  const products = byId ? Object.values(byId) : null;\n  const inputRef = useRef();\n\n  const queryString = qs.parse(props.location.search);\n  const facetMeta = { list: [], types: {}, state: {} };\n\n  if (facets) {\n    facets.forEach(({ type, value }) => {\n      facetMeta.list.push(value);\n      facetMeta.types[value] = type;\n      switch (type) {\n        case 'multiple':\n          facetMeta.state[value] = [];\n          break;\n        case 'single':\n          facetMeta.state[value] = '';\n          break;\n        case 'range':\n          facetMeta.state[value] = null;\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  // Facets haven't loaded during the first render so can't rely\n  // on facet type to do the proper URL decoding. Relying on inspection\n  // for now.\n  Object.entries(queryString).forEach(([key, value]) => {\n    if (key === 'q') {\n      key = 'keywords';\n      facetMeta.state[key] = value;\n    } else if (key === 'offset' || key === 'limit') {\n      facetMeta.state[key] = value;\n    } else {\n      facetMeta.state[key] = (['rating', 'price'].includes(key))\n        ? (\n          value.split('-').reduce(\n            (obj, value, index) => ({\n              ...obj,\n              ...{ [index === 0 ? 'min' : 'max']: parseInt(value) }\n            }),\n            {}\n          )\n        ) : (\n          // This should catch both single and multiple all the same\n          facetMeta.state[key] = value.split(',')\n        );\n    }\n  });\n\n  const fetch = () => {\n    dispatch(fetchProducts(facetMeta.state));\n  };\n\n  // Adding facetMeta.state is creating a loop\n  // eslint-disable-next-line\n  useEffect(fetch, [history.location.search, query.locale, query.currency, dispatch]);\n\n  useEffect(\n    () => {\n      (inputRef.current || { value: '' }).value = query.keywords;\n    },\n    [query.keywords]\n  );\n\n  function onRangeChange(which, value) {\n    const newQS = [];\n\n    queryString.q && newQS.push(`q=${queryString.q}`);\n    Object.entries(queryString).forEach(([key, val]) => key !== which && newQS.push(`${key}=${val}`));\n    newQS.push(`${which}=${value.join('-')}`);\n\n    history.push(`/catalog${newQS.length ? `?${newQS.join('&')}` : ''}`);\n\n  }\n\n  function onMultipleValueChange(which, checked, { value }) {\n\n    let collection = query[which] || [];\n    if (checked) {\n      collection = [...collection, value];\n    } else {\n      collection = collection.filter((_value) => _value !== value);\n    }\n\n    const newQS = [];\n\n    queryString.q && newQS.push(`q=${queryString.q}`);\n    Object.entries(queryString).forEach(([key, val]) => {\n      if (key === 'offset') {\n        newQS.push(`${key}=0`)\n      } else if (key !== which)\n        newQS.push(`${key}=${val}`)\n    });\n    (collection.length > 0) && newQS.push(`${which}=${collection.join(',')}`);\n\n    history.push(`/catalog${newQS.length ? `?${newQS.join('&')}` : ''}`);\n\n  }\n\n  function onKeywordsChange(value) {\n    const newQS = [];\n\n    newQS.push(`q=${value || ''}`);\n    queryString.price && newQS.push(`price=${queryString.price}`);\n    queryString.rating && newQS.push(`rating=${queryString.rating}`);\n    queryString.categories && newQS.push(`categories=${queryString.categories}`);\n    queryString.colors && newQS.push(`colors=${queryString.colors}`);\n\n    history.push(`/catalog${newQS.length ? `?${newQS.join('&')}` : ''}`);\n  }\n\n  function onOffsetChanged(nextPage) {\n    const newQS = [];\n    const nextPageIndex = nextPage - 1;\n\n    const nextOffset = query.limit * nextPageIndex;\n\n    (nextOffset != null) && newQS.push(`offset=${nextOffset}`);\n    queryString.q && newQS.push(`q=${queryString.q}`);\n    queryString.price && newQS.push(`price=${queryString.price}`);\n    queryString.rating && newQS.push(`rating=${queryString.rating}`);\n    queryString.categories && newQS.push(`categories=${queryString.categories}`);\n    queryString.colors && newQS.push(`colors=${queryString.colors}`);\n\n    history.push(`/catalog${newQS.length ? `?${newQS.join('&')}` : ''}`);\n  }\n\n  return (\n    <Layout>\n      <Container>\n        {\n          (errors[FETCH_PRODUCTS]) &&\n          <Alert color=\"danger\" className=\"alert--bordered\" icon dismiss={false}>\n            <span>\n              An error has occurred trying to fetch products.\n              <Button outline\n                      onClick={fetch}\n                      className=\"btn-retry btn-sm\"\n              >\n                Retry\n              </Button>\n            </span>\n          </Alert>\n        }\n        {\n          (loading[FETCH_PRODUCTS]) &&\n          <Spinner contained/>\n        }\n        {\n          (loading[FETCH_PRODUCTS] === false) &&\n          <>\n            <Row>\n              {\n                facetMeta.state.keywords &&\n                <Col md={12}>\n                  <h2 className=\"page-title\">Search results for \"{facetMeta.state.keywords}\"</h2>\n                  <Link className=\"page-subhead\" to=\"/catalog\">(clear query)</Link>\n                </Col>\n              }\n              <Col md={9}>\n                <div className=\"catalog-items__wrap\">\n                  <div className=\"catalog-page-controls\">\n                    <ReactPaginate\n                      containerClassName=\"pagination\"\n                      pageClassName=\"pagination__item\"\n                      pageLinkClassName=\"pagination__link\"\n                      previousClassName=\"pagination__item\"\n                      previousLinkClassName=\"pagination__link pagination__link--arrow\"\n                      nextClassName=\"pagination__item\"\n                      nextLinkClassName=\"pagination__link pagination__link--arrow\"\n                      pageRangeDisplayed={3}\n                      marginPagesDisplayed={3}\n                      activeClassName=\"active\"\n                      initialPage={(query.offset / query.limit)}\n                      pageCount={Math.ceil(query.total / query.limit)}\n                      onPageChange={({ selected: index }) => onOffsetChanged(index + 1)}\n                      disableInitialCallback={true}\n                      previousLabel={<ChevronLeftIcon className=\"pagination__link-icon\" />}\n                      nextLabel={<ChevronRightIcon className=\"pagination__link-icon\" />}\n                    />\n                  </div>\n                  <div className=\"catalog-items\">\n                    {products.map(product =>\n                      <Product key={product.id} product={product}/>\n                    )}\n                    {\n                      (products.length === 0) && (\n                        <Alert color=\"info\" className=\"alert--bordered\" icon dismiss={false}>\n                          <span>No products to display (\n                            <Link to=\"/catalog\">clear filters</Link>\n                          )</span>\n                        </Alert>\n                      )\n                    }\n                  </div>\n                </div>\n              </Col>\n              <Col md={3}>\n\n                <div className=\"form\" style={{ background: 'white', marginBottom: 20, border: '1px solid #ddd' }}>\n                  <div className=\"form__form-group-field\">\n                    <div className=\"form__form-group-icon\">\n                      <SearchIcon/>\n                    </div>\n                    <input\n                      ref={inputRef}\n                      type=\"text\"\n                      name=\"keywords\"\n                      placeholder=\"Keywords...\"\n                      defaultValue={query.keywords}\n                      onKeyPress={\n                        (e) =>\n                          e.key === 'Enter' &&\n                          onKeywordsChange(e.target.value)\n                      }\n                    />\n                  </div>\n                </div>\n\n                {\n                  facets && facets.map((facet) => {\n                    switch (facet.type) {\n                      case 'single':\n                      case 'multiple': {\n                        const Component = facet.type === 'multiple'\n                          ? MultipleSelectionFacet\n                          : SingleSelectionFacet;\n                        return <Component\n                          key={facet.value}\n                          title={facet.name}\n                          checked={facetMeta.state[facet.value]}\n                          onSelection={(checked, facetItem) => onMultipleValueChange(facet.value, checked, facetItem)}\n                          facets={\n                            facet.items.map((_facet_) => ({\n                              value: _facet_.value,\n                              label: _facet_.name\n                            }))\n                          }\n                        />;\n                      }\n                      case 'range': {\n                        return <RangeFacet\n                          onChange={(value) => onRangeChange(facet.value, value)}\n                          key={facet.value}\n                          title={facet.name}\n                          min={facet.min}\n                          max={facet.max}\n                          tipFormatter={facet.value === 'price' ? value => `$${value}` : value => value}\n                          value={\n                            facetMeta.state[facet.value]\n                              ? [facetMeta.state[facet.value].min, facetMeta.state[facet.value].max]\n                              : [facet.min, facet.max]\n                          }\n                        />;\n                      }\n                      default:\n                        return null;\n                    }\n                  })\n                }\n\n              </Col>\n            </Row>\n          </>\n        }\n      </Container>\n    </Layout>\n  );\n};\n"],"sourceRoot":""}